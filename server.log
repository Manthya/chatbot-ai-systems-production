INFO:     Started server process [39509]
INFO:     Waiting for application startup.
2026-02-18 17:31:23,796 - chatbot_ai_system.server.main - INFO - Starting Chatbot AI System v0.1.0
2026-02-18 17:31:23,796 - chatbot_ai_system.server.main - INFO - Debug mode: True
2026-02-18 17:31:23,796 - chatbot_ai_system.server.main - INFO - Default LLM provider: ollama
2026-02-18 17:31:23,905 - chatbot_ai_system.database.redis - INFO - Successfully connected to Redis.
2026-02-18 17:31:23,907 - chatbot_ai_system.server.main - INFO - Loading 9 MCP servers...
2026-02-18 17:31:23,907 - chatbot_ai_system.server.main - INFO - Registered MCP server: filesystem
2026-02-18 17:31:23,908 - chatbot_ai_system.server.main - INFO - Registered MCP server: time
2026-02-18 17:31:23,908 - chatbot_ai_system.server.main - INFO - Registered MCP server: memory
2026-02-18 17:31:23,908 - chatbot_ai_system.server.main - INFO - Registered MCP server: fetch
2026-02-18 17:31:23,908 - chatbot_ai_system.server.main - INFO - Registered MCP server: puppeteer
2026-02-18 17:31:23,908 - chatbot_ai_system.server.main - INFO - Registered MCP server: git
2026-02-18 17:31:23,908 - chatbot_ai_system.server.main - INFO - Registered MCP server: docker
2026-02-18 17:31:23,908 - chatbot_ai_system.server.main - INFO - Registered MCP server: sequential-thinking
2026-02-18 17:31:23,908 - chatbot_ai_system.server.main - INFO - Registered MCP server: sqlite
2026-02-18 17:31:23,908 - chatbot_ai_system.tools.mcp_client - INFO - Connecting to MCP server filesystem...
Secure MCP Filesystem Server running on stdio
2026-02-18 17:31:25,075 - chatbot_ai_system.tools.mcp_client - INFO - Connected to MCP server filesystem
2026-02-18 17:31:25,075 - chatbot_ai_system.tools.mcp_client - INFO - Listing tools for filesystem...
2026-02-18 17:31:25,077 - chatbot_ai_system.tools.mcp_client - INFO - Using cached tools for filesystem
2026-02-18 17:31:25,077 - chatbot_ai_system.tools.mcp_client - INFO - Connecting to MCP server time...
Client does not support MCP Roots, using allowed directories set from server args: [ '/Users/mk/Documents/chatbot-ai-systems-production' ]
MCP Time Server running on stdio
2026-02-18 17:31:26,485 - chatbot_ai_system.tools.mcp_client - INFO - Connected to MCP server time
2026-02-18 17:31:26,485 - chatbot_ai_system.tools.mcp_client - INFO - Listing tools for time...
2026-02-18 17:31:26,488 - chatbot_ai_system.tools.mcp_client - INFO - Using cached tools for time
2026-02-18 17:31:26,488 - chatbot_ai_system.tools.mcp_client - INFO - Connecting to MCP server memory...
Knowledge Graph MCP Server running on stdio
2026-02-18 17:31:27,501 - chatbot_ai_system.tools.mcp_client - INFO - Connected to MCP server memory
2026-02-18 17:31:27,501 - chatbot_ai_system.tools.mcp_client - INFO - Listing tools for memory...
2026-02-18 17:31:27,503 - chatbot_ai_system.tools.mcp_client - INFO - Using cached tools for memory
2026-02-18 17:31:27,503 - chatbot_ai_system.tools.mcp_client - INFO - Connecting to MCP server fetch...
2026-02-18 17:31:30,245 - chatbot_ai_system.tools.mcp_client - INFO - Connected to MCP server fetch
2026-02-18 17:31:30,245 - chatbot_ai_system.tools.mcp_client - INFO - Listing tools for fetch...
2026-02-18 17:31:30,246 - chatbot_ai_system.tools.mcp_client - INFO - Using cached tools for fetch
2026-02-18 17:31:30,246 - chatbot_ai_system.tools.mcp_client - INFO - Connecting to MCP server puppeteer...
2026-02-18 17:31:31,380 - chatbot_ai_system.tools.mcp_client - INFO - Connected to MCP server puppeteer
2026-02-18 17:31:31,380 - chatbot_ai_system.tools.mcp_client - INFO - Listing tools for puppeteer...
2026-02-18 17:31:31,382 - chatbot_ai_system.tools.mcp_client - INFO - Using cached tools for puppeteer
2026-02-18 17:31:31,382 - chatbot_ai_system.tools.mcp_client - INFO - Connecting to MCP server git...
2026-02-18 17:31:33,102 - chatbot_ai_system.tools.mcp_client - INFO - Connected to MCP server git
2026-02-18 17:31:33,103 - chatbot_ai_system.tools.mcp_client - INFO - Listing tools for git...
2026-02-18 17:31:33,104 - chatbot_ai_system.tools.mcp_client - INFO - Using cached tools for git
2026-02-18 17:31:33,104 - chatbot_ai_system.tools.mcp_client - INFO - Connecting to MCP server docker...
npm notice Access token expired or revoked. Please try logging in again.
npm notice Access token expired or revoked. Please try logging in again.
npm error code E404
npm error 404 Not Found - GET https://registry.npmjs.org/@modelcontextprotocol%2fserver-docker - Not found
npm error 404
npm error 404  '@modelcontextprotocol/server-docker@*' is not in this registry.
npm error 404
npm error 404 Note that you can also install from a
npm error 404 tarball, folder, http url, or git url.
npm error A complete log of this run can be found in: /Users/mk/.npm/_logs/2026-02-18T08_31_33_195Z-debug-0.log
2026-02-18 17:31:34,105 - chatbot_ai_system.tools.mcp_client - ERROR - Failed to connect to MCP server docker: Connection closed
2026-02-18 17:31:34,105 - chatbot_ai_system.tools.mcp_client - INFO - Connecting to MCP server sequential-thinking...
Sequential Thinking MCP Server running on stdio
2026-02-18 17:31:35,432 - chatbot_ai_system.tools.mcp_client - INFO - Connected to MCP server sequential-thinking
2026-02-18 17:31:35,432 - chatbot_ai_system.tools.mcp_client - INFO - Listing tools for sequential-thinking...
2026-02-18 17:31:35,433 - chatbot_ai_system.tools.mcp_client - INFO - Using cached tools for sequential-thinking
2026-02-18 17:31:35,434 - chatbot_ai_system.tools.mcp_client - INFO - Connecting to MCP server sqlite...
SQLite MCP Server running on stdio
2026-02-18 17:31:36,473 - chatbot_ai_system.tools.mcp_client - INFO - Connected to MCP server sqlite
2026-02-18 17:31:36,473 - chatbot_ai_system.tools.mcp_client - INFO - Listing tools for sqlite...
2026-02-18 17:31:36,475 - chatbot_ai_system.tools.mcp_client - INFO - Using cached tools for sqlite
2026-02-18 17:31:36,475 - chatbot_ai_system.server.main - INFO - MCP servers registered and tools refreshed
INFO:     Application startup complete.
ERROR:    [Errno 48] error while attempting to bind on address ('0.0.0.0', 8000): address already in use
INFO:     Waiting for application shutdown.
2026-02-18 17:31:36,475 - chatbot_ai_system.server.main - INFO - Shutting down Chatbot AI System
2026-02-18 17:31:36,475 - chatbot_ai_system.database.redis - INFO - Redis connection closed.
INFO:     Application shutdown complete.
Puppeteer MCP Server closed
2026-02-18 17:31:36,507 - asyncio - ERROR - an error occurred during closing of asynchronous generator <async_generator object stdio_client at 0x1101ecc10>
asyncgen: <async_generator object stdio_client at 0x1101ecc10>
  + Exception Group Traceback (most recent call last):
  |   File "/Users/mk/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | BaseExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/mk/miniconda3/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 189, in stdio_client
    |     yield read_stream, write_stream
    | GeneratorExit
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mk/miniconda3/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 182, in stdio_client
    async with (
  File "/Users/mk/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 778, in __aexit__
    if self.cancel_scope.__exit__(type(exc), exc, exc.__traceback__):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mk/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 457, in __exit__
    raise RuntimeError(
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2026-02-18 17:31:36,509 - asyncio - ERROR - an error occurred during closing of asynchronous generator <async_generator object stdio_client at 0x1101ec820>
asyncgen: <async_generator object stdio_client at 0x1101ec820>
  + Exception Group Traceback (most recent call last):
  |   File "/Users/mk/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | BaseExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/mk/miniconda3/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 189, in stdio_client
    |     yield read_stream, write_stream
    | GeneratorExit
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mk/miniconda3/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 182, in stdio_client
    async with (
  File "/Users/mk/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 778, in __aexit__
    if self.cancel_scope.__exit__(type(exc), exc, exc.__traceback__):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mk/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 457, in __exit__
    raise RuntimeError(
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2026-02-18 17:31:36,510 - asyncio - ERROR - an error occurred during closing of asynchronous generator <async_generator object stdio_client at 0x1101ede70>
asyncgen: <async_generator object stdio_client at 0x1101ede70>
  + Exception Group Traceback (most recent call last):
  |   File "/Users/mk/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | BaseExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/mk/miniconda3/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 189, in stdio_client
    |     yield read_stream, write_stream
    | GeneratorExit
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mk/miniconda3/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 182, in stdio_client
    async with (
  File "/Users/mk/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 778, in __aexit__
    if self.cancel_scope.__exit__(type(exc), exc, exc.__traceback__):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mk/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 457, in __exit__
    raise RuntimeError(
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2026-02-18 17:31:36,510 - asyncio - ERROR - an error occurred during closing of asynchronous generator <async_generator object stdio_client at 0x1101ed690>
asyncgen: <async_generator object stdio_client at 0x1101ed690>
  + Exception Group Traceback (most recent call last):
  |   File "/Users/mk/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | BaseExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/mk/miniconda3/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 189, in stdio_client
    |     yield read_stream, write_stream
    | GeneratorExit
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mk/miniconda3/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 182, in stdio_client
    async with (
  File "/Users/mk/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 778, in __aexit__
    if self.cancel_scope.__exit__(type(exc), exc, exc.__traceback__):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mk/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 457, in __exit__
    raise RuntimeError(
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2026-02-18 17:31:36,511 - asyncio - ERROR - an error occurred during closing of asynchronous generator <async_generator object stdio_client at 0x1101eceb0>
asyncgen: <async_generator object stdio_client at 0x1101eceb0>
  + Exception Group Traceback (most recent call last):
  |   File "/Users/mk/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | BaseExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/mk/miniconda3/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 189, in stdio_client
    |     yield read_stream, write_stream
    | GeneratorExit
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mk/miniconda3/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 182, in stdio_client
    async with (
  File "/Users/mk/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 778, in __aexit__
    if self.cancel_scope.__exit__(type(exc), exc, exc.__traceback__):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mk/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 457, in __exit__
    raise RuntimeError(
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2026-02-18 17:31:36,511 - asyncio - ERROR - an error occurred during closing of asynchronous generator <async_generator object stdio_client at 0x1101ec6d0>
asyncgen: <async_generator object stdio_client at 0x1101ec6d0>
  + Exception Group Traceback (most recent call last):
  |   File "/Users/mk/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | BaseExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/mk/miniconda3/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 189, in stdio_client
    |     yield read_stream, write_stream
    | GeneratorExit
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mk/miniconda3/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 182, in stdio_client
    async with (
  File "/Users/mk/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 778, in __aexit__
    if self.cancel_scope.__exit__(type(exc), exc, exc.__traceback__):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mk/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 457, in __exit__
    raise RuntimeError(
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2026-02-18 17:31:36,512 - asyncio - ERROR - an error occurred during closing of asynchronous generator <async_generator object stdio_client at 0x1101ecd60>
asyncgen: <async_generator object stdio_client at 0x1101ecd60>
  + Exception Group Traceback (most recent call last):
  |   File "/Users/mk/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | BaseExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/mk/miniconda3/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 189, in stdio_client
    |     yield read_stream, write_stream
    | GeneratorExit
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mk/miniconda3/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 182, in stdio_client
    async with (
  File "/Users/mk/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 778, in __aexit__
    if self.cancel_scope.__exit__(type(exc), exc, exc.__traceback__):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mk/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 457, in __exit__
    raise RuntimeError(
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2026-02-18 17:31:36,512 - asyncio - ERROR - an error occurred during closing of asynchronous generator <async_generator object stdio_client at 0x1101ed7e0>
asyncgen: <async_generator object stdio_client at 0x1101ed7e0>
  + Exception Group Traceback (most recent call last):
  |   File "/Users/mk/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | BaseExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/mk/miniconda3/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 189, in stdio_client
    |     yield read_stream, write_stream
    | GeneratorExit
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/mk/miniconda3/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 182, in stdio_client
    async with (
  File "/Users/mk/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 778, in __aexit__
    if self.cancel_scope.__exit__(type(exc), exc, exc.__traceback__):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mk/miniconda3/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 457, in __exit__
    raise RuntimeError(
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 2026-02-18 17:31:22,390 - httpx - INFO - HTTP Request: GET http://localhost:11434/api/tags "HTTP/1.1 200 OK"
INFO:     127.0.0.1:60799 - "GET /health HTTP/1.1" 200 OK
2026-02-18 17:31:22,444 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:31:22,444 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:31:22,444 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:31:22,444 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:31:22,444 INFO sqlalchemy.engine.Engine [cached since 199.3s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:31:22,444 - sqlalchemy.engine.Engine - INFO - [cached since 199.3s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:31:22,449 INFO sqlalchemy.engine.Engine INSERT INTO conversations (id, user_id, title, is_archived, created_at, updated_at, summary, last_summarized_seq_id) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::BOOLEAN, $5::TIMESTAMP WITHOUT TIME ZONE, $6::TIMESTAMP WITHOUT TIME ZONE, $7::VARCHAR, $8::INTEGER)
2026-02-18 17:31:22,449 - sqlalchemy.engine.Engine - INFO - INSERT INTO conversations (id, user_id, title, is_archived, created_at, updated_at, summary, last_summarized_seq_id) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::BOOLEAN, $5::TIMESTAMP WITHOUT TIME ZONE, $6::TIMESTAMP WITHOUT TIME ZONE, $7::VARCHAR, $8::INTEGER)
2026-02-18 17:31:22,449 INFO sqlalchemy.engine.Engine [cached since 199.3s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), UUID('00000000-0000-0000-0000-000000000000'), None, False, datetime.datetime(2026, 2, 18, 8, 31, 22, 449471), datetime.datetime(2026, 2, 18, 8, 31, 22, 449478), None, 0)
2026-02-18 17:31:22,449 - sqlalchemy.engine.Engine - INFO - [cached since 199.3s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), UUID('00000000-0000-0000-0000-000000000000'), None, False, datetime.datetime(2026, 2, 18, 8, 31, 22, 449471), datetime.datetime(2026, 2, 18, 8, 31, 22, 449478), None, 0)
2026-02-18 17:31:22,452 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:31:22,452 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:31:22,452 INFO sqlalchemy.engine.Engine [cached since 199.3s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:31:22,452 - sqlalchemy.engine.Engine - INFO - [cached since 199.3s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:31:22,453 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:31:22,453 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:31:22,453 INFO sqlalchemy.engine.Engine [cached since 199.3s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:31:22,453 - sqlalchemy.engine.Engine - INFO - [cached since 199.3s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:31:22,464 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:31:22,464 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:31:22,464 INFO sqlalchemy.engine.Engine [cached since 199.3s ago] (UUID('e6149f60-d321-4f01-bedf-e83333394fd1'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'Hi, how are you?', 'null', None, 'null', None, None, None, None, None, None, 1, datetime.datetime(2026, 2, 18, 8, 31, 22, 464199))
2026-02-18 17:31:22,464 - sqlalchemy.engine.Engine - INFO - [cached since 199.3s ago] (UUID('e6149f60-d321-4f01-bedf-e83333394fd1'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'Hi, how are you?', 'null', None, 'null', None, None, None, None, None, None, 1, datetime.datetime(2026, 2, 18, 8, 31, 22, 464199))
2026-02-18 17:31:22,466 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:31:22,466 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:31:22,466 INFO sqlalchemy.engine.Engine [cached since 199.3s ago] (UUID('e6149f60-d321-4f01-bedf-e83333394fd1'),)
2026-02-18 17:31:22,466 - sqlalchemy.engine.Engine - INFO - [cached since 199.3s ago] (UUID('e6149f60-d321-4f01-bedf-e83333394fd1'),)
2026-02-18 17:31:22,468 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:31:22,468 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:31:22,469 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:31:22,469 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:31:22,469 INFO sqlalchemy.engine.Engine SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:31:22,469 - sqlalchemy.engine.Engine - INFO - SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:31:22,469 INFO sqlalchemy.engine.Engine [cached since 199.3s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:31:22,469 - sqlalchemy.engine.Engine - INFO - [cached since 199.3s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:31:22,471 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:31:22,471 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:31:22,471 INFO sqlalchemy.engine.Engine [cached since 199.3s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:31:22,471 - sqlalchemy.engine.Engine - INFO - [cached since 199.3s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:31:41,435 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:32:00,231 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:32:00,231 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:32:00,231 INFO sqlalchemy.engine.Engine [cached since 237.1s ago] (UUID('7d268651-5baa-480d-9238-caeb7f9b18c6'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.ASSISTANT: 'assistant'>, '{"name": "README", "parameters": {"v": "The chatbot uses the following licenses: \\n\\nMIT License\\nCopyright (c) [Year] [Author]\\n\\nPermission is ... (676 characters truncated) ... N ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\\nSOFTWARE."}}', 'null', None, '{"model": "llama3.2", "type": "synthesis"}', 3948, 207, 'llama3.2', None, None, None, 19, datetime.datetime(2026, 2, 18, 8, 32, 0, 230976))
2026-02-18 17:32:00,231 - sqlalchemy.engine.Engine - INFO - [cached since 237.1s ago] (UUID('7d268651-5baa-480d-9238-caeb7f9b18c6'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.ASSISTANT: 'assistant'>, '{"name": "README", "parameters": {"v": "The chatbot uses the following licenses: \\n\\nMIT License\\nCopyright (c) [Year] [Author]\\n\\nPermission is ... (676 characters truncated) ... N ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\\nSOFTWARE."}}', 'null', None, '{"model": "llama3.2", "type": "synthesis"}', 3948, 207, 'llama3.2', None, None, None, 19, datetime.datetime(2026, 2, 18, 8, 32, 0, 230976))
2026-02-18 17:32:00,233 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:32:00,233 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:32:00,233 INFO sqlalchemy.engine.Engine [cached since 237s ago] (UUID('7d268651-5baa-480d-9238-caeb7f9b18c6'),)
2026-02-18 17:32:00,233 - sqlalchemy.engine.Engine - INFO - [cached since 237s ago] (UUID('7d268651-5baa-480d-9238-caeb7f9b18c6'),)
2026-02-18 17:32:00,234 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:32:00,234 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:60782 - "POST /api/chat HTTP/1.1" 200 OK
2026-02-18 17:32:00,262 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:32:00,262 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:32:00,262 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:32:00,262 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:32:00,262 INFO sqlalchemy.engine.Engine [cached since 237.1s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:32:00,262 - sqlalchemy.engine.Engine - INFO - [cached since 237.1s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:32:00,264 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:32:00,264 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:32:00,265 INFO sqlalchemy.engine.Engine [cached since 237.1s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:32:00,265 - sqlalchemy.engine.Engine - INFO - [cached since 237.1s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:32:00,266 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:32:00,266 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:32:00,266 INFO sqlalchemy.engine.Engine [cached since 237.1s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), 50)
2026-02-18 17:32:00,266 - sqlalchemy.engine.Engine - INFO - [cached since 237.1s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), 50)
2026-02-18 17:32:00,268 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:32:00,268 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:32:00,269 INFO sqlalchemy.engine.Engine [cached since 237.1s ago] (UUID('5454a818-ac05-4a36-896f-dd0afd8ea42b'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.USER: 'user'>, 'Show me the first 5 lines of pyproject.toml.', 'null', None, 'null', None, None, None, None, None, None, 20, datetime.datetime(2026, 2, 18, 8, 32, 0, 268930))
2026-02-18 17:32:00,269 - sqlalchemy.engine.Engine - INFO - [cached since 237.1s ago] (UUID('5454a818-ac05-4a36-896f-dd0afd8ea42b'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.USER: 'user'>, 'Show me the first 5 lines of pyproject.toml.', 'null', None, 'null', None, None, None, None, None, None, 20, datetime.datetime(2026, 2, 18, 8, 32, 0, 268930))
2026-02-18 17:32:00,270 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:32:00,270 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:32:00,270 INFO sqlalchemy.engine.Engine [cached since 237.1s ago] (UUID('5454a818-ac05-4a36-896f-dd0afd8ea42b'),)
2026-02-18 17:32:00,270 - sqlalchemy.engine.Engine - INFO - [cached since 237.1s ago] (UUID('5454a818-ac05-4a36-896f-dd0afd8ea42b'),)
2026-02-18 17:32:00,270 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:32:00,270 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:32:00,272 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:32:00,272 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:32:00,272 INFO sqlalchemy.engine.Engine SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:32:00,272 - sqlalchemy.engine.Engine - INFO - SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:32:00,272 INFO sqlalchemy.engine.Engine [cached since 237.1s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:32:00,272 - sqlalchemy.engine.Engine - INFO - [cached since 237.1s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:32:00,273 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:32:00,273 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:32:00,273 INFO sqlalchemy.engine.Engine [cached since 237.1s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:32:00,273 - sqlalchemy.engine.Engine - INFO - [cached since 237.1s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:32:00,274 - chatbot_ai_system.orchestrator - INFO - Using cached context for conversation 36c8c289-9d0b-4ed2-88d9-e45d46389920
2026-02-18 17:32:00,821 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
2026-02-18 17:32:00,859 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:32:00,859 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:32:00,860 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:32:00,860 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:32:00,860 INFO sqlalchemy.engine.Engine [cached since 230s ago] (UUID('7d268651-5baa-480d-9238-caeb7f9b18c6'),)
2026-02-18 17:32:00,860 - sqlalchemy.engine.Engine - INFO - [cached since 230s ago] (UUID('7d268651-5baa-480d-9238-caeb7f9b18c6'),)
2026-02-18 17:32:00,876 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:32:00,876 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:32:00,876 INFO sqlalchemy.engine.Engine [cached since 230s ago] ('[0.013273509219288826,0.48353660106658936,-3.1518890857696533,-1.073704719543457,0.8332008123397827,-0.605900228023529,-0.991540253162384,0.751061141 ... (14883 characters truncated) ... 874639511,-0.08021246641874313,0.531125009059906,0.8446035981178284,-0.9828515648841858,-0.29467663168907166,0.05529772490262985,-0.0777277946472168]', UUID('7d268651-5baa-480d-9238-caeb7f9b18c6'))
2026-02-18 17:32:00,876 - sqlalchemy.engine.Engine - INFO - [cached since 230s ago] ('[0.013273509219288826,0.48353660106658936,-3.1518890857696533,-1.073704719543457,0.8332008123397827,-0.605900228023529,-0.991540253162384,0.751061141 ... (14883 characters truncated) ... 874639511,-0.08021246641874313,0.531125009059906,0.8446035981178284,-0.9828515648841858,-0.29467663168907166,0.05529772490262985,-0.0777277946472168]', UUID('7d268651-5baa-480d-9238-caeb7f9b18c6'))
2026-02-18 17:32:00,878 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message 7d268651-5baa-480d-9238-caeb7f9b18c6
2026-02-18 17:32:03,255 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:32:03,256 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: INTENT: GENERAL
COMPLEXITY: SIMPLE...
2026-02-18 17:32:03,256 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 classifier: intent=GENERAL, complexity=SIMPLE (raw: 'INTENT: GENERAL\nCOMPLEXITY: SIMPLE')
2026-02-18 17:32:03,256 - chatbot_ai_system.orchestrator - INFO - Phase 4: intent='GENERAL', complexity='SIMPLE'
2026-02-18 17:32:03,256 - chatbot_ai_system.orchestrator - INFO - Phase 5: Selected 0 tools: []
2026-02-18 17:32:03,258 - chatbot_ai_system.services.embedding - INFO - Using cached embedding
2026-02-18 17:32:03,259 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages JOIN conversations ON conversations.id = messages.conversation_id 
WHERE conversations.user_id = $1::UUID AND (messages.embedding <=> $2) < $3::FLOAT ORDER BY messages.embedding <=> $4 
 LIMIT $5::INTEGER
2026-02-18 17:32:03,259 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages JOIN conversations ON conversations.id = messages.conversation_id 
WHERE conversations.user_id = $1::UUID AND (messages.embedding <=> $2) < $3::FLOAT ORDER BY messages.embedding <=> $4 
 LIMIT $5::INTEGER
2026-02-18 17:32:03,259 INFO sqlalchemy.engine.Engine [cached since 237.7s ago] (UUID('00000000-0000-0000-0000-000000000000'), '[-1.1201918125152588,-1.4978859424591064,-3.3880226612091064,0.08689877390861511,0.96072918176651,0.20269298553466797,0.02673168107867241,-0.14810368 ... (14805 characters truncated) ... 9424667,-0.7787066698074341,0.2841734290122986,0.42489269375801086,-0.3556758165359497,-0.15436165034770966,-0.9877747893333435,-0.29891857504844666]', 0.30000000000000004, '[-1.1201918125152588,-1.4978859424591064,-3.3880226612091064,0.08689877390861511,0.96072918176651,0.20269298553466797,0.02673168107867241,-0.14810368 ... (14805 characters truncated) ... 9424667,-0.7787066698074341,0.2841734290122986,0.42489269375801086,-0.3556758165359497,-0.15436165034770966,-0.9877747893333435,-0.29891857504844666]', 3)
2026-02-18 17:32:03,259 - sqlalchemy.engine.Engine - INFO - [cached since 237.7s ago] (UUID('00000000-0000-0000-0000-000000000000'), '[-1.1201918125152588,-1.4978859424591064,-3.3880226612091064,0.08689877390861511,0.96072918176651,0.20269298553466797,0.02673168107867241,-0.14810368 ... (14805 characters truncated) ... 9424667,-0.7787066698074341,0.2841734290122986,0.42489269375801086,-0.3556758165359497,-0.15436165034770966,-0.9877747893333435,-0.29891857504844666]', 0.30000000000000004, '[-1.1201918125152588,-1.4978859424591064,-3.3880226612091064,0.08689877390861511,0.96072918176651,0.20269298553466797,0.02673168107867241,-0.14810368 ... (14805 characters truncated) ... 9424667,-0.7787066698074341,0.2841734290122986,0.42489269375801086,-0.3556758165359497,-0.15436165034770966,-0.9877747893333435,-0.29891857504844666]', 3)
2026-02-18 17:32:04,517 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:32:04,517 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: INTENT: FILESYSTEM
COMPLEXITY: SIMPLE...
2026-02-18 17:32:04,517 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 classifier: intent=FILESYSTEM, complexity=SIMPLE (raw: 'INTENT: FILESYSTEM\nCOMPLEXITY: SIMPLE')
2026-02-18 17:32:04,517 - chatbot_ai_system.orchestrator - INFO - Phase 4: intent='FILESYSTEM', complexity='SIMPLE'
2026-02-18 17:32:04,518 - chatbot_ai_system.orchestrator - INFO - Phase 5: Selected 4 tools: ['read_file', 'read_text_file', 'read_multiple_files', 'read_graph']
2026-02-18 17:32:05,063 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:32:08,764 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:32:08,764 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:32:08,764 INFO sqlalchemy.engine.Engine [cached since 245.6s ago] (UUID('ddaf335d-913d-4816-b907-5cd6dd489574'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, "Hello! I'm just a language model, so I don't have emotions or feelings like humans do, but I'm functioning properly and ready to assist you with any questions or tasks you may have. How can I help you today?", 'null', None, '{"model": "llama3.2"}', 56, 48, 'llama3.2', None, None, None, 2, datetime.datetime(2026, 2, 18, 8, 32, 8, 764409))
2026-02-18 17:32:08,764 - sqlalchemy.engine.Engine - INFO - [cached since 245.6s ago] (UUID('ddaf335d-913d-4816-b907-5cd6dd489574'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, "Hello! I'm just a language model, so I don't have emotions or feelings like humans do, but I'm functioning properly and ready to assist you with any questions or tasks you may have. How can I help you today?", 'null', None, '{"model": "llama3.2"}', 56, 48, 'llama3.2', None, None, None, 2, datetime.datetime(2026, 2, 18, 8, 32, 8, 764409))
2026-02-18 17:32:08,766 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:32:08,766 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:32:08,766 INFO sqlalchemy.engine.Engine [cached since 245.6s ago] (UUID('ddaf335d-913d-4816-b907-5cd6dd489574'),)
2026-02-18 17:32:08,766 - sqlalchemy.engine.Engine - INFO - [cached since 245.6s ago] (UUID('ddaf335d-913d-4816-b907-5cd6dd489574'),)
2026-02-18 17:32:08,768 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:32:08,768 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:32:08,768 - chatbot_ai_system.orchestrator - ERROR - Failed to embed user message at seq 1: This session is in 'prepared' state; no further SQL can be emitted within this transaction.
INFO:     127.0.0.1:60802 - "POST /api/chat HTTP/1.1" 200 OK
2026-02-18 17:32:08,822 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:32:08,822 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:32:08,822 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:32:08,822 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:32:08,822 INFO sqlalchemy.engine.Engine [cached since 245.7s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:32:08,822 - sqlalchemy.engine.Engine - INFO - [cached since 245.7s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:32:08,824 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:32:08,824 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:32:08,824 INFO sqlalchemy.engine.Engine [cached since 245.6s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:32:08,824 - sqlalchemy.engine.Engine - INFO - [cached since 245.6s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:32:08,825 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:32:08,825 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:32:08,825 INFO sqlalchemy.engine.Engine [cached since 245.7s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:32:08,825 - sqlalchemy.engine.Engine - INFO - [cached since 245.7s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:32:08,826 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:32:08,826 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:32:08,826 INFO sqlalchemy.engine.Engine [cached since 245.6s ago] (UUID('61b0a85d-c324-4586-9afc-60eccea89e83'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'What is the capital of France?', 'null', None, 'null', None, None, None, None, None, None, 3, datetime.datetime(2026, 2, 18, 8, 32, 8, 826116))
2026-02-18 17:32:08,826 - sqlalchemy.engine.Engine - INFO - [cached since 245.6s ago] (UUID('61b0a85d-c324-4586-9afc-60eccea89e83'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'What is the capital of France?', 'null', None, 'null', None, None, None, None, None, None, 3, datetime.datetime(2026, 2, 18, 8, 32, 8, 826116))
2026-02-18 17:32:08,828 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:32:08,828 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:32:08,828 INFO sqlalchemy.engine.Engine [cached since 245.6s ago] (UUID('61b0a85d-c324-4586-9afc-60eccea89e83'),)
2026-02-18 17:32:08,828 - sqlalchemy.engine.Engine - INFO - [cached since 245.6s ago] (UUID('61b0a85d-c324-4586-9afc-60eccea89e83'),)
2026-02-18 17:32:08,829 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:32:08,829 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:32:08,830 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:32:08,830 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:32:08,830 INFO sqlalchemy.engine.Engine SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:32:08,830 - sqlalchemy.engine.Engine - INFO - SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:32:08,830 INFO sqlalchemy.engine.Engine [cached since 245.6s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:32:08,830 - sqlalchemy.engine.Engine - INFO - [cached since 245.6s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:32:08,831 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:32:08,831 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:32:08,832 INFO sqlalchemy.engine.Engine [cached since 245.6s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:32:08,832 - sqlalchemy.engine.Engine - INFO - [cached since 245.6s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:32:08,832 - chatbot_ai_system.orchestrator - INFO - Using cached context for conversation 4933dbb2-767b-403b-a072-aab0873d7cd4
2026-02-18 17:32:09,399 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
2026-02-18 17:32:09,446 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:32:09,446 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:32:09,446 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:32:09,446 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:32:09,446 INFO sqlalchemy.engine.Engine [cached since 238.6s ago] (UUID('ddaf335d-913d-4816-b907-5cd6dd489574'),)
2026-02-18 17:32:09,446 - sqlalchemy.engine.Engine - INFO - [cached since 238.6s ago] (UUID('ddaf335d-913d-4816-b907-5cd6dd489574'),)
2026-02-18 17:32:09,460 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:32:09,460 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:32:09,460 INFO sqlalchemy.engine.Engine [cached since 238.6s ago] ('[-0.6887271404266357,-0.02679586596786976,-2.5677881240844727,-0.8007916212081909,1.378727912902832,0.5667914152145386,0.35082465410232544,0.00473661 ... (14887 characters truncated) ... 67945766449,-0.262643963098526,0.8862833380699158,0.387546181678772,0.14094197750091553,-0.07148469239473343,0.17898349463939667,-0.3941783607006073]', UUID('ddaf335d-913d-4816-b907-5cd6dd489574'))
2026-02-18 17:32:09,460 - sqlalchemy.engine.Engine - INFO - [cached since 238.6s ago] ('[-0.6887271404266357,-0.02679586596786976,-2.5677881240844727,-0.8007916212081909,1.378727912902832,0.5667914152145386,0.35082465410232544,0.00473661 ... (14887 characters truncated) ... 67945766449,-0.262643963098526,0.8862833380699158,0.387546181678772,0.14094197750091553,-0.07148469239473343,0.17898349463939667,-0.3941783607006073]', UUID('ddaf335d-913d-4816-b907-5cd6dd489574'))
2026-02-18 17:32:09,462 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message ddaf335d-913d-4816-b907-5cd6dd489574
2026-02-18 17:32:09,782 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
2026-02-18 17:32:09,786 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:32:09,786 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:32:09,786 INFO sqlalchemy.engine.Engine [cached since 238.9s ago] (UUID('ddaf335d-913d-4816-b907-5cd6dd489574'),)
2026-02-18 17:32:09,786 - sqlalchemy.engine.Engine - INFO - [cached since 238.9s ago] (UUID('ddaf335d-913d-4816-b907-5cd6dd489574'),)
2026-02-18 17:32:09,789 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:32:09,789 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:32:09,789 INFO sqlalchemy.engine.Engine [cached since 238.9s ago] ('[-0.6887271404266357,-0.02679586596786976,-2.5677881240844727,-0.8007916212081909,1.378727912902832,0.5667914152145386,0.35082465410232544,0.00473661 ... (14887 characters truncated) ... 67945766449,-0.262643963098526,0.8862833380699158,0.387546181678772,0.14094197750091553,-0.07148469239473343,0.17898349463939667,-0.3941783607006073]', UUID('ddaf335d-913d-4816-b907-5cd6dd489574'))
2026-02-18 17:32:09,789 - sqlalchemy.engine.Engine - INFO - [cached since 238.9s ago] ('[-0.6887271404266357,-0.02679586596786976,-2.5677881240844727,-0.8007916212081909,1.378727912902832,0.5667914152145386,0.35082465410232544,0.00473661 ... (14887 characters truncated) ... 67945766449,-0.262643963098526,0.8862833380699158,0.387546181678772,0.14094197750091553,-0.07148469239473343,0.17898349463939667,-0.3941783607006073]', UUID('ddaf335d-913d-4816-b907-5cd6dd489574'))
2026-02-18 17:32:09,791 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message ddaf335d-913d-4816-b907-5cd6dd489574
2026-02-18 17:32:35,202 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:32:35,290 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:32:35,290 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:32:35,290 INFO sqlalchemy.engine.Engine [cached since 272.1s ago] (UUID('8223ab8c-dcba-4f46-b6b3-2e67a7c0d00f'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.ASSISTANT: 'assistant'>, '', '[{"id": "call_ywip9vzv", "function": {"name": "read_text_file", "arguments": {"head": "5", "path": "pyproject.toml"}}, "type": "function"}]', None, '{"model": "llama3.2"}', 4077, 27, 'llama3.2', None, None, None, 21, datetime.datetime(2026, 2, 18, 8, 32, 35, 290430))
2026-02-18 17:32:35,290 - sqlalchemy.engine.Engine - INFO - [cached since 272.1s ago] (UUID('8223ab8c-dcba-4f46-b6b3-2e67a7c0d00f'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.ASSISTANT: 'assistant'>, '', '[{"id": "call_ywip9vzv", "function": {"name": "read_text_file", "arguments": {"head": "5", "path": "pyproject.toml"}}, "type": "function"}]', None, '{"model": "llama3.2"}', 4077, 27, 'llama3.2', None, None, None, 21, datetime.datetime(2026, 2, 18, 8, 32, 35, 290430))
2026-02-18 17:32:35,294 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:32:35,294 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:32:35,294 INFO sqlalchemy.engine.Engine [cached since 272.1s ago] (UUID('8223ab8c-dcba-4f46-b6b3-2e67a7c0d00f'),)
2026-02-18 17:32:35,294 - sqlalchemy.engine.Engine - INFO - [cached since 272.1s ago] (UUID('8223ab8c-dcba-4f46-b6b3-2e67a7c0d00f'),)
2026-02-18 17:32:35,295 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID AND messages.sequence_number = $2::INTEGER AND messages.role = $3::VARCHAR
2026-02-18 17:32:35,295 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID AND messages.sequence_number = $2::INTEGER AND messages.role = $3::VARCHAR
2026-02-18 17:32:35,295 INFO sqlalchemy.engine.Engine [cached since 135.9s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), 20, <MessageRole.USER: 'user'>)
2026-02-18 17:32:35,295 - sqlalchemy.engine.Engine - INFO - [cached since 135.9s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), 20, <MessageRole.USER: 'user'>)
2026-02-18 17:32:35,324 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:32:35,324 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:32:35,324 INFO sqlalchemy.engine.Engine [cached since 272.1s ago] (UUID('027f10cc-be32-490c-b484-854a6ffa89f2'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.TOOL: 'tool'>, 'MCP error -32602: Input validation error: Invalid arguments for tool read_text_file: [\n  {\n    "expected": "number",\n    "code": "invalid_type",\n    "path": [\n      "head"\n    ],\n    "message": "Invalid input: expected number, received string"\n  }\n]', 'null', 'call_ywip9vzv', 'null', None, None, None, None, None, None, 22, datetime.datetime(2026, 2, 18, 8, 32, 35, 324050))
2026-02-18 17:32:35,324 - sqlalchemy.engine.Engine - INFO - [cached since 272.1s ago] (UUID('027f10cc-be32-490c-b484-854a6ffa89f2'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.TOOL: 'tool'>, 'MCP error -32602: Input validation error: Invalid arguments for tool read_text_file: [\n  {\n    "expected": "number",\n    "code": "invalid_type",\n    "path": [\n      "head"\n    ],\n    "message": "Invalid input: expected number, received string"\n  }\n]', 'null', 'call_ywip9vzv', 'null', None, None, None, None, None, None, 22, datetime.datetime(2026, 2, 18, 8, 32, 35, 324050))
2026-02-18 17:32:35,325 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:32:35,325 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:32:35,325 INFO sqlalchemy.engine.Engine [cached since 272.1s ago] (UUID('027f10cc-be32-490c-b484-854a6ffa89f2'),)
2026-02-18 17:32:35,325 - sqlalchemy.engine.Engine - INFO - [cached since 272.1s ago] (UUID('027f10cc-be32-490c-b484-854a6ffa89f2'),)
2026-02-18 17:32:35,604 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
2026-02-18 17:32:35,607 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:32:35,607 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:32:35,607 INFO sqlalchemy.engine.Engine [cached since 264.8s ago] (UUID('5454a818-ac05-4a36-896f-dd0afd8ea42b'),)
2026-02-18 17:32:35,607 - sqlalchemy.engine.Engine - INFO - [cached since 264.8s ago] (UUID('5454a818-ac05-4a36-896f-dd0afd8ea42b'),)
2026-02-18 17:32:35,609 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:32:35,609 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:32:35,610 INFO sqlalchemy.engine.Engine [cached since 264.7s ago] ('[0.21798507869243622,-0.042015597224235535,-3.039393663406372,-0.42362871766090393,1.1096943616867065,-0.4731813967227936,-0.21958738565444946,-0.797 ... (14890 characters truncated) ... 49017334,-0.44625091552734375,0.77972412109375,-0.42225369811058044,-0.8867242932319641,-0.07792944461107254,-0.6085423231124878,-1.0065957307815552]', UUID('5454a818-ac05-4a36-896f-dd0afd8ea42b'))
2026-02-18 17:32:35,610 - sqlalchemy.engine.Engine - INFO - [cached since 264.7s ago] ('[0.21798507869243622,-0.042015597224235535,-3.039393663406372,-0.42362871766090393,1.1096943616867065,-0.4731813967227936,-0.21958738565444946,-0.797 ... (14890 characters truncated) ... 49017334,-0.44625091552734375,0.77972412109375,-0.42225369811058044,-0.8867242932319641,-0.07792944461107254,-0.6085423231124878,-1.0065957307815552]', UUID('5454a818-ac05-4a36-896f-dd0afd8ea42b'))
2026-02-18 17:32:35,612 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message 5454a818-ac05-4a36-896f-dd0afd8ea42b
2026-02-18 17:32:38,563 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:32:38,563 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: INTENT: GENERAL
COMPLEXITY: SIMPLE...
2026-02-18 17:32:38,563 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 classifier: intent=GENERAL, complexity=SIMPLE (raw: 'INTENT: GENERAL\nCOMPLEXITY: SIMPLE')
2026-02-18 17:32:38,563 - chatbot_ai_system.orchestrator - INFO - Phase 4: intent='GENERAL', complexity='SIMPLE'
2026-02-18 17:32:38,563 - chatbot_ai_system.orchestrator - INFO - Phase 5: Selected 0 tools: []
2026-02-18 17:32:38,565 - chatbot_ai_system.services.embedding - INFO - Using cached embedding
2026-02-18 17:32:38,567 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages JOIN conversations ON conversations.id = messages.conversation_id 
WHERE conversations.user_id = $1::UUID AND (messages.embedding <=> $2) < $3::FLOAT ORDER BY messages.embedding <=> $4 
 LIMIT $5::INTEGER
2026-02-18 17:32:38,567 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages JOIN conversations ON conversations.id = messages.conversation_id 
WHERE conversations.user_id = $1::UUID AND (messages.embedding <=> $2) < $3::FLOAT ORDER BY messages.embedding <=> $4 
 LIMIT $5::INTEGER
2026-02-18 17:32:38,567 INFO sqlalchemy.engine.Engine [cached since 273s ago] (UUID('00000000-0000-0000-0000-000000000000'), '[-0.41698768734931946,-0.09359768033027649,-3.2590696811676025,-0.0930803194642067,1.0798091888427734,0.21993567049503326,-0.4263555109500885,0.10012 ... (14798 characters truncated) ... 2182445526,0.0934954285621643,0.9423332214355469,0.21447224915027618,-0.7234659194946289,-0.6160458326339722,-0.2736611068248749,-0.8869515061378479]', 0.30000000000000004, '[-0.41698768734931946,-0.09359768033027649,-3.2590696811676025,-0.0930803194642067,1.0798091888427734,0.21993567049503326,-0.4263555109500885,0.10012 ... (14798 characters truncated) ... 2182445526,0.0934954285621643,0.9423332214355469,0.21447224915027618,-0.7234659194946289,-0.6160458326339722,-0.2736611068248749,-0.8869515061378479]', 3)
2026-02-18 17:32:38,567 - sqlalchemy.engine.Engine - INFO - [cached since 273s ago] (UUID('00000000-0000-0000-0000-000000000000'), '[-0.41698768734931946,-0.09359768033027649,-3.2590696811676025,-0.0930803194642067,1.0798091888427734,0.21993567049503326,-0.4263555109500885,0.10012 ... (14798 characters truncated) ... 2182445526,0.0934954285621643,0.9423332214355469,0.21447224915027618,-0.7234659194946289,-0.6160458326339722,-0.2736611068248749,-0.8869515061378479]', 0.30000000000000004, '[-0.41698768734931946,-0.09359768033027649,-3.2590696811676025,-0.0930803194642067,1.0798091888427734,0.21993567049503326,-0.4263555109500885,0.10012 ... (14798 characters truncated) ... 2182445526,0.0934954285621643,0.9423332214355469,0.21447224915027618,-0.7234659194946289,-0.6160458326339722,-0.2736611068248749,-0.8869515061378479]', 3)
2026-02-18 17:33:01,849 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:33:14,503 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:33:14,503 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:33:14,504 INFO sqlalchemy.engine.Engine [cached since 311.3s ago] (UUID('c721e9cd-8ed6-4776-bf18-4c5f5690811d'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.ASSISTANT: 'assistant'>, 'Since the `pyproject.toml` file is not provided, I can only show you a snippet of what it might look like. Here\'s a possible first 5 lines:\n\n```\n ... (193 characters truncated) ... encies]\npytest = "^7.2.2"\n```\n\nPlease note that this is just an example and the actual contents of your `pyproject.toml` file might be different.', 'null', None, '{"model": "llama3.2", "type": "synthesis"}', 3973, 137, 'llama3.2', None, None, None, 23, datetime.datetime(2026, 2, 18, 8, 33, 14, 503845))
2026-02-18 17:33:14,504 - sqlalchemy.engine.Engine - INFO - [cached since 311.3s ago] (UUID('c721e9cd-8ed6-4776-bf18-4c5f5690811d'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.ASSISTANT: 'assistant'>, 'Since the `pyproject.toml` file is not provided, I can only show you a snippet of what it might look like. Here\'s a possible first 5 lines:\n\n```\n ... (193 characters truncated) ... encies]\npytest = "^7.2.2"\n```\n\nPlease note that this is just an example and the actual contents of your `pyproject.toml` file might be different.', 'null', None, '{"model": "llama3.2", "type": "synthesis"}', 3973, 137, 'llama3.2', None, None, None, 23, datetime.datetime(2026, 2, 18, 8, 33, 14, 503845))
2026-02-18 17:33:14,505 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:33:14,505 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:33:14,505 INFO sqlalchemy.engine.Engine [cached since 311.3s ago] (UUID('c721e9cd-8ed6-4776-bf18-4c5f5690811d'),)
2026-02-18 17:33:14,505 - sqlalchemy.engine.Engine - INFO - [cached since 311.3s ago] (UUID('c721e9cd-8ed6-4776-bf18-4c5f5690811d'),)
2026-02-18 17:33:14,507 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:33:14,507 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:33:14,507 INFO sqlalchemy.engine.Engine [cached since 311.3s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), 23)
2026-02-18 17:33:14,507 - sqlalchemy.engine.Engine - INFO - [cached since 311.3s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), 23)
2026-02-18 17:33:14,538 - sqlalchemy.pool.impl.AsyncAdaptedQueuePool - ERROR - The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x11724cf50>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
sys:1: SAWarning: The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x11724cf50>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2026-02-18 17:33:14,542 - sqlalchemy.pool.impl.AsyncAdaptedQueuePool - ERROR - The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x11724c500>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
sys:1: SAWarning: The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x11724c500>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2026-02-18 17:33:14,544 - sqlalchemy.pool.impl.AsyncAdaptedQueuePool - ERROR - The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x11724cd70>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
sys:1: SAWarning: The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x11724cd70>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2026-02-18 17:33:14,547 - sqlalchemy.pool.impl.AsyncAdaptedQueuePool - ERROR - The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x11724e8a0>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
sys:1: SAWarning: The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x11724e8a0>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2026-02-18 17:33:14,549 - sqlalchemy.pool.impl.AsyncAdaptedQueuePool - ERROR - The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x11724c8c0>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
sys:1: SAWarning: The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x11724c8c0>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2026-02-18 17:33:14,551 - sqlalchemy.pool.impl.AsyncAdaptedQueuePool - ERROR - The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x11724e6c0>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
sys:1: SAWarning: The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x11724e6c0>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2026-02-18 17:33:14,553 - sqlalchemy.pool.impl.AsyncAdaptedQueuePool - ERROR - The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x11724f5c0>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
sys:1: SAWarning: The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x11724f5c0>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2026-02-18 17:33:14,831 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
2026-02-18 17:33:14,834 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:33:14,834 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:33:14,835 INFO sqlalchemy.engine.Engine [cached since 304s ago] (UUID('c721e9cd-8ed6-4776-bf18-4c5f5690811d'),)
2026-02-18 17:33:14,835 - sqlalchemy.engine.Engine - INFO - [cached since 304s ago] (UUID('c721e9cd-8ed6-4776-bf18-4c5f5690811d'),)
2026-02-18 17:33:14,836 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:33:14,836 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:33:14,836 INFO sqlalchemy.engine.Engine [cached since 304s ago] ('[0.007077026646584272,0.8526486754417419,-2.2130799293518066,-1.6686185598373413,1.1295719146728516,-0.6254112124443054,-0.8693437576293945,0.4199387 ... (14883 characters truncated) ... 70928955,-0.5085141062736511,0.20899437367916107,-0.296720415353775,-0.22662344574928284,-0.4058297276496887,-0.6646690368652344,-0.5768517851829529]', UUID('c721e9cd-8ed6-4776-bf18-4c5f5690811d'))
2026-02-18 17:33:14,836 - sqlalchemy.engine.Engine - INFO - [cached since 304s ago] ('[0.007077026646584272,0.8526486754417419,-2.2130799293518066,-1.6686185598373413,1.1295719146728516,-0.6254112124443054,-0.8693437576293945,0.4199387 ... (14883 characters truncated) ... 70928955,-0.5085141062736511,0.20899437367916107,-0.296720415353775,-0.22662344574928284,-0.4058297276496887,-0.6646690368652344,-0.5768517851829529]', UUID('c721e9cd-8ed6-4776-bf18-4c5f5690811d'))
2026-02-18 17:33:14,837 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message c721e9cd-8ed6-4776-bf18-4c5f5690811d
2026-02-18 17:33:15,648 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:33:16,220 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:33:16,220 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:33:16,220 INFO sqlalchemy.engine.Engine [cached since 313s ago] (UUID('5c52ef6a-232d-41a4-92b4-ce0235e5e90f'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, 'The capital of France is Paris.', 'null', None, '{"model": "llama3.2"}', 120, 8, 'llama3.2', None, None, None, 4, datetime.datetime(2026, 2, 18, 8, 33, 16, 220128))
2026-02-18 17:33:16,220 - sqlalchemy.engine.Engine - INFO - [cached since 313s ago] (UUID('5c52ef6a-232d-41a4-92b4-ce0235e5e90f'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, 'The capital of France is Paris.', 'null', None, '{"model": "llama3.2"}', 120, 8, 'llama3.2', None, None, None, 4, datetime.datetime(2026, 2, 18, 8, 33, 16, 220128))
2026-02-18 17:33:16,223 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:33:16,223 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:33:16,223 INFO sqlalchemy.engine.Engine [cached since 313s ago] (UUID('5c52ef6a-232d-41a4-92b4-ce0235e5e90f'),)
2026-02-18 17:33:16,223 - sqlalchemy.engine.Engine - INFO - [cached since 313s ago] (UUID('5c52ef6a-232d-41a4-92b4-ce0235e5e90f'),)
2026-02-18 17:33:16,224 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:33:16,224 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:33:16,225 - chatbot_ai_system.orchestrator - ERROR - Failed to embed user message at seq 3: This session is in 'prepared' state; no further SQL can be emitted within this transaction.
2026-02-18 17:33:16,226 - chatbot_ai_system.services.embedding - INFO - Using cached embedding
2026-02-18 17:33:16,227 - chatbot_ai_system.orchestrator - ERROR - Failed to generate embedding for message 5c52ef6a-232d-41a4-92b4-ce0235e5e90f: This session is in 'prepared' state; no further SQL can be emitted within this transaction.
2026-02-18 17:33:16,227 - chatbot_ai_system.services.embedding - INFO - Using cached embedding
2026-02-18 17:33:16,227 - chatbot_ai_system.orchestrator - ERROR - Failed to generate embedding for message 5c52ef6a-232d-41a4-92b4-ce0235e5e90f: This session is in 'prepared' state; no further SQL can be emitted within this transaction.
INFO:     127.0.0.1:60836 - "POST /api/chat HTTP/1.1" 200 OK
2026-02-18 17:33:16,268 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:33:16,268 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:33:16,268 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:33:16,268 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:33:16,268 INFO sqlalchemy.engine.Engine [cached since 313.1s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:33:16,268 - sqlalchemy.engine.Engine - INFO - [cached since 313.1s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:33:16,271 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:33:16,271 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:33:16,271 INFO sqlalchemy.engine.Engine [cached since 313.1s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:33:16,271 - sqlalchemy.engine.Engine - INFO - [cached since 313.1s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:33:16,272 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:33:16,272 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:33:16,272 INFO sqlalchemy.engine.Engine [cached since 313.1s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:33:16,272 - sqlalchemy.engine.Engine - INFO - [cached since 313.1s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:33:16,283 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:33:16,283 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:33:16,283 INFO sqlalchemy.engine.Engine [cached since 313.1s ago] (UUID('1aae7de3-61a3-4644-a52c-ce8bbbfc086b'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'Who wrote Romeo and Juliet?', 'null', None, 'null', None, None, None, None, None, None, 5, datetime.datetime(2026, 2, 18, 8, 33, 16, 283510))
2026-02-18 17:33:16,283 - sqlalchemy.engine.Engine - INFO - [cached since 313.1s ago] (UUID('1aae7de3-61a3-4644-a52c-ce8bbbfc086b'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'Who wrote Romeo and Juliet?', 'null', None, 'null', None, None, None, None, None, None, 5, datetime.datetime(2026, 2, 18, 8, 33, 16, 283510))
2026-02-18 17:33:16,285 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:33:16,285 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:33:16,285 INFO sqlalchemy.engine.Engine [cached since 313.1s ago] (UUID('1aae7de3-61a3-4644-a52c-ce8bbbfc086b'),)
2026-02-18 17:33:16,285 - sqlalchemy.engine.Engine - INFO - [cached since 313.1s ago] (UUID('1aae7de3-61a3-4644-a52c-ce8bbbfc086b'),)
2026-02-18 17:33:16,286 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:33:16,286 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:33:16,322 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:33:16,322 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:33:16,322 INFO sqlalchemy.engine.Engine SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:33:16,322 - sqlalchemy.engine.Engine - INFO - SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:33:16,322 INFO sqlalchemy.engine.Engine [cached since 313.1s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:33:16,322 - sqlalchemy.engine.Engine - INFO - [cached since 313.1s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:33:16,324 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:33:16,324 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:33:16,324 INFO sqlalchemy.engine.Engine [cached since 313.1s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:33:16,324 - sqlalchemy.engine.Engine - INFO - [cached since 313.1s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:33:16,325 - chatbot_ai_system.orchestrator - INFO - Using cached context for conversation 4933dbb2-767b-403b-a072-aab0873d7cd4
2026-02-18 17:34:01,264 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:34:01,264 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: I am functioning properly, thank you for asking! I'm a large language model, so I don't have emotions or feelings like humans do, but I'm always ready to help and assist with any questions or topics y...
2026-02-18 17:34:01,265 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:34:01,265 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:34:01,265 INFO sqlalchemy.engine.Engine [cached since 358.1s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:34:01,265 - sqlalchemy.engine.Engine - INFO - [cached since 358.1s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:34:01,266 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:34:01,266 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:34:01,266 INFO sqlalchemy.engine.Engine [cached since 358.1s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:34:01,266 - sqlalchemy.engine.Engine - INFO - [cached since 358.1s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:34:01,270 INFO sqlalchemy.engine.Engine UPDATE conversations SET updated_at=$1::TIMESTAMP WITHOUT TIME ZONE, summary=$2::VARCHAR, last_summarized_seq_id=$3::INTEGER WHERE conversations.id = $4::UUID
2026-02-18 17:34:01,270 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET updated_at=$1::TIMESTAMP WITHOUT TIME ZONE, summary=$2::VARCHAR, last_summarized_seq_id=$3::INTEGER WHERE conversations.id = $4::UUID
2026-02-18 17:34:01,270 INFO sqlalchemy.engine.Engine [generated in 0.00016s] (datetime.datetime(2026, 2, 18, 8, 34, 1, 270302), "I am functioning properly, thank you for asking! I'm a large language model, so I don't have emotions or feelings like humans do, but I'm always read ... (606 characters truncated) ... ippet that reads the file and prints its contents:\n```python\nwith open('requirements.txt', 'r') as f:\n    requirements = [line.strip() for line in", 23, UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'))
2026-02-18 17:34:01,270 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] (datetime.datetime(2026, 2, 18, 8, 34, 1, 270302), "I am functioning properly, thank you for asking! I'm a large language model, so I don't have emotions or feelings like humans do, but I'm always read ... (606 characters truncated) ... ippet that reads the file and prints its contents:\n```python\nwith open('requirements.txt', 'r') as f:\n    requirements = [line.strip() for line in", 23, UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'))
2026-02-18 17:34:01,272 - chatbot_ai_system.orchestrator - INFO - Updated summary for conversation 36c8c289-9d0b-4ed2-88d9-e45d46389920 at seq 23
2026-02-18 17:34:01,273 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:34:01,273 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:60823 - "POST /api/chat HTTP/1.1" 200 OK
2026-02-18 17:34:01,309 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:34:01,309 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:34:01,310 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:34:01,310 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:34:01,310 INFO sqlalchemy.engine.Engine [cached since 358.2s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:34:01,310 - sqlalchemy.engine.Engine - INFO - [cached since 358.2s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:34:01,312 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:34:01,312 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:34:01,312 INFO sqlalchemy.engine.Engine [cached since 358.1s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:34:01,312 - sqlalchemy.engine.Engine - INFO - [cached since 358.1s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:34:01,313 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:34:01,313 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:34:01,313 INFO sqlalchemy.engine.Engine [cached since 358.1s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), 50)
2026-02-18 17:34:01,313 - sqlalchemy.engine.Engine - INFO - [cached since 358.1s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), 50)
2026-02-18 17:34:01,327 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:34:01,327 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:34:01,327 INFO sqlalchemy.engine.Engine [cached since 358.1s ago] (UUID('a038cd16-6e78-4d4f-b5fe-d1530226881a'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.USER: 'user'>, 'Check git status and then list the files in src/.', 'null', None, 'null', None, None, None, None, None, None, 24, datetime.datetime(2026, 2, 18, 8, 34, 1, 327187))
2026-02-18 17:34:01,327 - sqlalchemy.engine.Engine - INFO - [cached since 358.1s ago] (UUID('a038cd16-6e78-4d4f-b5fe-d1530226881a'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.USER: 'user'>, 'Check git status and then list the files in src/.', 'null', None, 'null', None, None, None, None, None, None, 24, datetime.datetime(2026, 2, 18, 8, 34, 1, 327187))
2026-02-18 17:34:01,329 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:34:01,329 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:34:01,329 INFO sqlalchemy.engine.Engine [cached since 358.1s ago] (UUID('a038cd16-6e78-4d4f-b5fe-d1530226881a'),)
2026-02-18 17:34:01,329 - sqlalchemy.engine.Engine - INFO - [cached since 358.1s ago] (UUID('a038cd16-6e78-4d4f-b5fe-d1530226881a'),)
2026-02-18 17:34:01,330 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:34:01,330 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:34:01,362 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:34:01,362 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:34:01,362 INFO sqlalchemy.engine.Engine SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:34:01,362 - sqlalchemy.engine.Engine - INFO - SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:34:01,362 INFO sqlalchemy.engine.Engine [cached since 358.2s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:34:01,362 - sqlalchemy.engine.Engine - INFO - [cached since 358.2s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:34:01,364 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:34:01,364 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:34:01,364 INFO sqlalchemy.engine.Engine [cached since 358.2s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:34:01,364 - sqlalchemy.engine.Engine - INFO - [cached since 358.2s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:34:01,365 - chatbot_ai_system.orchestrator - INFO - Using cached context for conversation 36c8c289-9d0b-4ed2-88d9-e45d46389920
2026-02-18 17:34:04,245 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:34:04,245 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: INTENT: GENERAL
COMPLEXITY: SIMPLE...
2026-02-18 17:34:04,246 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 classifier: intent=GENERAL, complexity=SIMPLE (raw: 'INTENT: GENERAL\nCOMPLEXITY: SIMPLE')
2026-02-18 17:34:04,246 - chatbot_ai_system.orchestrator - INFO - Phase 4: intent='GENERAL', complexity='SIMPLE'
2026-02-18 17:34:04,246 - chatbot_ai_system.orchestrator - INFO - Phase 5: Selected 0 tools: []
2026-02-18 17:34:04,248 - chatbot_ai_system.services.embedding - INFO - Using cached embedding
2026-02-18 17:34:04,249 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages JOIN conversations ON conversations.id = messages.conversation_id 
WHERE conversations.user_id = $1::UUID AND (messages.embedding <=> $2) < $3::FLOAT ORDER BY messages.embedding <=> $4 
 LIMIT $5::INTEGER
2026-02-18 17:34:04,249 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages JOIN conversations ON conversations.id = messages.conversation_id 
WHERE conversations.user_id = $1::UUID AND (messages.embedding <=> $2) < $3::FLOAT ORDER BY messages.embedding <=> $4 
 LIMIT $5::INTEGER
2026-02-18 17:34:04,249 INFO sqlalchemy.engine.Engine [cached since 358.7s ago] (UUID('00000000-0000-0000-0000-000000000000'), '[0.09824512898921967,-0.5391775369644165,-3.4538865089416504,-0.05036325752735138,1.8522987365722656,-1.1021262407302856,-0.7330760955810547,-0.51694 ... (14876 characters truncated) ... 561077118,-0.254932165145874,0.11631236970424652,-0.3152748942375183,-0.6034060716629028,-0.9344254732131958,0.15210607647895813,-0.5840334892272949]', 0.30000000000000004, '[0.09824512898921967,-0.5391775369644165,-3.4538865089416504,-0.05036325752735138,1.8522987365722656,-1.1021262407302856,-0.7330760955810547,-0.51694 ... (14876 characters truncated) ... 561077118,-0.254932165145874,0.11631236970424652,-0.3152748942375183,-0.6034060716629028,-0.9344254732131958,0.15210607647895813,-0.5840334892272949]', 3)
2026-02-18 17:34:04,249 - sqlalchemy.engine.Engine - INFO - [cached since 358.7s ago] (UUID('00000000-0000-0000-0000-000000000000'), '[0.09824512898921967,-0.5391775369644165,-3.4538865089416504,-0.05036325752735138,1.8522987365722656,-1.1021262407302856,-0.7330760955810547,-0.51694 ... (14876 characters truncated) ... 561077118,-0.254932165145874,0.11631236970424652,-0.3152748942375183,-0.6034060716629028,-0.9344254732131958,0.15210607647895813,-0.5840334892272949]', 0.30000000000000004, '[0.09824512898921967,-0.5391775369644165,-3.4538865089416504,-0.05036325752735138,1.8522987365722656,-1.1021262407302856,-0.7330760955810547,-0.51694 ... (14876 characters truncated) ... 561077118,-0.254932165145874,0.11631236970424652,-0.3152748942375183,-0.6034060716629028,-0.9344254732131958,0.15210607647895813,-0.5840334892272949]', 3)
2026-02-18 17:34:05,463 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:34:05,463 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: INTENT: GIT
COMPLEXITY: COMPLEX...
2026-02-18 17:34:05,463 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 classifier: intent=GIT, complexity=COMPLEX (raw: 'INTENT: GIT\nCOMPLEXITY: COMPLEX')
2026-02-18 17:34:05,463 - chatbot_ai_system.orchestrator - INFO - Phase 4: intent='GIT', complexity='COMPLEX'
2026-02-18 17:34:05,464 - chatbot_ai_system.orchestrator - INFO - Phase 5: Selected 8 tools: ['git_add', 'git_branch', 'git_checkout', 'git_cherry_pick', 'git_clean', 'git_clear_working_dir', 'git_clone', 'git_commit']
2026-02-18 17:34:05,465 - chatbot_ai_system.orchestrator - INFO - Phase 5.5: Routing to agentic Plan+ReAct engine
2026-02-18 17:34:06,327 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:34:09,745 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:34:09,745 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:34:09,745 INFO sqlalchemy.engine.Engine [cached since 366.6s ago] (UUID('b872667d-c202-4ee9-a2f2-225ce321d544'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, 'Shakespeare is widely credited as the author of Romeo and Juliet, a tragic love story written in the late 16th century. Specifically, it is believed to have been written around 1595-1596.', 'null', None, '{"model": "llama3.2"}', 143, 44, 'llama3.2', None, None, None, 6, datetime.datetime(2026, 2, 18, 8, 34, 9, 745515))
2026-02-18 17:34:09,745 - sqlalchemy.engine.Engine - INFO - [cached since 366.6s ago] (UUID('b872667d-c202-4ee9-a2f2-225ce321d544'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, 'Shakespeare is widely credited as the author of Romeo and Juliet, a tragic love story written in the late 16th century. Specifically, it is believed to have been written around 1595-1596.', 'null', None, '{"model": "llama3.2"}', 143, 44, 'llama3.2', None, None, None, 6, datetime.datetime(2026, 2, 18, 8, 34, 9, 745515))
2026-02-18 17:34:09,749 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:34:09,749 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:34:09,749 INFO sqlalchemy.engine.Engine [cached since 366.6s ago] (UUID('b872667d-c202-4ee9-a2f2-225ce321d544'),)
2026-02-18 17:34:09,749 - sqlalchemy.engine.Engine - INFO - [cached since 366.6s ago] (UUID('b872667d-c202-4ee9-a2f2-225ce321d544'),)
2026-02-18 17:34:09,752 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:34:09,752 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:34:09,753 - chatbot_ai_system.orchestrator - ERROR - Failed to embed user message at seq 5: This session is in 'prepared' state; no further SQL can be emitted within this transaction.
INFO:     127.0.0.1:60861 - "POST /api/chat HTTP/1.1" 200 OK
2026-02-18 17:34:09,841 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:34:09,841 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:34:09,841 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:34:09,841 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:34:09,841 INFO sqlalchemy.engine.Engine [cached since 366.7s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:34:09,841 - sqlalchemy.engine.Engine - INFO - [cached since 366.7s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:34:09,843 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:34:09,843 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:34:09,843 INFO sqlalchemy.engine.Engine [cached since 366.7s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:34:09,843 - sqlalchemy.engine.Engine - INFO - [cached since 366.7s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:34:09,845 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:34:09,845 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:34:09,845 INFO sqlalchemy.engine.Engine [cached since 366.7s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:34:09,845 - sqlalchemy.engine.Engine - INFO - [cached since 366.7s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:34:09,859 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:34:09,859 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:34:09,859 INFO sqlalchemy.engine.Engine [cached since 366.7s ago] (UUID('53a7bd19-940c-4d53-94ba-c6f4759e11af'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'Explain the concept of recursion briefly.', 'null', None, 'null', None, None, None, None, None, None, 7, datetime.datetime(2026, 2, 18, 8, 34, 9, 859673))
2026-02-18 17:34:09,859 - sqlalchemy.engine.Engine - INFO - [cached since 366.7s ago] (UUID('53a7bd19-940c-4d53-94ba-c6f4759e11af'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'Explain the concept of recursion briefly.', 'null', None, 'null', None, None, None, None, None, None, 7, datetime.datetime(2026, 2, 18, 8, 34, 9, 859673))
2026-02-18 17:34:09,861 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:34:09,861 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:34:09,861 INFO sqlalchemy.engine.Engine [cached since 366.7s ago] (UUID('53a7bd19-940c-4d53-94ba-c6f4759e11af'),)
2026-02-18 17:34:09,861 - sqlalchemy.engine.Engine - INFO - [cached since 366.7s ago] (UUID('53a7bd19-940c-4d53-94ba-c6f4759e11af'),)
2026-02-18 17:34:09,862 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:34:09,862 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:34:09,863 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:34:09,863 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:34:09,863 INFO sqlalchemy.engine.Engine SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:34:09,863 - sqlalchemy.engine.Engine - INFO - SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:34:09,863 INFO sqlalchemy.engine.Engine [cached since 366.7s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:34:09,863 - sqlalchemy.engine.Engine - INFO - [cached since 366.7s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:34:09,864 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:34:09,864 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:34:09,864 INFO sqlalchemy.engine.Engine [cached since 366.7s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:34:09,864 - sqlalchemy.engine.Engine - INFO - [cached since 366.7s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:34:09,865 - chatbot_ai_system.orchestrator - INFO - Using cached context for conversation 4933dbb2-767b-403b-a072-aab0873d7cd4
2026-02-18 17:34:10,228 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
2026-02-18 17:34:10,232 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:34:10,232 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:34:10,232 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:34:10,232 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:34:10,232 INFO sqlalchemy.engine.Engine [cached since 359.4s ago] (UUID('b872667d-c202-4ee9-a2f2-225ce321d544'),)
2026-02-18 17:34:10,232 - sqlalchemy.engine.Engine - INFO - [cached since 359.4s ago] (UUID('b872667d-c202-4ee9-a2f2-225ce321d544'),)
2026-02-18 17:34:10,237 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:34:10,237 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:34:10,237 INFO sqlalchemy.engine.Engine [cached since 359.4s ago] ('[0.4689042270183563,-0.3786539137363434,-3.4777894020080566,-0.8654720187187195,0.426878958940506,0.15420125424861908,-0.652664303779602,0.0580959990 ... (14886 characters truncated) ... 316596985,-0.874077320098877,0.7176377177238464,-0.6316097378730774,-0.1119748055934906,-0.5452683568000793,-0.45411473512649536,-0.3087610602378845]', UUID('b872667d-c202-4ee9-a2f2-225ce321d544'))
2026-02-18 17:34:10,237 - sqlalchemy.engine.Engine - INFO - [cached since 359.4s ago] ('[0.4689042270183563,-0.3786539137363434,-3.4777894020080566,-0.8654720187187195,0.426878958940506,0.15420125424861908,-0.652664303779602,0.0580959990 ... (14886 characters truncated) ... 316596985,-0.874077320098877,0.7176377177238464,-0.6316097378730774,-0.1119748055934906,-0.5452683568000793,-0.45411473512649536,-0.3087610602378845]', UUID('b872667d-c202-4ee9-a2f2-225ce321d544'))
2026-02-18 17:34:10,240 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message b872667d-c202-4ee9-a2f2-225ce321d544
2026-02-18 17:34:10,554 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
2026-02-18 17:34:10,557 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:34:10,557 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:34:10,557 INFO sqlalchemy.engine.Engine [cached since 359.7s ago] (UUID('b872667d-c202-4ee9-a2f2-225ce321d544'),)
2026-02-18 17:34:10,557 - sqlalchemy.engine.Engine - INFO - [cached since 359.7s ago] (UUID('b872667d-c202-4ee9-a2f2-225ce321d544'),)
2026-02-18 17:34:10,559 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:34:10,559 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:34:10,559 INFO sqlalchemy.engine.Engine [cached since 359.7s ago] ('[0.4689042270183563,-0.3786539137363434,-3.4777894020080566,-0.8654720187187195,0.426878958940506,0.15420125424861908,-0.652664303779602,0.0580959990 ... (14886 characters truncated) ... 316596985,-0.874077320098877,0.7176377177238464,-0.6316097378730774,-0.1119748055934906,-0.5452683568000793,-0.45411473512649536,-0.3087610602378845]', UUID('b872667d-c202-4ee9-a2f2-225ce321d544'))
2026-02-18 17:34:10,559 - sqlalchemy.engine.Engine - INFO - [cached since 359.7s ago] ('[0.4689042270183563,-0.3786539137363434,-3.4777894020080566,-0.8654720187187195,0.426878958940506,0.15420125424861908,-0.652664303779602,0.0580959990 ... (14886 characters truncated) ... 316596985,-0.874077320098877,0.7176377177238464,-0.6316097378730774,-0.1119748055934906,-0.5452683568000793,-0.45411473512649536,-0.3087610602378845]', UUID('b872667d-c202-4ee9-a2f2-225ce321d544'))
2026-02-18 17:34:10,561 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message b872667d-c202-4ee9-a2f2-225ce321d544
2026-02-18 17:34:15,114 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:34:15,114 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: 1. Run `git status` to check the current repository status.
2. Run `ls src/` to list the files in the `src` directory....
2026-02-18 17:34:15,114 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 planner: 2 steps  ['Run `git status` to check the current repository status.', 'Run `ls src/` to list the files in the `src` directory.']
2026-02-18 17:34:18,656 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:34:18,657 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: INTENT: SEQUENTIAL-THINKING
COMPLEXITY: COMPLEX...
2026-02-18 17:34:18,657 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 classifier: intent=SEQUENTIAL-THINKING, complexity=COMPLEX (raw: 'INTENT: SEQUENTIAL-THINKING\nCOMPLEXITY: COMPLEX')
2026-02-18 17:34:18,657 - chatbot_ai_system.orchestrator - INFO - Phase 4: intent='SEQUENTIAL-THINKING', complexity='COMPLEX'
2026-02-18 17:34:18,658 - chatbot_ai_system.orchestrator - INFO - Phase 5: Selected 1 tools: ['sequentialthinking']
2026-02-18 17:34:18,660 - chatbot_ai_system.services.embedding - INFO - Using cached embedding
2026-02-18 17:34:18,661 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages JOIN conversations ON conversations.id = messages.conversation_id 
WHERE conversations.user_id = $1::UUID AND (messages.embedding <=> $2) < $3::FLOAT ORDER BY messages.embedding <=> $4 
 LIMIT $5::INTEGER
2026-02-18 17:34:18,661 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages JOIN conversations ON conversations.id = messages.conversation_id 
WHERE conversations.user_id = $1::UUID AND (messages.embedding <=> $2) < $3::FLOAT ORDER BY messages.embedding <=> $4 
 LIMIT $5::INTEGER
2026-02-18 17:34:18,661 INFO sqlalchemy.engine.Engine [cached since 373.1s ago] (UUID('00000000-0000-0000-0000-000000000000'), '[0.7621575593948364,0.46418169140815735,-3.6777732372283936,-1.509378433227539,1.5536361932754517,-1.354354739189148,0.6631172299385071,-0.8810969591 ... (14865 characters truncated) ... 22640991,0.25809288024902344,0.2682364583015442,0.009832986630499363,-0.4312957525253296,-0.31437790393829346,-0.911828339099884,-0.6291330456733704]', 0.30000000000000004, '[0.7621575593948364,0.46418169140815735,-3.6777732372283936,-1.509378433227539,1.5536361932754517,-1.354354739189148,0.6631172299385071,-0.8810969591 ... (14865 characters truncated) ... 22640991,0.25809288024902344,0.2682364583015442,0.009832986630499363,-0.4312957525253296,-0.31437790393829346,-0.911828339099884,-0.6291330456733704]', 3)
2026-02-18 17:34:18,661 - sqlalchemy.engine.Engine - INFO - [cached since 373.1s ago] (UUID('00000000-0000-0000-0000-000000000000'), '[0.7621575593948364,0.46418169140815735,-3.6777732372283936,-1.509378433227539,1.5536361932754517,-1.354354739189148,0.6631172299385071,-0.8810969591 ... (14865 characters truncated) ... 22640991,0.25809288024902344,0.2682364583015442,0.009832986630499363,-0.4312957525253296,-0.31437790393829346,-0.911828339099884,-0.6291330456733704]', 0.30000000000000004, '[0.7621575593948364,0.46418169140815735,-3.6777732372283936,-1.509378433227539,1.5536361932754517,-1.354354739189148,0.6631172299385071,-0.8810969591 ... (14865 characters truncated) ... 22640991,0.25809288024902344,0.2682364583015442,0.009832986630499363,-0.4312957525253296,-0.31437790393829346,-0.911828339099884,-0.6291330456733704]', 3)
2026-02-18 17:34:18,666 - chatbot_ai_system.orchestrator - INFO - Phase 5.5: Routing to agentic Plan+ReAct engine
2026-02-18 17:34:38,176 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:34:38,264 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5: Completed in 1 rounds, 23.1s
2026-02-18 17:34:38,264 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:34:38,264 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:34:38,265 INFO sqlalchemy.engine.Engine [cached since 395.1s ago] (UUID('d88ce5ba-e6ad-42c2-b196-dfdc8a78ddc8'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.ASSISTANT: 'assistant'>, '{"name": "git_status", "parameters": {}}', 'null', None, '{"model": "llama3.2", "type": "agentic", "plan": ["Run `git status` to check the current repository status.", "Run `ls src/` to list the files in the `src` directory."]}', 3248, 13, 'llama3.2', None, None, None, 25, datetime.datetime(2026, 2, 18, 8, 34, 38, 264851))
2026-02-18 17:34:38,265 - sqlalchemy.engine.Engine - INFO - [cached since 395.1s ago] (UUID('d88ce5ba-e6ad-42c2-b196-dfdc8a78ddc8'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.ASSISTANT: 'assistant'>, '{"name": "git_status", "parameters": {}}', 'null', None, '{"model": "llama3.2", "type": "agentic", "plan": ["Run `git status` to check the current repository status.", "Run `ls src/` to list the files in the `src` directory."]}', 3248, 13, 'llama3.2', None, None, None, 25, datetime.datetime(2026, 2, 18, 8, 34, 38, 264851))
2026-02-18 17:34:38,279 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:34:38,279 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:34:38,279 INFO sqlalchemy.engine.Engine [cached since 395.1s ago] (UUID('d88ce5ba-e6ad-42c2-b196-dfdc8a78ddc8'),)
2026-02-18 17:34:38,279 - sqlalchemy.engine.Engine - INFO - [cached since 395.1s ago] (UUID('d88ce5ba-e6ad-42c2-b196-dfdc8a78ddc8'),)
2026-02-18 17:34:38,280 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:34:38,280 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:34:38,281 - chatbot_ai_system.orchestrator - ERROR - Failed to embed user message at seq 24: This session is in 'prepared' state; no further SQL can be emitted within this transaction.
INFO:     127.0.0.1:60875 - "POST /api/chat HTTP/1.1" 200 OK
2026-02-18 17:34:38,308 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:34:38,308 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:34:38,309 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:34:38,309 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:34:38,309 INFO sqlalchemy.engine.Engine [cached since 395.2s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:34:38,309 - sqlalchemy.engine.Engine - INFO - [cached since 395.2s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:34:38,310 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:34:38,310 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:34:38,310 INFO sqlalchemy.engine.Engine [cached since 395.1s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:34:38,310 - sqlalchemy.engine.Engine - INFO - [cached since 395.1s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:34:38,311 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:34:38,311 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:34:38,311 INFO sqlalchemy.engine.Engine [cached since 395.1s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), 50)
2026-02-18 17:34:38,311 - sqlalchemy.engine.Engine - INFO - [cached since 395.1s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), 50)
2026-02-18 17:34:38,314 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:34:38,314 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:34:38,314 INFO sqlalchemy.engine.Engine [cached since 395.1s ago] (UUID('0aff4275-8750-47b5-927f-8e19ac790712'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.USER: 'user'>, 'Read docs/phase_5.0.md and docs/phase_4.1.md and summarize the key differences.', 'null', None, 'null', None, None, None, None, None, None, 26, datetime.datetime(2026, 2, 18, 8, 34, 38, 314319))
2026-02-18 17:34:38,314 - sqlalchemy.engine.Engine - INFO - [cached since 395.1s ago] (UUID('0aff4275-8750-47b5-927f-8e19ac790712'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.USER: 'user'>, 'Read docs/phase_5.0.md and docs/phase_4.1.md and summarize the key differences.', 'null', None, 'null', None, None, None, None, None, None, 26, datetime.datetime(2026, 2, 18, 8, 34, 38, 314319))
2026-02-18 17:34:38,315 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:34:38,315 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:34:38,315 INFO sqlalchemy.engine.Engine [cached since 395.1s ago] (UUID('0aff4275-8750-47b5-927f-8e19ac790712'),)
2026-02-18 17:34:38,315 - sqlalchemy.engine.Engine - INFO - [cached since 395.1s ago] (UUID('0aff4275-8750-47b5-927f-8e19ac790712'),)
2026-02-18 17:34:38,316 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:34:38,316 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:34:38,317 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:34:38,317 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:34:38,317 INFO sqlalchemy.engine.Engine SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:34:38,317 - sqlalchemy.engine.Engine - INFO - SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:34:38,317 INFO sqlalchemy.engine.Engine [cached since 395.1s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:34:38,317 - sqlalchemy.engine.Engine - INFO - [cached since 395.1s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:34:38,319 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:34:38,319 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:34:38,319 INFO sqlalchemy.engine.Engine [cached since 395.1s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:34:38,319 - sqlalchemy.engine.Engine - INFO - [cached since 395.1s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:34:38,319 - chatbot_ai_system.orchestrator - INFO - Using cached context for conversation 36c8c289-9d0b-4ed2-88d9-e45d46389920
2026-02-18 17:34:38,487 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
2026-02-18 17:34:38,490 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:34:38,490 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:34:38,490 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:34:38,490 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:34:38,490 INFO sqlalchemy.engine.Engine [cached since 387.6s ago] (UUID('d88ce5ba-e6ad-42c2-b196-dfdc8a78ddc8'),)
2026-02-18 17:34:38,490 - sqlalchemy.engine.Engine - INFO - [cached since 387.6s ago] (UUID('d88ce5ba-e6ad-42c2-b196-dfdc8a78ddc8'),)
2026-02-18 17:34:38,493 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:34:38,493 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:34:38,493 INFO sqlalchemy.engine.Engine [cached since 387.6s ago] ('[0.13914552330970764,0.19189491868019104,-3.0217790603637695,-0.9558179974555969,1.6557679176330566,-0.6961725950241089,-0.05708131566643715,0.453102 ... (14832 characters truncated) ... 779907,0.08703044801950455,-0.47075390815734863,0.15684227645397186,-0.9534240961074829,-1.9188246726989746,-0.543213963508606,-0.052666932344436646]', UUID('d88ce5ba-e6ad-42c2-b196-dfdc8a78ddc8'))
2026-02-18 17:34:38,493 - sqlalchemy.engine.Engine - INFO - [cached since 387.6s ago] ('[0.13914552330970764,0.19189491868019104,-3.0217790603637695,-0.9558179974555969,1.6557679176330566,-0.6961725950241089,-0.05708131566643715,0.453102 ... (14832 characters truncated) ... 779907,0.08703044801950455,-0.47075390815734863,0.15684227645397186,-0.9534240961074829,-1.9188246726989746,-0.543213963508606,-0.052666932344436646]', UUID('d88ce5ba-e6ad-42c2-b196-dfdc8a78ddc8'))
2026-02-18 17:34:38,496 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message d88ce5ba-e6ad-42c2-b196-dfdc8a78ddc8
2026-02-18 17:34:48,726 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:34:48,727 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: 1. Define recursion as a programming technique where a function calls itself repeatedly until it reaches a base case.
2. Identify the key elements: 
   - A recursive call to the same function
   - A t...
2026-02-18 17:34:48,727 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 planner: 6 steps  ['Define recursion as a programming technique where a function calls itself repeatedly until it reaches a base case.', 'Identify the key elements:', '- A recursive call to the same function', '- A termination condition (base case)', 'Explain how the process repeats, using the base case as a starting point, until it returns to the original function call.', 'Provide an example of a simple recursive algorithm, such as calculating factorial or finding the sum of elements in a list.']
2026-02-18 17:34:51,829 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:34:51,830 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: INTENT: FILESYSTEM
COMPLEXITY: COMPLEX...
2026-02-18 17:34:51,830 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 classifier: intent=FILESYSTEM, complexity=COMPLEX (raw: 'INTENT: FILESYSTEM\nCOMPLEXITY: COMPLEX')
2026-02-18 17:34:51,830 - chatbot_ai_system.orchestrator - INFO - Phase 4: intent='FILESYSTEM', complexity='COMPLEX'
2026-02-18 17:34:51,830 - chatbot_ai_system.orchestrator - INFO - Phase 5: Selected 8 tools: ['read_file', 'read_text_file', 'read_media_file', 'read_multiple_files', 'write_file', 'edit_file', 'create_directory', 'list_directory']
2026-02-18 17:34:51,831 - chatbot_ai_system.orchestrator - INFO - Phase 5.5: Routing to agentic Plan+ReAct engine
2026-02-18 17:35:07,792 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:35:07,878 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 1: sequentialthinking completed in 0.00s
2026-02-18 17:35:23,876 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:35:23,877 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: Here is a step-by-step plan to read the specified Markdown files and summarize their key differences:

1. Create a new directory named `docs` if it does not already exist.
2. Navigate into the `docs` ...
2026-02-18 17:35:23,877 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 planner: 6 steps  ['Here is a step-by-step plan to read the specified Markdown files and summarize their key differences:', 'Create a new directory named `docs` if it does not already exist.', 'Navigate into the `docs` directory using the `cd` command.', 'Read the contents of `phase_5.0.md` using the `read_file` function.', 'Read the contents of `phase_4.1.md` using the `read_file` function.', 'Parse the Markdown text to extract key differences between the two files.']
2026-02-18 17:35:37,838 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"


  Thought 2/6 

 Define recursion as a programming technique where a function calls itself repeatedly until it reaches a base case.   

2026-02-18 17:35:37,931 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 2: sequentialthinking completed in 0.00s
2026-02-18 17:35:50,811 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:35:50,912 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 1: list_directory completed in 0.01s
2026-02-18 17:36:04,054 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"


  Thought 1/6 

 A recursive call to the same function   

2026-02-18 17:36:04,142 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 3: sequentialthinking completed in 0.00s
2026-02-18 17:36:18,340 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:36:18,500 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 2: create_directory completed in 0.01s
2026-02-18 17:36:32,801 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"


  Thought 1/6 

 A termination condition (base case)   

2026-02-18 17:36:32,899 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 4: sequentialthinking completed in 0.01s
2026-02-18 17:36:47,423 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:36:47,505 - chatbot_ai_system.tools.mcp_client - INFO - Using cached result for filesystem:create_directory
2026-02-18 17:36:47,505 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 3: create_directory completed in 0.00s
2026-02-18 17:37:04,502 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"


  Thought 5/6 

 The process repeats by recursively calling the same function with a new input until it reaches the base case, which triggers termination and returns to the original function call.   

2026-02-18 17:37:04,589 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 5: sequentialthinking completed in 0.00s
2026-02-18 17:37:20,626 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:37:20,727 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 4: read_file completed in 0.01s
2026-02-18 17:37:34,961 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:37:35,041 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5: Completed in 6 rounds, 166.3s
2026-02-18 17:37:35,042 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:37:35,042 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:37:35,042 INFO sqlalchemy.engine.Engine [cached since 571.9s ago] (UUID('7477bc75-87ab-4bbd-88c3-b67f02e23684'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, '{"name": "math.factorial", "parameters": {"n": "5"}}', 'null', None, '{"model": "llama3.2", "type": "agentic", "plan": ["Define recursion as a programming technique where a function calls itself repeatedly until it reac ... (236 characters truncated) ... inal function call.", "Provide an example of a simple recursive algorithm, such as calculating factorial or finding the sum of elements in a list."]}', 2310, 18, 'llama3.2', None, None, None, 8, datetime.datetime(2026, 2, 18, 8, 37, 35, 42434))
2026-02-18 17:37:35,042 - sqlalchemy.engine.Engine - INFO - [cached since 571.9s ago] (UUID('7477bc75-87ab-4bbd-88c3-b67f02e23684'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, '{"name": "math.factorial", "parameters": {"n": "5"}}', 'null', None, '{"model": "llama3.2", "type": "agentic", "plan": ["Define recursion as a programming technique where a function calls itself repeatedly until it reac ... (236 characters truncated) ... inal function call.", "Provide an example of a simple recursive algorithm, such as calculating factorial or finding the sum of elements in a list."]}', 2310, 18, 'llama3.2', None, None, None, 8, datetime.datetime(2026, 2, 18, 8, 37, 35, 42434))
2026-02-18 17:37:35,044 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:37:35,044 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:37:35,044 INFO sqlalchemy.engine.Engine [cached since 571.9s ago] (UUID('7477bc75-87ab-4bbd-88c3-b67f02e23684'),)
2026-02-18 17:37:35,044 - sqlalchemy.engine.Engine - INFO - [cached since 571.9s ago] (UUID('7477bc75-87ab-4bbd-88c3-b67f02e23684'),)
2026-02-18 17:37:35,045 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:37:35,045 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:37:35,045 - chatbot_ai_system.orchestrator - ERROR - Failed to embed user message at seq 7: This session is in 'prepared' state; no further SQL can be emitted within this transaction.
INFO:     127.0.0.1:60884 - "POST /api/chat HTTP/1.1" 200 OK
2026-02-18 17:37:35,074 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:37:35,074 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:37:35,074 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:37:35,074 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:37:35,074 INFO sqlalchemy.engine.Engine [cached since 571.9s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:37:35,074 - sqlalchemy.engine.Engine - INFO - [cached since 571.9s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:37:35,076 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:37:35,076 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:37:35,076 INFO sqlalchemy.engine.Engine [cached since 571.9s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:37:35,076 - sqlalchemy.engine.Engine - INFO - [cached since 571.9s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:37:35,077 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:37:35,077 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:37:35,077 INFO sqlalchemy.engine.Engine [cached since 571.9s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:37:35,077 - sqlalchemy.engine.Engine - INFO - [cached since 571.9s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:37:35,079 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:37:35,079 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:37:35,079 INFO sqlalchemy.engine.Engine [cached since 571.9s ago] (UUID('0205154a-f2f4-42c3-9228-0f1fa9787fa0'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'What is the boiling point of water?', 'null', None, 'null', None, None, None, None, None, None, 9, datetime.datetime(2026, 2, 18, 8, 37, 35, 79163))
2026-02-18 17:37:35,079 - sqlalchemy.engine.Engine - INFO - [cached since 571.9s ago] (UUID('0205154a-f2f4-42c3-9228-0f1fa9787fa0'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'What is the boiling point of water?', 'null', None, 'null', None, None, None, None, None, None, 9, datetime.datetime(2026, 2, 18, 8, 37, 35, 79163))
2026-02-18 17:37:35,080 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:37:35,080 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:37:35,080 INFO sqlalchemy.engine.Engine [cached since 571.9s ago] (UUID('0205154a-f2f4-42c3-9228-0f1fa9787fa0'),)
2026-02-18 17:37:35,080 - sqlalchemy.engine.Engine - INFO - [cached since 571.9s ago] (UUID('0205154a-f2f4-42c3-9228-0f1fa9787fa0'),)
2026-02-18 17:37:35,090 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:37:35,090 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:37:35,092 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:37:35,092 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:37:35,092 INFO sqlalchemy.engine.Engine SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:37:35,092 - sqlalchemy.engine.Engine - INFO - SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:37:35,092 INFO sqlalchemy.engine.Engine [cached since 571.9s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:37:35,092 - sqlalchemy.engine.Engine - INFO - [cached since 571.9s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:37:35,095 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:37:35,095 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:37:35,095 INFO sqlalchemy.engine.Engine [cached since 571.9s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:37:35,095 - sqlalchemy.engine.Engine - INFO - [cached since 571.9s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:37:35,096 - chatbot_ai_system.orchestrator - INFO - Using cached context for conversation 4933dbb2-767b-403b-a072-aab0873d7cd4
2026-02-18 17:37:35,373 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
2026-02-18 17:37:35,377 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:37:35,377 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:37:35,378 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:37:35,378 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:37:35,378 INFO sqlalchemy.engine.Engine [cached since 564.5s ago] (UUID('7477bc75-87ab-4bbd-88c3-b67f02e23684'),)
2026-02-18 17:37:35,378 - sqlalchemy.engine.Engine - INFO - [cached since 564.5s ago] (UUID('7477bc75-87ab-4bbd-88c3-b67f02e23684'),)
2026-02-18 17:37:35,381 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:37:35,381 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:37:35,381 INFO sqlalchemy.engine.Engine [cached since 564.5s ago] ('[0.9806222915649414,0.8421003222465515,-3.028557538986206,-1.1999462842941284,0.9906413555145264,-1.5408720970153809,0.9432982206344604,-1.5268410444 ... (14867 characters truncated) ... 642873764,-0.05042416974902153,0.6137359142303467,0.4232626259326935,-0.9302619099617004,-0.6000316739082336,-0.4665272831916809,0.26278501749038696]', UUID('7477bc75-87ab-4bbd-88c3-b67f02e23684'))
2026-02-18 17:37:35,381 - sqlalchemy.engine.Engine - INFO - [cached since 564.5s ago] ('[0.9806222915649414,0.8421003222465515,-3.028557538986206,-1.1999462842941284,0.9906413555145264,-1.5408720970153809,0.9432982206344604,-1.5268410444 ... (14867 characters truncated) ... 642873764,-0.05042416974902153,0.6137359142303467,0.4232626259326935,-0.9302619099617004,-0.6000316739082336,-0.4665272831916809,0.26278501749038696]', UUID('7477bc75-87ab-4bbd-88c3-b67f02e23684'))
2026-02-18 17:37:35,384 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message 7477bc75-87ab-4bbd-88c3-b67f02e23684
2026-02-18 17:37:45,393 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:37:45,486 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 5: read_file completed in 0.00s
2026-02-18 17:37:48,470 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:37:48,471 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: INTENT: GENERAL
COMPLEXITY: SIMPLE...
2026-02-18 17:37:48,471 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 classifier: intent=GENERAL, complexity=SIMPLE (raw: 'INTENT: GENERAL\nCOMPLEXITY: SIMPLE')
2026-02-18 17:37:48,471 - chatbot_ai_system.orchestrator - INFO - Phase 4: intent='GENERAL', complexity='SIMPLE'
2026-02-18 17:37:48,471 - chatbot_ai_system.orchestrator - INFO - Phase 5: Selected 0 tools: []
2026-02-18 17:37:48,473 - chatbot_ai_system.services.embedding - INFO - Using cached embedding
2026-02-18 17:37:48,475 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages JOIN conversations ON conversations.id = messages.conversation_id 
WHERE conversations.user_id = $1::UUID AND (messages.embedding <=> $2) < $3::FLOAT ORDER BY messages.embedding <=> $4 
 LIMIT $5::INTEGER
2026-02-18 17:37:48,475 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages JOIN conversations ON conversations.id = messages.conversation_id 
WHERE conversations.user_id = $1::UUID AND (messages.embedding <=> $2) < $3::FLOAT ORDER BY messages.embedding <=> $4 
 LIMIT $5::INTEGER
2026-02-18 17:37:48,475 INFO sqlalchemy.engine.Engine [cached since 582.9s ago] (UUID('00000000-0000-0000-0000-000000000000'), '[0.19699135422706604,0.08513922989368439,-3.7612526416778564,-0.4417237937450409,1.4433101415634155,0.8103687167167664,-0.7927743196487427,0.12585997 ... (14823 characters truncated) ... 72338867,-0.1375100165605545,1.2415573596954346,0.8095075488090515,-0.33940085768699646,-0.41276535391807556,-1.8206990957260132,-1.3899439573287964]', 0.30000000000000004, '[0.19699135422706604,0.08513922989368439,-3.7612526416778564,-0.4417237937450409,1.4433101415634155,0.8103687167167664,-0.7927743196487427,0.12585997 ... (14823 characters truncated) ... 72338867,-0.1375100165605545,1.2415573596954346,0.8095075488090515,-0.33940085768699646,-0.41276535391807556,-1.8206990957260132,-1.3899439573287964]', 3)
2026-02-18 17:37:48,475 - sqlalchemy.engine.Engine - INFO - [cached since 582.9s ago] (UUID('00000000-0000-0000-0000-000000000000'), '[0.19699135422706604,0.08513922989368439,-3.7612526416778564,-0.4417237937450409,1.4433101415634155,0.8103687167167664,-0.7927743196487427,0.12585997 ... (14823 characters truncated) ... 72338867,-0.1375100165605545,1.2415573596954346,0.8095075488090515,-0.33940085768699646,-0.41276535391807556,-1.8206990957260132,-1.3899439573287964]', 0.30000000000000004, '[0.19699135422706604,0.08513922989368439,-3.7612526416778564,-0.4417237937450409,1.4433101415634155,0.8103687167167664,-0.7927743196487427,0.12585997 ... (14823 characters truncated) ... 72338867,-0.1375100165605545,1.2415573596954346,0.8095075488090515,-0.33940085768699646,-0.41276535391807556,-1.8206990957260132,-1.3899439573287964]', 3)
2026-02-18 17:38:00,919 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:38:01,010 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 6: edit_file completed in 0.00s
2026-02-18 17:38:02,551 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:38:04,769 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:38:04,769 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:38:04,769 INFO sqlalchemy.engine.Engine [cached since 601.6s ago] (UUID('bffe87c6-b9b2-4f08-b87b-d84ac29e7a25'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, 'The boiling point of water is 100 degrees Celsius (C) or 212 degrees Fahrenheit (F) at standard atmospheric pressure.', 'null', None, '{"model": "llama3.2"}', 239, 29, 'llama3.2', None, None, None, 10, datetime.datetime(2026, 2, 18, 8, 38, 4, 769029))
2026-02-18 17:38:04,769 - sqlalchemy.engine.Engine - INFO - [cached since 601.6s ago] (UUID('bffe87c6-b9b2-4f08-b87b-d84ac29e7a25'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, 'The boiling point of water is 100 degrees Celsius (C) or 212 degrees Fahrenheit (F) at standard atmospheric pressure.', 'null', None, '{"model": "llama3.2"}', 239, 29, 'llama3.2', None, None, None, 10, datetime.datetime(2026, 2, 18, 8, 38, 4, 769029))
2026-02-18 17:38:04,772 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:38:04,772 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:38:04,772 INFO sqlalchemy.engine.Engine [cached since 601.6s ago] (UUID('bffe87c6-b9b2-4f08-b87b-d84ac29e7a25'),)
2026-02-18 17:38:04,772 - sqlalchemy.engine.Engine - INFO - [cached since 601.6s ago] (UUID('bffe87c6-b9b2-4f08-b87b-d84ac29e7a25'),)
2026-02-18 17:38:04,774 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:38:04,774 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:38:04,774 - chatbot_ai_system.orchestrator - ERROR - Failed to embed user message at seq 9: This session is in 'prepared' state; no further SQL can be emitted within this transaction.
INFO:     127.0.0.1:60954 - "POST /api/chat HTTP/1.1" 200 OK
2026-02-18 17:38:04,776 - chatbot_ai_system.services.embedding - INFO - Using cached embedding
2026-02-18 17:38:04,776 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:38:04,776 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:38:04,776 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:38:04,776 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:38:04,776 INFO sqlalchemy.engine.Engine [cached since 593.9s ago] (UUID('bffe87c6-b9b2-4f08-b87b-d84ac29e7a25'),)
2026-02-18 17:38:04,776 - sqlalchemy.engine.Engine - INFO - [cached since 593.9s ago] (UUID('bffe87c6-b9b2-4f08-b87b-d84ac29e7a25'),)
2026-02-18 17:38:04,777 - chatbot_ai_system.services.embedding - INFO - Using cached embedding
2026-02-18 17:38:04,777 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:38:04,777 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:38:04,777 INFO sqlalchemy.engine.Engine [cached since 593.9s ago] (UUID('bffe87c6-b9b2-4f08-b87b-d84ac29e7a25'),)
2026-02-18 17:38:04,777 - sqlalchemy.engine.Engine - INFO - [cached since 593.9s ago] (UUID('bffe87c6-b9b2-4f08-b87b-d84ac29e7a25'),)
2026-02-18 17:38:04,779 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:38:04,779 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:38:04,779 INFO sqlalchemy.engine.Engine [cached since 593.9s ago] ('[0.27172619104385376,0.34104934334754944,-4.061956882476807,-0.4190728962421417,0.8227186799049377,0.7813411355018616,-0.5646628141403198,1.080271005 ... (14887 characters truncated) ... 8653678894,-0.44934192299842834,1.457971453666687,0.277616411447525,-0.21050837635993958,-0.5229707956314087,-1.8255850076675415,-0.9529582262039185]', UUID('bffe87c6-b9b2-4f08-b87b-d84ac29e7a25'))
2026-02-18 17:38:04,779 - sqlalchemy.engine.Engine - INFO - [cached since 593.9s ago] ('[0.27172619104385376,0.34104934334754944,-4.061956882476807,-0.4190728962421417,0.8227186799049377,0.7813411355018616,-0.5646628141403198,1.080271005 ... (14887 characters truncated) ... 8653678894,-0.44934192299842834,1.457971453666687,0.277616411447525,-0.21050837635993958,-0.5229707956314087,-1.8255850076675415,-0.9529582262039185]', UUID('bffe87c6-b9b2-4f08-b87b-d84ac29e7a25'))
2026-02-18 17:38:04,780 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:38:04,780 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:38:04,780 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:38:04,780 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:38:04,780 INFO sqlalchemy.engine.Engine [cached since 601.6s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:38:04,780 - sqlalchemy.engine.Engine - INFO - [cached since 601.6s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:38:04,780 - chatbot_ai_system.orchestrator - ERROR - Failed to generate embedding for message bffe87c6-b9b2-4f08-b87b-d84ac29e7a25: Session is already flushing
2026-02-18 17:38:04,781 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:38:04,781 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:38:04,781 INFO sqlalchemy.engine.Engine [cached since 601.6s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:38:04,781 - sqlalchemy.engine.Engine - INFO - [cached since 601.6s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:38:04,782 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:38:04,782 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:38:04,782 INFO sqlalchemy.engine.Engine [cached since 601.6s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:38:04,782 - sqlalchemy.engine.Engine - INFO - [cached since 601.6s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:38:04,783 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message bffe87c6-b9b2-4f08-b87b-d84ac29e7a25
2026-02-18 17:38:04,783 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:38:04,783 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:38:04,783 INFO sqlalchemy.engine.Engine [cached since 601.6s ago] (UUID('e258dc6e-d35a-4627-b308-b006bc8fc45d'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'List the files in the current directory.', 'null', None, 'null', None, None, None, None, None, None, 11, datetime.datetime(2026, 2, 18, 8, 38, 4, 783709))
2026-02-18 17:38:04,783 - sqlalchemy.engine.Engine - INFO - [cached since 601.6s ago] (UUID('e258dc6e-d35a-4627-b308-b006bc8fc45d'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'List the files in the current directory.', 'null', None, 'null', None, None, None, None, None, None, 11, datetime.datetime(2026, 2, 18, 8, 38, 4, 783709))
2026-02-18 17:38:04,785 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:38:04,785 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:38:04,785 INFO sqlalchemy.engine.Engine [cached since 601.6s ago] (UUID('e258dc6e-d35a-4627-b308-b006bc8fc45d'),)
2026-02-18 17:38:04,785 - sqlalchemy.engine.Engine - INFO - [cached since 601.6s ago] (UUID('e258dc6e-d35a-4627-b308-b006bc8fc45d'),)
2026-02-18 17:38:04,785 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:38:04,785 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:38:04,786 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:38:04,786 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:38:04,787 INFO sqlalchemy.engine.Engine SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:38:04,787 - sqlalchemy.engine.Engine - INFO - SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:38:04,787 INFO sqlalchemy.engine.Engine [cached since 601.6s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:38:04,787 - sqlalchemy.engine.Engine - INFO - [cached since 601.6s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:38:04,788 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:38:04,788 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:38:04,788 INFO sqlalchemy.engine.Engine [cached since 601.6s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:38:04,788 - sqlalchemy.engine.Engine - INFO - [cached since 601.6s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:38:04,789 - chatbot_ai_system.orchestrator - INFO - Using cached context for conversation 4933dbb2-767b-403b-a072-aab0873d7cd4
2026-02-18 17:38:17,440 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:38:17,524 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 7: list_directory completed in 0.00s
2026-02-18 17:38:20,451 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:38:20,451 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: INTENT: FILESYSTEM
COMPLEXITY: SIMPLE...
2026-02-18 17:38:20,452 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 classifier: intent=FILESYSTEM, complexity=SIMPLE (raw: 'INTENT: FILESYSTEM\nCOMPLEXITY: SIMPLE')
2026-02-18 17:38:20,452 - chatbot_ai_system.orchestrator - INFO - Phase 4: intent='FILESYSTEM', complexity='SIMPLE'
2026-02-18 17:38:20,452 - chatbot_ai_system.orchestrator - INFO - Phase 5: Selected 2 tools: ['create_directory', 'directory_tree']
2026-02-18 17:38:20,454 - chatbot_ai_system.services.embedding - INFO - Using cached embedding
2026-02-18 17:38:20,456 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages JOIN conversations ON conversations.id = messages.conversation_id 
WHERE conversations.user_id = $1::UUID AND (messages.embedding <=> $2) < $3::FLOAT ORDER BY messages.embedding <=> $4 
 LIMIT $5::INTEGER
2026-02-18 17:38:20,456 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages JOIN conversations ON conversations.id = messages.conversation_id 
WHERE conversations.user_id = $1::UUID AND (messages.embedding <=> $2) < $3::FLOAT ORDER BY messages.embedding <=> $4 
 LIMIT $5::INTEGER
2026-02-18 17:38:20,456 INFO sqlalchemy.engine.Engine [cached since 614.9s ago] (UUID('00000000-0000-0000-0000-000000000000'), '[-0.3315875232219696,-0.5587307810783386,-3.4392151832580566,-1.2882859706878662,1.2043944597244263,-0.8357338309288025,-0.3484063148498535,0.8008560 ... (14878 characters truncated) ... 65410614,0.6226019859313965,0.23306655883789062,0.6630709171295166,-0.9646940231323242,-1.4851102828979492,-0.016868630424141884,-0.8409291505813599]', 0.30000000000000004, '[-0.3315875232219696,-0.5587307810783386,-3.4392151832580566,-1.2882859706878662,1.2043944597244263,-0.8357338309288025,-0.3484063148498535,0.8008560 ... (14878 characters truncated) ... 65410614,0.6226019859313965,0.23306655883789062,0.6630709171295166,-0.9646940231323242,-1.4851102828979492,-0.016868630424141884,-0.8409291505813599]', 3)
2026-02-18 17:38:20,456 - sqlalchemy.engine.Engine - INFO - [cached since 614.9s ago] (UUID('00000000-0000-0000-0000-000000000000'), '[-0.3315875232219696,-0.5587307810783386,-3.4392151832580566,-1.2882859706878662,1.2043944597244263,-0.8357338309288025,-0.3484063148498535,0.8008560 ... (14878 characters truncated) ... 65410614,0.6226019859313965,0.23306655883789062,0.6630709171295166,-0.9646940231323242,-1.4851102828979492,-0.016868630424141884,-0.8409291505813599]', 0.30000000000000004, '[-0.3315875232219696,-0.5587307810783386,-3.4392151832580566,-1.2882859706878662,1.2043944597244263,-0.8357338309288025,-0.3484063148498535,0.8008560 ... (14878 characters truncated) ... 65410614,0.6226019859313965,0.23306655883789062,0.6630709171295166,-0.9646940231323242,-1.4851102828979492,-0.016868630424141884,-0.8409291505813599]', 3)
2026-02-18 17:38:20,466 - chatbot_ai_system.orchestrator - INFO - Phase 5.5: Retrieved 3 similar messages.
2026-02-18 17:38:34,160 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:38:34,246 - chatbot_ai_system.tools.mcp_client - INFO - Using cached result for filesystem:list_directory
2026-02-18 17:38:34,246 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 8: list_directory completed in 0.00s
2026-02-18 17:38:39,156 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:38:39,239 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:38:39,239 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:38:39,239 INFO sqlalchemy.engine.Engine [cached since 636.1s ago] (UUID('175f24fa-14ee-4b54-9138-e905ebbf0e9a'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, '', '[{"id": "call_4hfrwqec", "function": {"name": "directory_tree", "arguments": {"excludePatterns": "[]", "path": "."}}, "type": "function"}]', None, '{"model": "llama3.2"}', 641, 23, 'llama3.2', None, None, None, 12, datetime.datetime(2026, 2, 18, 8, 38, 39, 238953))
2026-02-18 17:38:39,239 - sqlalchemy.engine.Engine - INFO - [cached since 636.1s ago] (UUID('175f24fa-14ee-4b54-9138-e905ebbf0e9a'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, '', '[{"id": "call_4hfrwqec", "function": {"name": "directory_tree", "arguments": {"excludePatterns": "[]", "path": "."}}, "type": "function"}]', None, '{"model": "llama3.2"}', 641, 23, 'llama3.2', None, None, None, 12, datetime.datetime(2026, 2, 18, 8, 38, 39, 238953))
2026-02-18 17:38:39,242 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:38:39,242 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:38:39,242 INFO sqlalchemy.engine.Engine [cached since 636.1s ago] (UUID('175f24fa-14ee-4b54-9138-e905ebbf0e9a'),)
2026-02-18 17:38:39,242 - sqlalchemy.engine.Engine - INFO - [cached since 636.1s ago] (UUID('175f24fa-14ee-4b54-9138-e905ebbf0e9a'),)
2026-02-18 17:38:39,243 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID AND messages.sequence_number = $2::INTEGER AND messages.role = $3::VARCHAR
2026-02-18 17:38:39,243 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID AND messages.sequence_number = $2::INTEGER AND messages.role = $3::VARCHAR
2026-02-18 17:38:39,243 INFO sqlalchemy.engine.Engine [cached since 499.8s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 11, <MessageRole.USER: 'user'>)
2026-02-18 17:38:39,243 - sqlalchemy.engine.Engine - INFO - [cached since 499.8s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 11, <MessageRole.USER: 'user'>)
2026-02-18 17:38:39,246 - chatbot_ai_system.services.embedding - INFO - Using cached embedding
2026-02-18 17:38:39,246 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:38:39,246 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:38:39,246 INFO sqlalchemy.engine.Engine [cached since 628.4s ago] (UUID('e258dc6e-d35a-4627-b308-b006bc8fc45d'),)
2026-02-18 17:38:39,246 - sqlalchemy.engine.Engine - INFO - [cached since 628.4s ago] (UUID('e258dc6e-d35a-4627-b308-b006bc8fc45d'),)
2026-02-18 17:38:39,247 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:38:39,247 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:38:39,247 INFO sqlalchemy.engine.Engine [cached since 636.1s ago] (UUID('0b53c2ea-4eee-4e28-86d7-8e9bff87b8c9'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.TOOL: 'tool'>, 'MCP error -32602: Input validation error: Invalid arguments for tool directory_tree: [\n  {\n    "expected": "array",\n    "code": "invalid_type",\n    "path": [\n      "excludePatterns"\n    ],\n    "message": "Invalid input: expected array, received string"\n  }\n]', 'null', 'call_4hfrwqec', 'null', None, None, None, None, None, None, 13, datetime.datetime(2026, 2, 18, 8, 38, 39, 246983))
2026-02-18 17:38:39,247 - sqlalchemy.engine.Engine - INFO - [cached since 636.1s ago] (UUID('0b53c2ea-4eee-4e28-86d7-8e9bff87b8c9'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.TOOL: 'tool'>, 'MCP error -32602: Input validation error: Invalid arguments for tool directory_tree: [\n  {\n    "expected": "array",\n    "code": "invalid_type",\n    "path": [\n      "excludePatterns"\n    ],\n    "message": "Invalid input: expected array, received string"\n  }\n]', 'null', 'call_4hfrwqec', 'null', None, None, None, None, None, None, 13, datetime.datetime(2026, 2, 18, 8, 38, 39, 246983))
2026-02-18 17:38:39,247 - chatbot_ai_system.orchestrator - ERROR - Failed to generate embedding for message e258dc6e-d35a-4627-b308-b006bc8fc45d: Session is already flushing
sys:1: SAWarning: Attribute history events accumulated on 1 previously clean instances within inner-flush event handlers have been reset, and will not result in database updates. Consider using set_committed_value() within inner-flush event handlers to avoid this warning.
2026-02-18 17:38:39,248 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:38:39,248 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:38:39,248 INFO sqlalchemy.engine.Engine [cached since 636.1s ago] (UUID('0b53c2ea-4eee-4e28-86d7-8e9bff87b8c9'),)
2026-02-18 17:38:39,248 - sqlalchemy.engine.Engine - INFO - [cached since 636.1s ago] (UUID('0b53c2ea-4eee-4e28-86d7-8e9bff87b8c9'),)
2026-02-18 17:39:03,115 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:39:33,547 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5: Force-synthesized after 8 rounds, 249.7s
2026-02-18 17:39:33,548 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:39:33,548 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:39:33,548 INFO sqlalchemy.engine.Engine [cached since 690.4s ago] (UUID('d65c4460-10f9-49d1-866f-ac9f179a6c9e'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.ASSISTANT: 'assistant'>, "Based on the steps completed, here is a comprehensive final answer to the original request:\n\nThe chatbot AI system has been upgraded to version 5.5 ... (1373 characters truncated) ... l, the chatbot AI system has been significantly improved with new features and capabilities, ensuring efficient and effective multimodal interaction.", 'null', None, '{"model": "llama3.2", "type": "agentic", "plan": ["Here is a step-by-step plan to read the specified Markdown files and summarize their key differenc ... (207 characters truncated) ...  "Read the contents of `phase_4.1.md` using the `read_file` function.", "Parse the Markdown text to extract key differences between the two files."]}', 4079, 340, 'llama3.2', None, None, None, 27, datetime.datetime(2026, 2, 18, 8, 39, 33, 548375))
2026-02-18 17:39:33,548 - sqlalchemy.engine.Engine - INFO - [cached since 690.4s ago] (UUID('d65c4460-10f9-49d1-866f-ac9f179a6c9e'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.ASSISTANT: 'assistant'>, "Based on the steps completed, here is a comprehensive final answer to the original request:\n\nThe chatbot AI system has been upgraded to version 5.5 ... (1373 characters truncated) ... l, the chatbot AI system has been significantly improved with new features and capabilities, ensuring efficient and effective multimodal interaction.", 'null', None, '{"model": "llama3.2", "type": "agentic", "plan": ["Here is a step-by-step plan to read the specified Markdown files and summarize their key differenc ... (207 characters truncated) ...  "Read the contents of `phase_4.1.md` using the `read_file` function.", "Parse the Markdown text to extract key differences between the two files."]}', 4079, 340, 'llama3.2', None, None, None, 27, datetime.datetime(2026, 2, 18, 8, 39, 33, 548375))
2026-02-18 17:39:33,551 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:39:33,551 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:39:33,551 INFO sqlalchemy.engine.Engine [cached since 690.4s ago] (UUID('d65c4460-10f9-49d1-866f-ac9f179a6c9e'),)
2026-02-18 17:39:33,551 - sqlalchemy.engine.Engine - INFO - [cached since 690.4s ago] (UUID('d65c4460-10f9-49d1-866f-ac9f179a6c9e'),)
2026-02-18 17:39:33,552 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:39:33,552 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:39:33,553 - chatbot_ai_system.orchestrator - ERROR - Failed to embed user message at seq 26: This session is in 'prepared' state; no further SQL can be emitted within this transaction.
INFO:     127.0.0.1:60897 - "POST /api/chat HTTP/1.1" 200 OK
2026-02-18 17:39:33,581 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:39:33,581 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:39:33,581 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:39:33,581 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:39:33,581 INFO sqlalchemy.engine.Engine [cached since 690.4s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:39:33,581 - sqlalchemy.engine.Engine - INFO - [cached since 690.4s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:39:33,586 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:39:33,586 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:39:33,586 INFO sqlalchemy.engine.Engine [cached since 690.4s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:39:33,586 - sqlalchemy.engine.Engine - INFO - [cached since 690.4s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:39:33,587 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:39:33,587 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:39:33,587 INFO sqlalchemy.engine.Engine [cached since 690.4s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), 50)
2026-02-18 17:39:33,587 - sqlalchemy.engine.Engine - INFO - [cached since 690.4s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), 50)
2026-02-18 17:39:33,591 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:39:33,591 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:39:33,591 INFO sqlalchemy.engine.Engine [cached since 690.4s ago] (UUID('eb7e3471-0872-4ad0-99a3-6fa5bb25a22d'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.USER: 'user'>, 'Find all python files in scripts/ and tell me which one is the largest.', 'null', None, 'null', None, None, None, None, None, None, 28, datetime.datetime(2026, 2, 18, 8, 39, 33, 591157))
2026-02-18 17:39:33,591 - sqlalchemy.engine.Engine - INFO - [cached since 690.4s ago] (UUID('eb7e3471-0872-4ad0-99a3-6fa5bb25a22d'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.USER: 'user'>, 'Find all python files in scripts/ and tell me which one is the largest.', 'null', None, 'null', None, None, None, None, None, None, 28, datetime.datetime(2026, 2, 18, 8, 39, 33, 591157))
2026-02-18 17:39:33,592 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:39:33,592 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:39:33,592 INFO sqlalchemy.engine.Engine [cached since 690.4s ago] (UUID('eb7e3471-0872-4ad0-99a3-6fa5bb25a22d'),)
2026-02-18 17:39:33,592 - sqlalchemy.engine.Engine - INFO - [cached since 690.4s ago] (UUID('eb7e3471-0872-4ad0-99a3-6fa5bb25a22d'),)
2026-02-18 17:39:33,598 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:39:33,598 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:39:33,600 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:39:33,600 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:39:33,600 INFO sqlalchemy.engine.Engine SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:39:33,600 - sqlalchemy.engine.Engine - INFO - SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:39:33,601 INFO sqlalchemy.engine.Engine [cached since 690.4s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:39:33,601 - sqlalchemy.engine.Engine - INFO - [cached since 690.4s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:39:33,602 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:39:33,602 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:39:33,602 INFO sqlalchemy.engine.Engine [cached since 690.4s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:39:33,602 - sqlalchemy.engine.Engine - INFO - [cached since 690.4s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:39:33,604 - chatbot_ai_system.orchestrator - INFO - Using cached context for conversation 36c8c289-9d0b-4ed2-88d9-e45d46389920
2026-02-18 17:39:34,419 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
2026-02-18 17:39:34,468 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:39:34,468 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:39:34,468 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:39:34,468 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:39:34,469 INFO sqlalchemy.engine.Engine [cached since 683.6s ago] (UUID('d65c4460-10f9-49d1-866f-ac9f179a6c9e'),)
2026-02-18 17:39:34,469 - sqlalchemy.engine.Engine - INFO - [cached since 683.6s ago] (UUID('d65c4460-10f9-49d1-866f-ac9f179a6c9e'),)
2026-02-18 17:39:34,483 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:39:34,483 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:39:34,483 INFO sqlalchemy.engine.Engine [cached since 683.6s ago] ('[-0.9820802211761475,0.8196581602096558,-2.4545905590057373,-1.0270642042160034,0.9522234201431274,-0.5357878804206848,0.10169447958469391,0.14769466 ... (14890 characters truncated) ... 981018,0.24564681947231293,0.8103218674659729,-0.2186567634344101,-0.44582435488700867,-0.1385551542043686,-0.16104812920093536,-0.42441385984420776]', UUID('d65c4460-10f9-49d1-866f-ac9f179a6c9e'))
2026-02-18 17:39:34,483 - sqlalchemy.engine.Engine - INFO - [cached since 683.6s ago] ('[-0.9820802211761475,0.8196581602096558,-2.4545905590057373,-1.0270642042160034,0.9522234201431274,-0.5357878804206848,0.10169447958469391,0.14769466 ... (14890 characters truncated) ... 981018,0.24564681947231293,0.8103218674659729,-0.2186567634344101,-0.44582435488700867,-0.1385551542043686,-0.16104812920093536,-0.42441385984420776]', UUID('d65c4460-10f9-49d1-866f-ac9f179a6c9e'))
2026-02-18 17:39:34,485 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message d65c4460-10f9-49d1-866f-ac9f179a6c9e
2026-02-18 17:39:36,447 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:39:41,009 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:39:41,009 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:39:41,009 INFO sqlalchemy.engine.Engine [cached since 697.8s ago] (UUID('4e5a8b39-5b87-4946-a056-c902bf36f1c6'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, 'It seems like the `directory_tree` tool requires an array of exclude patterns as input. Since we only want to list files in the current directory, we can use an empty array.\n\nLet me try again:\n\n{"name": "ls", "parameters": {"path":"."}}', 'null', None, '{"model": "llama3.2", "type": "synthesis"}', 449, 57, 'llama3.2', None, None, None, 14, datetime.datetime(2026, 2, 18, 8, 39, 41, 9474))
2026-02-18 17:39:41,009 - sqlalchemy.engine.Engine - INFO - [cached since 697.8s ago] (UUID('4e5a8b39-5b87-4946-a056-c902bf36f1c6'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, 'It seems like the `directory_tree` tool requires an array of exclude patterns as input. Since we only want to list files in the current directory, we can use an empty array.\n\nLet me try again:\n\n{"name": "ls", "parameters": {"path":"."}}', 'null', None, '{"model": "llama3.2", "type": "synthesis"}', 449, 57, 'llama3.2', None, None, None, 14, datetime.datetime(2026, 2, 18, 8, 39, 41, 9474))
2026-02-18 17:39:41,012 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:39:41,012 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:39:41,012 INFO sqlalchemy.engine.Engine [cached since 697.8s ago] (UUID('4e5a8b39-5b87-4946-a056-c902bf36f1c6'),)
2026-02-18 17:39:41,012 - sqlalchemy.engine.Engine - INFO - [cached since 697.8s ago] (UUID('4e5a8b39-5b87-4946-a056-c902bf36f1c6'),)
2026-02-18 17:39:41,014 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:39:41,014 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:60969 - "POST /api/chat HTTP/1.1" 200 OK
2026-02-18 17:39:41,043 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:39:41,043 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:39:41,043 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:39:41,043 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:39:41,043 INFO sqlalchemy.engine.Engine [cached since 697.9s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:39:41,043 - sqlalchemy.engine.Engine - INFO - [cached since 697.9s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:39:41,044 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:39:41,044 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:39:41,045 INFO sqlalchemy.engine.Engine [cached since 697.9s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:39:41,045 - sqlalchemy.engine.Engine - INFO - [cached since 697.9s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:39:41,046 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:39:41,046 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:39:41,046 INFO sqlalchemy.engine.Engine [cached since 697.9s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:39:41,046 - sqlalchemy.engine.Engine - INFO - [cached since 697.9s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:39:41,048 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:39:41,048 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:39:41,048 INFO sqlalchemy.engine.Engine [cached since 697.9s ago] (UUID('96cb741d-0ac6-4922-9d2d-624451010a6e'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'Read the contents of requirements.txt.', 'null', None, 'null', None, None, None, None, None, None, 15, datetime.datetime(2026, 2, 18, 8, 39, 41, 48088))
2026-02-18 17:39:41,048 - sqlalchemy.engine.Engine - INFO - [cached since 697.9s ago] (UUID('96cb741d-0ac6-4922-9d2d-624451010a6e'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'Read the contents of requirements.txt.', 'null', None, 'null', None, None, None, None, None, None, 15, datetime.datetime(2026, 2, 18, 8, 39, 41, 48088))
2026-02-18 17:39:41,049 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:39:41,049 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:39:41,049 INFO sqlalchemy.engine.Engine [cached since 697.9s ago] (UUID('96cb741d-0ac6-4922-9d2d-624451010a6e'),)
2026-02-18 17:39:41,049 - sqlalchemy.engine.Engine - INFO - [cached since 697.9s ago] (UUID('96cb741d-0ac6-4922-9d2d-624451010a6e'),)
2026-02-18 17:39:41,049 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:39:41,049 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:39:41,051 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:39:41,051 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:39:41,051 INFO sqlalchemy.engine.Engine SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:39:41,051 - sqlalchemy.engine.Engine - INFO - SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:39:41,051 INFO sqlalchemy.engine.Engine [cached since 697.9s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:39:41,051 - sqlalchemy.engine.Engine - INFO - [cached since 697.9s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:39:41,053 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:39:41,053 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:39:41,053 INFO sqlalchemy.engine.Engine [cached since 697.9s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:39:41,053 - sqlalchemy.engine.Engine - INFO - [cached since 697.9s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:39:41,054 - chatbot_ai_system.orchestrator - INFO - Using cached context for conversation 4933dbb2-767b-403b-a072-aab0873d7cd4
2026-02-18 17:39:41,460 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
2026-02-18 17:39:41,518 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:39:41,518 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:39:41,519 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:39:41,519 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:39:41,519 INFO sqlalchemy.engine.Engine [cached since 690.7s ago] (UUID('4e5a8b39-5b87-4946-a056-c902bf36f1c6'),)
2026-02-18 17:39:41,519 - sqlalchemy.engine.Engine - INFO - [cached since 690.7s ago] (UUID('4e5a8b39-5b87-4946-a056-c902bf36f1c6'),)
2026-02-18 17:39:41,540 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:39:41,540 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:39:41,540 INFO sqlalchemy.engine.Engine [cached since 690.7s ago] ('[0.30586183071136475,-0.508472740650177,-2.23189377784729,-2.0890181064605713,-0.06720157712697983,-1.0813432931900024,0.25491443276405334,0.15527266 ... (14926 characters truncated) ... 85673713684,0.04382968321442604,-0.11655423790216446,1.152815341949463,-0.4052732288837433,-1.04380464553833,-0.4709489047527313,-0.3683461546897888]', UUID('4e5a8b39-5b87-4946-a056-c902bf36f1c6'))
2026-02-18 17:39:41,540 - sqlalchemy.engine.Engine - INFO - [cached since 690.7s ago] ('[0.30586183071136475,-0.508472740650177,-2.23189377784729,-2.0890181064605713,-0.06720157712697983,-1.0813432931900024,0.25491443276405334,0.15527266 ... (14926 characters truncated) ... 85673713684,0.04382968321442604,-0.11655423790216446,1.152815341949463,-0.4052732288837433,-1.04380464553833,-0.4709489047527313,-0.3683461546897888]', UUID('4e5a8b39-5b87-4946-a056-c902bf36f1c6'))
2026-02-18 17:39:41,542 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message 4e5a8b39-5b87-4946-a056-c902bf36f1c6
2026-02-18 17:39:44,248 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:39:44,249 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: INTENT: FILESYSTEM
COMPLEXITY: SIMPLE...
2026-02-18 17:39:44,249 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 classifier: intent=FILESYSTEM, complexity=SIMPLE (raw: 'INTENT: FILESYSTEM\nCOMPLEXITY: SIMPLE')
2026-02-18 17:39:44,249 - chatbot_ai_system.orchestrator - INFO - Phase 4: intent='FILESYSTEM', complexity='SIMPLE'
2026-02-18 17:39:44,250 - chatbot_ai_system.orchestrator - INFO - Phase 5: Selected 1 tools: ['search_nodes']
2026-02-18 17:39:45,544 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:39:45,544 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: INTENT: FILESYSTEM
COMPLEXITY: SIMPLE...
2026-02-18 17:39:45,544 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 classifier: intent=FILESYSTEM, complexity=SIMPLE (raw: 'INTENT: FILESYSTEM\nCOMPLEXITY: SIMPLE')
2026-02-18 17:39:45,544 - chatbot_ai_system.orchestrator - INFO - Phase 4: intent='FILESYSTEM', complexity='SIMPLE'
2026-02-18 17:39:45,545 - chatbot_ai_system.orchestrator - INFO - Phase 5: Selected 0 tools: []
2026-02-18 17:39:57,687 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:40:02,222 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:40:02,222 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:40:02,222 INFO sqlalchemy.engine.Engine [cached since 719s ago] (UUID('53e0612e-9977-4b85-8ebd-e7ab0822334a'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.ASSISTANT: 'assistant'>, '', '[{"id": "call_2jr99h7l", "function": {"name": "search_nodes", "arguments": {"c": "[[\\\\\\\\n+\\\\\\\\s]+]", "f": "\\\\n", "query": "scripts/.*\\\\.( ... (96 characters truncated) ... e": "search_nodes", "arguments": {"c": "[[\\\\\\\\n+\\\\\\\\s]+]", "query": "scripts/(\\\\w+)\\\\.py$ | size $1", "v": "($1)"}}, "type": "function"}]', None, '{"model": "llama3.2"}', 1361, 102, 'llama3.2', None, None, None, 29, datetime.datetime(2026, 2, 18, 8, 40, 2, 222419))
2026-02-18 17:40:02,222 - sqlalchemy.engine.Engine - INFO - [cached since 719s ago] (UUID('53e0612e-9977-4b85-8ebd-e7ab0822334a'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.ASSISTANT: 'assistant'>, '', '[{"id": "call_2jr99h7l", "function": {"name": "search_nodes", "arguments": {"c": "[[\\\\\\\\n+\\\\\\\\s]+]", "f": "\\\\n", "query": "scripts/.*\\\\.( ... (96 characters truncated) ... e": "search_nodes", "arguments": {"c": "[[\\\\\\\\n+\\\\\\\\s]+]", "query": "scripts/(\\\\w+)\\\\.py$ | size $1", "v": "($1)"}}, "type": "function"}]', None, '{"model": "llama3.2"}', 1361, 102, 'llama3.2', None, None, None, 29, datetime.datetime(2026, 2, 18, 8, 40, 2, 222419))
2026-02-18 17:40:02,223 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:02,223 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:02,224 INFO sqlalchemy.engine.Engine [cached since 719s ago] (UUID('53e0612e-9977-4b85-8ebd-e7ab0822334a'),)
2026-02-18 17:40:02,224 - sqlalchemy.engine.Engine - INFO - [cached since 719s ago] (UUID('53e0612e-9977-4b85-8ebd-e7ab0822334a'),)
2026-02-18 17:40:02,225 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID AND messages.sequence_number = $2::INTEGER AND messages.role = $3::VARCHAR
2026-02-18 17:40:02,225 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID AND messages.sequence_number = $2::INTEGER AND messages.role = $3::VARCHAR
2026-02-18 17:40:02,225 INFO sqlalchemy.engine.Engine [cached since 582.8s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), 28, <MessageRole.USER: 'user'>)
2026-02-18 17:40:02,225 - sqlalchemy.engine.Engine - INFO - [cached since 582.8s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), 28, <MessageRole.USER: 'user'>)
2026-02-18 17:40:02,254 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:40:02,254 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:40:02,254 INFO sqlalchemy.engine.Engine [cached since 719.1s ago] (UUID('b6f21aef-7477-4777-9568-a67795c2af01'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.TOOL: 'tool'>, '{\n  "entities": [],\n  "relations": []\n}', 'null', 'call_2jr99h7l', 'null', None, None, None, None, None, None, 30, datetime.datetime(2026, 2, 18, 8, 40, 2, 254745))
2026-02-18 17:40:02,254 - sqlalchemy.engine.Engine - INFO - [cached since 719.1s ago] (UUID('b6f21aef-7477-4777-9568-a67795c2af01'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.TOOL: 'tool'>, '{\n  "entities": [],\n  "relations": []\n}', 'null', 'call_2jr99h7l', 'null', None, None, None, None, None, None, 30, datetime.datetime(2026, 2, 18, 8, 40, 2, 254745))
2026-02-18 17:40:02,255 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:02,255 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:02,256 INFO sqlalchemy.engine.Engine [cached since 719.1s ago] (UUID('b6f21aef-7477-4777-9568-a67795c2af01'),)
2026-02-18 17:40:02,256 - sqlalchemy.engine.Engine - INFO - [cached since 719.1s ago] (UUID('b6f21aef-7477-4777-9568-a67795c2af01'),)
2026-02-18 17:40:02,260 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:40:02,260 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:40:02,260 INFO sqlalchemy.engine.Engine [cached since 719.1s ago] (UUID('7975fc1d-e078-4887-8897-b7b13b6c111f'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.TOOL: 'tool'>, '{\n  "entities": [],\n  "relations": []\n}', 'null', 'call_a6hmtg1w', 'null', None, None, None, None, None, None, 31, datetime.datetime(2026, 2, 18, 8, 40, 2, 260275))
2026-02-18 17:40:02,260 - sqlalchemy.engine.Engine - INFO - [cached since 719.1s ago] (UUID('7975fc1d-e078-4887-8897-b7b13b6c111f'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.TOOL: 'tool'>, '{\n  "entities": [],\n  "relations": []\n}', 'null', 'call_a6hmtg1w', 'null', None, None, None, None, None, None, 31, datetime.datetime(2026, 2, 18, 8, 40, 2, 260275))
2026-02-18 17:40:02,261 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:02,261 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:02,261 INFO sqlalchemy.engine.Engine [cached since 719.1s ago] (UUID('7975fc1d-e078-4887-8897-b7b13b6c111f'),)
2026-02-18 17:40:02,261 - sqlalchemy.engine.Engine - INFO - [cached since 719.1s ago] (UUID('7975fc1d-e078-4887-8897-b7b13b6c111f'),)
2026-02-18 17:40:02,524 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
2026-02-18 17:40:02,528 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:02,528 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:02,528 INFO sqlalchemy.engine.Engine [cached since 711.7s ago] (UUID('eb7e3471-0872-4ad0-99a3-6fa5bb25a22d'),)
2026-02-18 17:40:02,528 - sqlalchemy.engine.Engine - INFO - [cached since 711.7s ago] (UUID('eb7e3471-0872-4ad0-99a3-6fa5bb25a22d'),)
2026-02-18 17:40:02,532 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:40:02,532 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:40:02,532 INFO sqlalchemy.engine.Engine [cached since 711.7s ago] ('[0.14915792644023895,1.3681740760803223,-2.329519748687744,-0.7884991765022278,-0.10051868110895157,-0.9702225923538208,-1.1251213550567627,0.6216718 ... (14879 characters truncated) ... 676819,-0.22201178967952728,0.586165726184845,-0.36987051367759705,0.45384564995765686,-0.4895265996456146,-0.026820143684744835,-0.7348940968513489]', UUID('eb7e3471-0872-4ad0-99a3-6fa5bb25a22d'))
2026-02-18 17:40:02,532 - sqlalchemy.engine.Engine - INFO - [cached since 711.7s ago] ('[0.14915792644023895,1.3681740760803223,-2.329519748687744,-0.7884991765022278,-0.10051868110895157,-0.9702225923538208,-1.1251213550567627,0.6216718 ... (14879 characters truncated) ... 676819,-0.22201178967952728,0.586165726184845,-0.36987051367759705,0.45384564995765686,-0.4895265996456146,-0.026820143684744835,-0.7348940968513489]', UUID('eb7e3471-0872-4ad0-99a3-6fa5bb25a22d'))
2026-02-18 17:40:02,534 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message eb7e3471-0872-4ad0-99a3-6fa5bb25a22d
2026-02-18 17:40:05,136 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:40:11,615 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:40:11,615 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:40:11,615 INFO sqlalchemy.engine.Engine [cached since 728.4s ago] (UUID('0311c484-8417-4d25-88b3-e564c04318f2'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, "I don't have direct access to the file contents. However, I can suggest that you run the command `cat requirements.txt` in your terminal or command p ... (64 characters truncated) ...  you'd like, I can also help you parse the contents of the file and extract specific information, such as dependencies or versions. Just let me know!", 'null', None, '{"model": "llama3.2"}', 493, 77, 'llama3.2', None, None, None, 16, datetime.datetime(2026, 2, 18, 8, 40, 11, 615783))
2026-02-18 17:40:11,615 - sqlalchemy.engine.Engine - INFO - [cached since 728.4s ago] (UUID('0311c484-8417-4d25-88b3-e564c04318f2'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, "I don't have direct access to the file contents. However, I can suggest that you run the command `cat requirements.txt` in your terminal or command p ... (64 characters truncated) ...  you'd like, I can also help you parse the contents of the file and extract specific information, such as dependencies or versions. Just let me know!", 'null', None, '{"model": "llama3.2"}', 493, 77, 'llama3.2', None, None, None, 16, datetime.datetime(2026, 2, 18, 8, 40, 11, 615783))
2026-02-18 17:40:11,618 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:11,618 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:11,618 INFO sqlalchemy.engine.Engine [cached since 728.4s ago] (UUID('0311c484-8417-4d25-88b3-e564c04318f2'),)
2026-02-18 17:40:11,618 - sqlalchemy.engine.Engine - INFO - [cached since 728.4s ago] (UUID('0311c484-8417-4d25-88b3-e564c04318f2'),)
2026-02-18 17:40:11,619 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:40:11,619 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:40:11,620 - chatbot_ai_system.orchestrator - ERROR - Failed to embed user message at seq 15: This session is in 'prepared' state; no further SQL can be emitted within this transaction.
INFO:     127.0.0.1:61002 - "POST /api/chat HTTP/1.1" 200 OK
2026-02-18 17:40:11,677 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:40:11,677 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:40:11,677 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:40:11,677 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:40:11,677 INFO sqlalchemy.engine.Engine [cached since 728.5s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:40:11,677 - sqlalchemy.engine.Engine - INFO - [cached since 728.5s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:40:11,679 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:40:11,679 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:40:11,679 INFO sqlalchemy.engine.Engine [cached since 728.5s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:40:11,679 - sqlalchemy.engine.Engine - INFO - [cached since 728.5s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:40:11,680 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:40:11,680 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:40:11,680 INFO sqlalchemy.engine.Engine [cached since 728.5s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:40:11,680 - sqlalchemy.engine.Engine - INFO - [cached since 728.5s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:40:11,682 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:40:11,682 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:40:11,682 INFO sqlalchemy.engine.Engine [cached since 728.5s ago] (UUID('cf34f199-7f24-498a-bc24-eb7577e20e43'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, "What files are in the 'docs' folder?", 'null', None, 'null', None, None, None, None, None, None, 17, datetime.datetime(2026, 2, 18, 8, 40, 11, 682596))
2026-02-18 17:40:11,682 - sqlalchemy.engine.Engine - INFO - [cached since 728.5s ago] (UUID('cf34f199-7f24-498a-bc24-eb7577e20e43'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, "What files are in the 'docs' folder?", 'null', None, 'null', None, None, None, None, None, None, 17, datetime.datetime(2026, 2, 18, 8, 40, 11, 682596))
2026-02-18 17:40:11,684 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:11,684 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:11,684 INFO sqlalchemy.engine.Engine [cached since 728.5s ago] (UUID('cf34f199-7f24-498a-bc24-eb7577e20e43'),)
2026-02-18 17:40:11,684 - sqlalchemy.engine.Engine - INFO - [cached since 728.5s ago] (UUID('cf34f199-7f24-498a-bc24-eb7577e20e43'),)
2026-02-18 17:40:11,685 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:40:11,685 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:40:11,687 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:40:11,687 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:40:11,687 INFO sqlalchemy.engine.Engine SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:40:11,687 - sqlalchemy.engine.Engine - INFO - SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:40:11,687 INFO sqlalchemy.engine.Engine [cached since 728.5s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:40:11,687 - sqlalchemy.engine.Engine - INFO - [cached since 728.5s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:40:11,688 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:40:11,688 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:40:11,688 INFO sqlalchemy.engine.Engine [cached since 728.5s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:40:11,688 - sqlalchemy.engine.Engine - INFO - [cached since 728.5s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:40:11,690 - chatbot_ai_system.orchestrator - INFO - Using cached context for conversation 4933dbb2-767b-403b-a072-aab0873d7cd4
2026-02-18 17:40:12,068 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
2026-02-18 17:40:12,110 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:40:12,110 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:40:12,110 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:12,110 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:12,110 INFO sqlalchemy.engine.Engine [cached since 721.3s ago] (UUID('0311c484-8417-4d25-88b3-e564c04318f2'),)
2026-02-18 17:40:12,110 - sqlalchemy.engine.Engine - INFO - [cached since 721.3s ago] (UUID('0311c484-8417-4d25-88b3-e564c04318f2'),)
2026-02-18 17:40:12,125 - sqlalchemy.pool.impl.AsyncAdaptedQueuePool - ERROR - The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x1159323f0>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
/Users/mk/miniconda3/lib/python3.12/logging/__init__.py:200: SAWarning: The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x1159323f0>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
  def _is_internal_frame(frame):
2026-02-18 17:40:12,129 - sqlalchemy.pool.impl.AsyncAdaptedQueuePool - ERROR - The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x11724cb90>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
/Users/mk/miniconda3/lib/python3.12/logging/__init__.py:200: SAWarning: The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x11724cb90>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
  def _is_internal_frame(frame):
2026-02-18 17:40:12,130 - sqlalchemy.pool.impl.AsyncAdaptedQueuePool - ERROR - The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x1159f3200>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
/Users/mk/miniconda3/lib/python3.12/logging/__init__.py:200: SAWarning: The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x1159f3200>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
  def _is_internal_frame(frame):
2026-02-18 17:40:12,132 - sqlalchemy.pool.impl.AsyncAdaptedQueuePool - ERROR - The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x11724c6e0>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
/Users/mk/miniconda3/lib/python3.12/logging/__init__.py:200: SAWarning: The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x11724c6e0>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
  def _is_internal_frame(frame):
2026-02-18 17:40:12,133 - sqlalchemy.pool.impl.AsyncAdaptedQueuePool - ERROR - The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x1177cc140>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
/Users/mk/miniconda3/lib/python3.12/logging/__init__.py:200: SAWarning: The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x1177cc140>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
  def _is_internal_frame(frame):
2026-02-18 17:40:12,135 - sqlalchemy.pool.impl.AsyncAdaptedQueuePool - ERROR - The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x11724f200>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
/Users/mk/miniconda3/lib/python3.12/logging/__init__.py:200: SAWarning: The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x11724f200>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
  def _is_internal_frame(frame):
2026-02-18 17:40:12,137 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:40:12,137 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:40:12,137 INFO sqlalchemy.engine.Engine [cached since 721.3s ago] ('[-0.11621421575546265,-0.4806925356388092,-2.7031071186065674,-1.6990838050842285,1.0367270708084106,-0.9503557682037354,-0.7340657114982605,0.976721 ... (14909 characters truncated) ... 31945801,-0.02474946156144142,0.5045385360717773,0.1423267275094986,-0.1143011599779129,-0.7206776142120361,-0.12617580592632294,-1.0333716869354248]', UUID('0311c484-8417-4d25-88b3-e564c04318f2'))
2026-02-18 17:40:12,137 - sqlalchemy.engine.Engine - INFO - [cached since 721.3s ago] ('[-0.11621421575546265,-0.4806925356388092,-2.7031071186065674,-1.6990838050842285,1.0367270708084106,-0.9503557682037354,-0.7340657114982605,0.976721 ... (14909 characters truncated) ... 31945801,-0.02474946156144142,0.5045385360717773,0.1423267275094986,-0.1143011599779129,-0.7206776142120361,-0.12617580592632294,-1.0333716869354248]', UUID('0311c484-8417-4d25-88b3-e564c04318f2'))
2026-02-18 17:40:12,139 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message 0311c484-8417-4d25-88b3-e564c04318f2
2026-02-18 17:40:12,346 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
2026-02-18 17:40:12,350 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:12,350 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:12,350 INFO sqlalchemy.engine.Engine [cached since 721.5s ago] (UUID('0311c484-8417-4d25-88b3-e564c04318f2'),)
2026-02-18 17:40:12,350 - sqlalchemy.engine.Engine - INFO - [cached since 721.5s ago] (UUID('0311c484-8417-4d25-88b3-e564c04318f2'),)
2026-02-18 17:40:12,354 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:40:12,354 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:40:12,354 INFO sqlalchemy.engine.Engine [cached since 721.5s ago] ('[-0.11621421575546265,-0.4806925356388092,-2.7031071186065674,-1.6990838050842285,1.0367270708084106,-0.9503557682037354,-0.7340657114982605,0.976721 ... (14909 characters truncated) ... 31945801,-0.02474946156144142,0.5045385360717773,0.1423267275094986,-0.1143011599779129,-0.7206776142120361,-0.12617580592632294,-1.0333716869354248]', UUID('0311c484-8417-4d25-88b3-e564c04318f2'))
2026-02-18 17:40:12,354 - sqlalchemy.engine.Engine - INFO - [cached since 721.5s ago] ('[-0.11621421575546265,-0.4806925356388092,-2.7031071186065674,-1.6990838050842285,1.0367270708084106,-0.9503557682037354,-0.7340657114982605,0.976721 ... (14909 characters truncated) ... 31945801,-0.02474946156144142,0.5045385360717773,0.1423267275094986,-0.1143011599779129,-0.7206776142120361,-0.12617580592632294,-1.0333716869354248]', UUID('0311c484-8417-4d25-88b3-e564c04318f2'))
2026-02-18 17:40:12,358 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message 0311c484-8417-4d25-88b3-e564c04318f2
2026-02-18 17:40:19,502 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:40:23,310 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:40:23,310 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:40:23,310 INFO sqlalchemy.engine.Engine [cached since 740.1s ago] (UUID('9a5dcd11-9190-4b1b-9975-628cd946c5c8'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.ASSISTANT: 'assistant'>, 'Based on the output, it appears that there are no Python files in the `scripts/` directory. If you would like to search for other types of files or use a different query, please let me know.', 'null', None, '{"model": "llama3.2", "type": "synthesis"}', 1351, 44, 'llama3.2', None, None, None, 32, datetime.datetime(2026, 2, 18, 8, 40, 23, 310652))
2026-02-18 17:40:23,310 - sqlalchemy.engine.Engine - INFO - [cached since 740.1s ago] (UUID('9a5dcd11-9190-4b1b-9975-628cd946c5c8'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.ASSISTANT: 'assistant'>, 'Based on the output, it appears that there are no Python files in the `scripts/` directory. If you would like to search for other types of files or use a different query, please let me know.', 'null', None, '{"model": "llama3.2", "type": "synthesis"}', 1351, 44, 'llama3.2', None, None, None, 32, datetime.datetime(2026, 2, 18, 8, 40, 23, 310652))
2026-02-18 17:40:23,313 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:23,313 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:23,313 INFO sqlalchemy.engine.Engine [cached since 740.1s ago] (UUID('9a5dcd11-9190-4b1b-9975-628cd946c5c8'),)
2026-02-18 17:40:23,313 - sqlalchemy.engine.Engine - INFO - [cached since 740.1s ago] (UUID('9a5dcd11-9190-4b1b-9975-628cd946c5c8'),)
2026-02-18 17:40:23,315 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:40:23,315 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:60995 - "POST /api/chat HTTP/1.1" 200 OK
2026-02-18 17:40:23,382 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:40:23,382 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:40:23,382 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:40:23,382 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:40:23,382 INFO sqlalchemy.engine.Engine [cached since 740.2s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:40:23,382 - sqlalchemy.engine.Engine - INFO - [cached since 740.2s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:40:23,385 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:40:23,385 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:40:23,385 INFO sqlalchemy.engine.Engine [cached since 740.2s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:40:23,385 - sqlalchemy.engine.Engine - INFO - [cached since 740.2s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:40:23,387 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:40:23,387 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:40:23,387 INFO sqlalchemy.engine.Engine [cached since 740.2s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), 50)
2026-02-18 17:40:23,387 - sqlalchemy.engine.Engine - INFO - [cached since 740.2s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), 50)
2026-02-18 17:40:23,405 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:40:23,405 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:40:23,405 INFO sqlalchemy.engine.Engine [cached since 740.2s ago] (UUID('400f7bfa-65f4-43ff-8c67-4165806da4fe'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.USER: 'user'>, 'Analyze the imports in src/chatbot_ai_system/orchestrator.py and list the external dependencies.', 'null', None, 'null', None, None, None, None, None, None, 33, datetime.datetime(2026, 2, 18, 8, 40, 23, 404984))
2026-02-18 17:40:23,405 - sqlalchemy.engine.Engine - INFO - [cached since 740.2s ago] (UUID('400f7bfa-65f4-43ff-8c67-4165806da4fe'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.USER: 'user'>, 'Analyze the imports in src/chatbot_ai_system/orchestrator.py and list the external dependencies.', 'null', None, 'null', None, None, None, None, None, None, 33, datetime.datetime(2026, 2, 18, 8, 40, 23, 404984))
2026-02-18 17:40:23,407 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:23,407 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:23,407 INFO sqlalchemy.engine.Engine [cached since 740.2s ago] (UUID('400f7bfa-65f4-43ff-8c67-4165806da4fe'),)
2026-02-18 17:40:23,407 - sqlalchemy.engine.Engine - INFO - [cached since 740.2s ago] (UUID('400f7bfa-65f4-43ff-8c67-4165806da4fe'),)
2026-02-18 17:40:23,408 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:40:23,408 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:40:23,441 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:40:23,441 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:40:23,441 INFO sqlalchemy.engine.Engine SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:40:23,441 - sqlalchemy.engine.Engine - INFO - SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:40:23,441 INFO sqlalchemy.engine.Engine [cached since 740.3s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:40:23,441 - sqlalchemy.engine.Engine - INFO - [cached since 740.3s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:40:23,443 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:40:23,443 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:40:23,443 INFO sqlalchemy.engine.Engine [cached since 740.3s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:40:23,443 - sqlalchemy.engine.Engine - INFO - [cached since 740.3s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:40:23,445 - chatbot_ai_system.orchestrator - INFO - Using cached context for conversation 36c8c289-9d0b-4ed2-88d9-e45d46389920
2026-02-18 17:40:23,763 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
2026-02-18 17:40:23,806 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:40:23,806 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:40:23,806 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:23,806 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:23,806 INFO sqlalchemy.engine.Engine [cached since 732.9s ago] (UUID('9a5dcd11-9190-4b1b-9975-628cd946c5c8'),)
2026-02-18 17:40:23,806 - sqlalchemy.engine.Engine - INFO - [cached since 732.9s ago] (UUID('9a5dcd11-9190-4b1b-9975-628cd946c5c8'),)
2026-02-18 17:40:23,819 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:40:23,819 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:40:23,819 INFO sqlalchemy.engine.Engine [cached since 732.9s ago] ('[-0.4537879228591919,-0.1566091924905777,-2.3788068294525146,-1.3966306447982788,0.8530932664871216,-0.7955752015113831,-0.23563790321350098,0.064362 ... (14893 characters truncated) ... 421042442322,0.6066893339157104,-0.3032216727733612,0.80130934715271,-0.7120367884635925,-1.822901725769043,-0.09372416883707047,-0.9957056641578674]', UUID('9a5dcd11-9190-4b1b-9975-628cd946c5c8'))
2026-02-18 17:40:23,819 - sqlalchemy.engine.Engine - INFO - [cached since 732.9s ago] ('[-0.4537879228591919,-0.1566091924905777,-2.3788068294525146,-1.3966306447982788,0.8530932664871216,-0.7955752015113831,-0.23563790321350098,0.064362 ... (14893 characters truncated) ... 421042442322,0.6066893339157104,-0.3032216727733612,0.80130934715271,-0.7120367884635925,-1.822901725769043,-0.09372416883707047,-0.9957056641578674]', UUID('9a5dcd11-9190-4b1b-9975-628cd946c5c8'))
2026-02-18 17:40:23,820 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message 9a5dcd11-9190-4b1b-9975-628cd946c5c8
2026-02-18 17:40:26,331 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:40:26,331 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: INTENT: FILESYSTEM
COMPLEXITY: SIMPLE...
2026-02-18 17:40:26,331 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 classifier: intent=FILESYSTEM, complexity=SIMPLE (raw: 'INTENT: FILESYSTEM\nCOMPLEXITY: SIMPLE')
2026-02-18 17:40:26,332 - chatbot_ai_system.orchestrator - INFO - Phase 4: intent='FILESYSTEM', complexity='SIMPLE'
2026-02-18 17:40:26,332 - chatbot_ai_system.orchestrator - INFO - Phase 5: Selected 0 tools: []
2026-02-18 17:40:27,656 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:40:27,656 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: INTENT: FILESYSTEM
COMPLEXITY: COMPLEX...
2026-02-18 17:40:27,656 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 classifier: intent=FILESYSTEM, complexity=COMPLEX (raw: 'INTENT: FILESYSTEM\nCOMPLEXITY: COMPLEX')
2026-02-18 17:40:27,656 - chatbot_ai_system.orchestrator - INFO - Phase 4: intent='FILESYSTEM', complexity='COMPLEX'
2026-02-18 17:40:27,657 - chatbot_ai_system.orchestrator - INFO - Phase 5: Selected 8 tools: ['read_file', 'read_text_file', 'read_media_file', 'read_multiple_files', 'write_file', 'edit_file', 'create_directory', 'list_directory']
2026-02-18 17:40:27,659 - chatbot_ai_system.orchestrator - INFO - Phase 5.5: Routing to agentic Plan+ReAct engine
2026-02-18 17:40:30,815 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:40:38,101 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:40:38,101 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:40:38,101 INFO sqlalchemy.engine.Engine [cached since 754.9s ago] (UUID('3f0945df-fdd8-45a5-98b4-e61052c55525'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, "I don't have access to the file system. However, I can suggest that you run the command `ls docs` (on Unix-based systems) or `dir docs` (on Windows)  ... (51 characters truncated) ... ents of the `docs` folder.\n\nIf you'd like, I can also help you understand what files might be present in a typical `docs` folder. Just let me know!", 'null', None, '{"model": "llama3.2"}', 589, 86, 'llama3.2', None, None, None, 18, datetime.datetime(2026, 2, 18, 8, 40, 38, 101062))
2026-02-18 17:40:38,101 - sqlalchemy.engine.Engine - INFO - [cached since 754.9s ago] (UUID('3f0945df-fdd8-45a5-98b4-e61052c55525'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, "I don't have access to the file system. However, I can suggest that you run the command `ls docs` (on Unix-based systems) or `dir docs` (on Windows)  ... (51 characters truncated) ... ents of the `docs` folder.\n\nIf you'd like, I can also help you understand what files might be present in a typical `docs` folder. Just let me know!", 'null', None, '{"model": "llama3.2"}', 589, 86, 'llama3.2', None, None, None, 18, datetime.datetime(2026, 2, 18, 8, 40, 38, 101062))
2026-02-18 17:40:38,103 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:38,103 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:38,103 INFO sqlalchemy.engine.Engine [cached since 754.9s ago] (UUID('3f0945df-fdd8-45a5-98b4-e61052c55525'),)
2026-02-18 17:40:38,103 - sqlalchemy.engine.Engine - INFO - [cached since 754.9s ago] (UUID('3f0945df-fdd8-45a5-98b4-e61052c55525'),)
2026-02-18 17:40:38,104 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:40:38,104 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:40:38,105 - chatbot_ai_system.orchestrator - ERROR - Failed to embed user message at seq 17: This session is in 'prepared' state; no further SQL can be emitted within this transaction.
INFO:     127.0.0.1:61025 - "POST /api/chat HTTP/1.1" 200 OK
2026-02-18 17:40:38,194 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:40:38,194 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:40:38,194 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:40:38,194 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:40:38,194 INFO sqlalchemy.engine.Engine [cached since 755s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:40:38,194 - sqlalchemy.engine.Engine - INFO - [cached since 755s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:40:38,197 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:40:38,197 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:40:38,197 INFO sqlalchemy.engine.Engine [cached since 755s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:40:38,197 - sqlalchemy.engine.Engine - INFO - [cached since 755s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:40:38,198 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:40:38,198 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:40:38,198 INFO sqlalchemy.engine.Engine [cached since 755s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:40:38,198 - sqlalchemy.engine.Engine - INFO - [cached since 755s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:40:38,211 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:40:38,211 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:40:38,211 INFO sqlalchemy.engine.Engine [cached since 755s ago] (UUID('faa14f19-425b-4e3d-a157-5bcdfee3a91c'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'Check the size of README.md.', 'null', None, 'null', None, None, None, None, None, None, 19, datetime.datetime(2026, 2, 18, 8, 40, 38, 211382))
2026-02-18 17:40:38,211 - sqlalchemy.engine.Engine - INFO - [cached since 755s ago] (UUID('faa14f19-425b-4e3d-a157-5bcdfee3a91c'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'Check the size of README.md.', 'null', None, 'null', None, None, None, None, None, None, 19, datetime.datetime(2026, 2, 18, 8, 40, 38, 211382))
2026-02-18 17:40:38,213 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:38,213 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:38,213 INFO sqlalchemy.engine.Engine [cached since 755s ago] (UUID('faa14f19-425b-4e3d-a157-5bcdfee3a91c'),)
2026-02-18 17:40:38,213 - sqlalchemy.engine.Engine - INFO - [cached since 755s ago] (UUID('faa14f19-425b-4e3d-a157-5bcdfee3a91c'),)
2026-02-18 17:40:38,216 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:40:38,216 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:40:38,252 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:40:38,252 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:40:38,253 INFO sqlalchemy.engine.Engine SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:40:38,253 - sqlalchemy.engine.Engine - INFO - SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:40:38,253 INFO sqlalchemy.engine.Engine [cached since 755.1s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:40:38,253 - sqlalchemy.engine.Engine - INFO - [cached since 755.1s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:40:38,256 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:40:38,256 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:40:38,256 INFO sqlalchemy.engine.Engine [cached since 755.1s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:40:38,256 - sqlalchemy.engine.Engine - INFO - [cached since 755.1s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:40:38,258 - chatbot_ai_system.orchestrator - INFO - Using cached context for conversation 4933dbb2-767b-403b-a072-aab0873d7cd4
2026-02-18 17:40:38,527 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
2026-02-18 17:40:38,531 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:40:38,531 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:40:38,531 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:38,531 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:38,531 INFO sqlalchemy.engine.Engine [cached since 747.7s ago] (UUID('3f0945df-fdd8-45a5-98b4-e61052c55525'),)
2026-02-18 17:40:38,531 - sqlalchemy.engine.Engine - INFO - [cached since 747.7s ago] (UUID('3f0945df-fdd8-45a5-98b4-e61052c55525'),)
2026-02-18 17:40:38,534 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:40:38,534 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:40:38,534 INFO sqlalchemy.engine.Engine [cached since 747.7s ago] ('[-0.40884870290756226,0.04488212987780571,-2.4939324855804443,-2.3959107398986816,0.5210875272750854,-1.269423484802246,-0.4167858362197876,0.5880084 ... (14901 characters truncated) ... 50642395,0.4384308159351349,0.7047591805458069,0.12108545005321503,-0.4778667986392975,-0.33285197615623474,-0.11710488796234131,-0.5059147477149963]', UUID('3f0945df-fdd8-45a5-98b4-e61052c55525'))
2026-02-18 17:40:38,534 - sqlalchemy.engine.Engine - INFO - [cached since 747.7s ago] ('[-0.40884870290756226,0.04488212987780571,-2.4939324855804443,-2.3959107398986816,0.5210875272750854,-1.269423484802246,-0.4167858362197876,0.5880084 ... (14901 characters truncated) ... 50642395,0.4384308159351349,0.7047591805458069,0.12108545005321503,-0.4778667986392975,-0.33285197615623474,-0.11710488796234131,-0.5059147477149963]', UUID('3f0945df-fdd8-45a5-98b4-e61052c55525'))
2026-02-18 17:40:38,538 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message 3f0945df-fdd8-45a5-98b4-e61052c55525
2026-02-18 17:40:38,825 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
2026-02-18 17:40:38,830 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:38,830 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:40:38,831 INFO sqlalchemy.engine.Engine [cached since 748s ago] (UUID('3f0945df-fdd8-45a5-98b4-e61052c55525'),)
2026-02-18 17:40:38,831 - sqlalchemy.engine.Engine - INFO - [cached since 748s ago] (UUID('3f0945df-fdd8-45a5-98b4-e61052c55525'),)
2026-02-18 17:40:38,835 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:40:38,835 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:40:38,835 INFO sqlalchemy.engine.Engine [cached since 748s ago] ('[-0.40884870290756226,0.04488212987780571,-2.4939324855804443,-2.3959107398986816,0.5210875272750854,-1.269423484802246,-0.4167858362197876,0.5880084 ... (14901 characters truncated) ... 50642395,0.4384308159351349,0.7047591805458069,0.12108545005321503,-0.4778667986392975,-0.33285197615623474,-0.11710488796234131,-0.5059147477149963]', UUID('3f0945df-fdd8-45a5-98b4-e61052c55525'))
2026-02-18 17:40:38,835 - sqlalchemy.engine.Engine - INFO - [cached since 748s ago] ('[-0.40884870290756226,0.04488212987780571,-2.4939324855804443,-2.3959107398986816,0.5210875272750854,-1.269423484802246,-0.4167858362197876,0.5880084 ... (14901 characters truncated) ... 50642395,0.4384308159351349,0.7047591805458069,0.12108545005321503,-0.4778667986392975,-0.33285197615623474,-0.11710488796234131,-0.5059147477149963]', UUID('3f0945df-fdd8-45a5-98b4-e61052c55525'))
2026-02-18 17:40:38,838 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message 3f0945df-fdd8-45a5-98b4-e61052c55525
2026-02-18 17:40:52,400 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:40:52,401 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: 1. Run `ls` (on Unix-like systems) or `dir` (on Windows) to list all files in the current directory.
2. Navigate to the `src/chatbot_ai_system/orchestrator.py` file using the output from step 1.
3. Id...
2026-02-18 17:40:52,401 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 planner: 6 steps  ['Run `ls` (on Unix-like systems) or `dir` (on Windows) to list all files in the current directory.', 'Navigate to the `src/chatbot_ai_system/orchestrator.py` file using the output from step 1.', 'Identify and extract the import statements from the file.', 'Read each imported module/file using `read_file`, `read_text_file`, or `read_media_file` depending on its type (e.g., Python library, JSON file).', 'List all external dependencies found in step 4.', 'Note: The exact steps may vary based on the actual contents of `orchestrator.py`.']
2026-02-18 17:40:55,313 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:40:55,313 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: INTENT: FILESYSTEM
COMPLEXITY: SIMPLE...
2026-02-18 17:40:55,313 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 classifier: intent=FILESYSTEM, complexity=SIMPLE (raw: 'INTENT: FILESYSTEM\nCOMPLEXITY: SIMPLE')
2026-02-18 17:40:55,314 - chatbot_ai_system.orchestrator - INFO - Phase 4: intent='FILESYSTEM', complexity='SIMPLE'
2026-02-18 17:40:55,314 - chatbot_ai_system.orchestrator - INFO - Phase 5: Selected 5 tools: ['read_file', 'read_text_file', 'read_media_file', 'read_multiple_files', 'read_graph']
2026-02-18 17:41:11,736 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:41:11,848 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 1: list_directory completed in 0.00s
2026-02-18 17:41:19,596 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:41:19,684 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:41:19,684 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:41:19,684 INFO sqlalchemy.engine.Engine [cached since 796.5s ago] (UUID('b944e9f3-8723-4d6f-8e4d-f9d8fc29994f'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, '', '[{"id": "call_rorw1ict", "function": {"name": "read_file", "arguments": {"path": "README.md"}}, "type": "function"}]', None, '{"model": "llama3.2"}', 1286, 18, 'llama3.2', None, None, None, 20, datetime.datetime(2026, 2, 18, 8, 41, 19, 684578))
2026-02-18 17:41:19,684 - sqlalchemy.engine.Engine - INFO - [cached since 796.5s ago] (UUID('b944e9f3-8723-4d6f-8e4d-f9d8fc29994f'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, '', '[{"id": "call_rorw1ict", "function": {"name": "read_file", "arguments": {"path": "README.md"}}, "type": "function"}]', None, '{"model": "llama3.2"}', 1286, 18, 'llama3.2', None, None, None, 20, datetime.datetime(2026, 2, 18, 8, 41, 19, 684578))
2026-02-18 17:41:19,697 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:41:19,697 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:41:19,697 INFO sqlalchemy.engine.Engine [cached since 796.5s ago] (UUID('b944e9f3-8723-4d6f-8e4d-f9d8fc29994f'),)
2026-02-18 17:41:19,697 - sqlalchemy.engine.Engine - INFO - [cached since 796.5s ago] (UUID('b944e9f3-8723-4d6f-8e4d-f9d8fc29994f'),)
2026-02-18 17:41:19,699 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID AND messages.sequence_number = $2::INTEGER AND messages.role = $3::VARCHAR
2026-02-18 17:41:19,699 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID AND messages.sequence_number = $2::INTEGER AND messages.role = $3::VARCHAR
2026-02-18 17:41:19,699 INFO sqlalchemy.engine.Engine [cached since 660.3s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 19, <MessageRole.USER: 'user'>)
2026-02-18 17:41:19,699 - sqlalchemy.engine.Engine - INFO - [cached since 660.3s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 19, <MessageRole.USER: 'user'>)
2026-02-18 17:41:19,707 - chatbot_ai_system.services.embedding - INFO - Using cached embedding
2026-02-18 17:41:19,707 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:41:19,707 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:41:19,707 INFO sqlalchemy.engine.Engine [cached since 788.8s ago] (UUID('faa14f19-425b-4e3d-a157-5bcdfee3a91c'),)
2026-02-18 17:41:19,707 - sqlalchemy.engine.Engine - INFO - [cached since 788.8s ago] (UUID('faa14f19-425b-4e3d-a157-5bcdfee3a91c'),)
2026-02-18 17:41:19,708 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:41:19,708 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:41:19,708 INFO sqlalchemy.engine.Engine [cached since 796.5s ago] (UUID('1c6b8c04-c375-4ee5-a7cd-ede68e06150c'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.TOOL: 'tool'>, '# Chatbot AI System\n\nA production-grade, multi-tenant AI chatbot platform with multi-provider LLM support, multimodal input (image, audio, video),  ... (11258 characters truncated) ... 5.0.md)\n- [ ] **Phase 6.0**: Multi-Provider Orchestration\n- [ ] **Phase 7.0**: Authentication & Multi-Tenancy\n\n---\n\n##  License\n\nMIT License', 'null', 'call_rorw1ict', 'null', None, None, None, None, None, None, 21, datetime.datetime(2026, 2, 18, 8, 41, 19, 708336))
2026-02-18 17:41:19,708 - sqlalchemy.engine.Engine - INFO - [cached since 796.5s ago] (UUID('1c6b8c04-c375-4ee5-a7cd-ede68e06150c'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.TOOL: 'tool'>, '# Chatbot AI System\n\nA production-grade, multi-tenant AI chatbot platform with multi-provider LLM support, multimodal input (image, audio, video),  ... (11258 characters truncated) ... 5.0.md)\n- [ ] **Phase 6.0**: Multi-Provider Orchestration\n- [ ] **Phase 7.0**: Authentication & Multi-Tenancy\n\n---\n\n##  License\n\nMIT License', 'null', 'call_rorw1ict', 'null', None, None, None, None, None, None, 21, datetime.datetime(2026, 2, 18, 8, 41, 19, 708336))
2026-02-18 17:41:19,708 - chatbot_ai_system.orchestrator - ERROR - Failed to generate embedding for message faa14f19-425b-4e3d-a157-5bcdfee3a91c: Session is already flushing
2026-02-18 17:41:19,710 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:41:19,710 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:41:19,710 INFO sqlalchemy.engine.Engine [cached since 796.5s ago] (UUID('1c6b8c04-c375-4ee5-a7cd-ede68e06150c'),)
2026-02-18 17:41:19,710 - sqlalchemy.engine.Engine - INFO - [cached since 796.5s ago] (UUID('1c6b8c04-c375-4ee5-a7cd-ede68e06150c'),)
2026-02-18 17:41:37,358 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:41:37,454 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 2: list_directory completed in 0.00s
2026-02-18 17:41:59,253 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:42:07,515 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:42:07,515 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:42:07,515 INFO sqlalchemy.engine.Engine [cached since 844.3s ago] (UUID('ca040a0f-7d73-4a6c-83b6-5acaae798713'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, "This is the output of the chatbot's knowledge base, providing information on various topics such as the capital of France, Romeo and Juliet, recursio ... (153 characters truncated) ... roject structure, roadmap, and license.\n\nIf you have any specific questions or need further clarification on any of these topics, feel free to ask!", 'null', None, '{"model": "llama3.2", "type": "synthesis"}', 3830, 90, 'llama3.2', None, None, None, 22, datetime.datetime(2026, 2, 18, 8, 42, 7, 515524))
2026-02-18 17:42:07,515 - sqlalchemy.engine.Engine - INFO - [cached since 844.3s ago] (UUID('ca040a0f-7d73-4a6c-83b6-5acaae798713'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, "This is the output of the chatbot's knowledge base, providing information on various topics such as the capital of France, Romeo and Juliet, recursio ... (153 characters truncated) ... roject structure, roadmap, and license.\n\nIf you have any specific questions or need further clarification on any of these topics, feel free to ask!", 'null', None, '{"model": "llama3.2", "type": "synthesis"}', 3830, 90, 'llama3.2', None, None, None, 22, datetime.datetime(2026, 2, 18, 8, 42, 7, 515524))
2026-02-18 17:42:07,517 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:42:07,517 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:42:07,517 INFO sqlalchemy.engine.Engine [cached since 844.3s ago] (UUID('ca040a0f-7d73-4a6c-83b6-5acaae798713'),)
2026-02-18 17:42:07,517 - sqlalchemy.engine.Engine - INFO - [cached since 844.3s ago] (UUID('ca040a0f-7d73-4a6c-83b6-5acaae798713'),)
2026-02-18 17:42:07,519 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:42:07,519 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:42:07,519 INFO sqlalchemy.engine.Engine [cached since 844.3s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 22)
2026-02-18 17:42:07,519 - sqlalchemy.engine.Engine - INFO - [cached since 844.3s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 22)
2026-02-18 17:42:07,957 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
2026-02-18 17:42:07,962 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:42:07,962 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:42:07,963 INFO sqlalchemy.engine.Engine [cached since 837.1s ago] (UUID('ca040a0f-7d73-4a6c-83b6-5acaae798713'),)
2026-02-18 17:42:07,963 - sqlalchemy.engine.Engine - INFO - [cached since 837.1s ago] (UUID('ca040a0f-7d73-4a6c-83b6-5acaae798713'),)
2026-02-18 17:42:07,965 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:42:07,965 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:42:07,965 INFO sqlalchemy.engine.Engine [cached since 837.1s ago] ('[-0.20228683948516846,0.7259295582771301,-2.7574002742767334,-1.0518876314163208,1.677287220954895,0.15948307514190674,-0.20693810284137726,0.1308125 ... (14939 characters truncated) ... 5249,0.007781276945024729,1.0360227823257446,-0.21895919740200043,-0.37949225306510925,-0.16735301911830902,-0.19856663048267365,-0.7588515877723694]', UUID('ca040a0f-7d73-4a6c-83b6-5acaae798713'))
2026-02-18 17:42:07,965 - sqlalchemy.engine.Engine - INFO - [cached since 837.1s ago] ('[-0.20228683948516846,0.7259295582771301,-2.7574002742767334,-1.0518876314163208,1.677287220954895,0.15948307514190674,-0.20693810284137726,0.1308125 ... (14939 characters truncated) ... 5249,0.007781276945024729,1.0360227823257446,-0.21895919740200043,-0.37949225306510925,-0.16735301911830902,-0.19856663048267365,-0.7588515877723694]', UUID('ca040a0f-7d73-4a6c-83b6-5acaae798713'))
2026-02-18 17:42:07,968 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message ca040a0f-7d73-4a6c-83b6-5acaae798713
2026-02-18 17:42:26,945 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:42:27,039 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 3: read_multiple_files completed in 0.00s
2026-02-18 17:43:07,117 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:43:07,118 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: Here is a summary of the conversation:

**Key Facts**

* The chatbot has a knowledge base that provides information on various topics.
* The chatbot's architecture includes a client layer, API layer, ...
2026-02-18 17:43:07,118 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:43:07,118 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:43:07,119 INFO sqlalchemy.engine.Engine [cached since 903.9s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:43:07,119 - sqlalchemy.engine.Engine - INFO - [cached since 903.9s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:43:07,121 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:43:07,121 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:43:07,121 INFO sqlalchemy.engine.Engine [cached since 903.9s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:43:07,121 - sqlalchemy.engine.Engine - INFO - [cached since 903.9s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:43:07,123 INFO sqlalchemy.engine.Engine UPDATE conversations SET updated_at=$1::TIMESTAMP WITHOUT TIME ZONE, summary=$2::VARCHAR, last_summarized_seq_id=$3::INTEGER WHERE conversations.id = $4::UUID
2026-02-18 17:43:07,123 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET updated_at=$1::TIMESTAMP WITHOUT TIME ZONE, summary=$2::VARCHAR, last_summarized_seq_id=$3::INTEGER WHERE conversations.id = $4::UUID
2026-02-18 17:43:07,123 INFO sqlalchemy.engine.Engine [cached since 545.9s ago] (datetime.datetime(2026, 2, 18, 8, 43, 7, 123238), "Here is a summary of the conversation:\n\n**Key Facts**\n\n* The chatbot has a knowledge base that provides information on various topics.\n* The cha ... (642 characters truncated) ... s**\n\n* The user decides to use the chatbot to ask questions and get answers.\n* The user decides to explore the chatbot's architecture and features", 22, UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'))
2026-02-18 17:43:07,123 - sqlalchemy.engine.Engine - INFO - [cached since 545.9s ago] (datetime.datetime(2026, 2, 18, 8, 43, 7, 123238), "Here is a summary of the conversation:\n\n**Key Facts**\n\n* The chatbot has a knowledge base that provides information on various topics.\n* The cha ... (642 characters truncated) ... s**\n\n* The user decides to use the chatbot to ask questions and get answers.\n* The user decides to explore the chatbot's architecture and features", 22, UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'))
2026-02-18 17:43:07,125 - chatbot_ai_system.orchestrator - INFO - Updated summary for conversation 4933dbb2-767b-403b-a072-aab0873d7cd4 at seq 22
2026-02-18 17:43:07,125 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:43:07,125 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:61047 - "POST /api/chat HTTP/1.1" 200 OK
2026-02-18 17:43:07,129 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:43:07,129 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:43:07,129 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:43:07,129 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:43:07,129 INFO sqlalchemy.engine.Engine [cached since 904s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:43:07,129 - sqlalchemy.engine.Engine - INFO - [cached since 904s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:43:07,130 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:43:07,130 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:43:07,131 INFO sqlalchemy.engine.Engine [cached since 903.9s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:43:07,131 - sqlalchemy.engine.Engine - INFO - [cached since 903.9s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:43:07,131 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:43:07,131 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:43:07,131 INFO sqlalchemy.engine.Engine [cached since 904s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:43:07,131 - sqlalchemy.engine.Engine - INFO - [cached since 904s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:43:07,133 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:43:07,133 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:43:07,134 INFO sqlalchemy.engine.Engine [cached since 904s ago] (UUID('5f761b31-ff39-4851-b75b-e0b4a5995418'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'Show me the first 5 lines of pyproject.toml.', 'null', None, 'null', None, None, None, None, None, None, 23, datetime.datetime(2026, 2, 18, 8, 43, 7, 133941))
2026-02-18 17:43:07,134 - sqlalchemy.engine.Engine - INFO - [cached since 904s ago] (UUID('5f761b31-ff39-4851-b75b-e0b4a5995418'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'Show me the first 5 lines of pyproject.toml.', 'null', None, 'null', None, None, None, None, None, None, 23, datetime.datetime(2026, 2, 18, 8, 43, 7, 133941))
2026-02-18 17:43:07,135 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:43:07,135 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:43:07,135 INFO sqlalchemy.engine.Engine [cached since 903.9s ago] (UUID('5f761b31-ff39-4851-b75b-e0b4a5995418'),)
2026-02-18 17:43:07,135 - sqlalchemy.engine.Engine - INFO - [cached since 903.9s ago] (UUID('5f761b31-ff39-4851-b75b-e0b4a5995418'),)
2026-02-18 17:43:07,135 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:43:07,135 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:43:07,137 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:43:07,137 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:43:07,137 INFO sqlalchemy.engine.Engine SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:43:07,137 - sqlalchemy.engine.Engine - INFO - SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:43:07,137 INFO sqlalchemy.engine.Engine [cached since 903.9s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:43:07,137 - sqlalchemy.engine.Engine - INFO - [cached since 903.9s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:43:07,139 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:43:07,139 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:43:07,139 INFO sqlalchemy.engine.Engine [cached since 903.9s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:43:07,139 - sqlalchemy.engine.Engine - INFO - [cached since 903.9s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:43:07,140 - chatbot_ai_system.orchestrator - INFO - Using cached context for conversation 4933dbb2-767b-403b-a072-aab0873d7cd4
2026-02-18 17:43:29,561 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:43:29,669 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 4: read_multiple_files completed in 0.01s
2026-02-18 17:43:32,674 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:43:32,675 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: INTENT: FILESYSTEM
COMPLEXITY: SIMPLE...
2026-02-18 17:43:32,675 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 classifier: intent=FILESYSTEM, complexity=SIMPLE (raw: 'INTENT: FILESYSTEM\nCOMPLEXITY: SIMPLE')
2026-02-18 17:43:32,675 - chatbot_ai_system.orchestrator - INFO - Phase 4: intent='FILESYSTEM', complexity='SIMPLE'
2026-02-18 17:43:32,675 - chatbot_ai_system.orchestrator - INFO - Phase 5: Selected 4 tools: ['read_file', 'read_text_file', 'read_multiple_files', 'read_graph']
2026-02-18 17:43:43,418 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:43:43,498 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 5: list_directory completed in 0.00s
2026-02-18 17:44:08,778 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:44:08,874 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:44:08,874 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:44:08,874 INFO sqlalchemy.engine.Engine [cached since 965.7s ago] (UUID('baef5a54-7e2d-42cd-bd36-a2e9e1a9ef87'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, '', '[{"id": "call_wfnypquk", "function": {"name": "read_text_file", "arguments": {"head": 5, "path": "/Users/mk/Documents/pyproject.toml"}}, "type": "function"}]', None, '{"model": "llama3.2"}', 4060, 25, 'llama3.2', None, None, None, 24, datetime.datetime(2026, 2, 18, 8, 44, 8, 874249))
2026-02-18 17:44:08,874 - sqlalchemy.engine.Engine - INFO - [cached since 965.7s ago] (UUID('baef5a54-7e2d-42cd-bd36-a2e9e1a9ef87'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, '', '[{"id": "call_wfnypquk", "function": {"name": "read_text_file", "arguments": {"head": 5, "path": "/Users/mk/Documents/pyproject.toml"}}, "type": "function"}]', None, '{"model": "llama3.2"}', 4060, 25, 'llama3.2', None, None, None, 24, datetime.datetime(2026, 2, 18, 8, 44, 8, 874249))
2026-02-18 17:44:08,878 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:44:08,878 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:44:08,879 INFO sqlalchemy.engine.Engine [cached since 965.7s ago] (UUID('baef5a54-7e2d-42cd-bd36-a2e9e1a9ef87'),)
2026-02-18 17:44:08,879 - sqlalchemy.engine.Engine - INFO - [cached since 965.7s ago] (UUID('baef5a54-7e2d-42cd-bd36-a2e9e1a9ef87'),)
2026-02-18 17:44:08,880 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID AND messages.sequence_number = $2::INTEGER AND messages.role = $3::VARCHAR
2026-02-18 17:44:08,880 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID AND messages.sequence_number = $2::INTEGER AND messages.role = $3::VARCHAR
2026-02-18 17:44:08,880 INFO sqlalchemy.engine.Engine [cached since 829.5s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 23, <MessageRole.USER: 'user'>)
2026-02-18 17:44:08,880 - sqlalchemy.engine.Engine - INFO - [cached since 829.5s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 23, <MessageRole.USER: 'user'>)
2026-02-18 17:44:08,882 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:44:08,882 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:44:08,882 INFO sqlalchemy.engine.Engine [cached since 965.7s ago] (UUID('2f4ebab8-be9b-4f88-8c0b-14eb197d2446'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.TOOL: 'tool'>, 'Access denied - path outside allowed directories: /Users/mk/Documents/pyproject.toml not in /Users/mk/Documents/chatbot-ai-systems-production', 'null', 'call_wfnypquk', 'null', None, None, None, None, None, None, 25, datetime.datetime(2026, 2, 18, 8, 44, 8, 882262))
2026-02-18 17:44:08,882 - sqlalchemy.engine.Engine - INFO - [cached since 965.7s ago] (UUID('2f4ebab8-be9b-4f88-8c0b-14eb197d2446'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.TOOL: 'tool'>, 'Access denied - path outside allowed directories: /Users/mk/Documents/pyproject.toml not in /Users/mk/Documents/chatbot-ai-systems-production', 'null', 'call_wfnypquk', 'null', None, None, None, None, None, None, 25, datetime.datetime(2026, 2, 18, 8, 44, 8, 882262))
2026-02-18 17:44:08,882 - chatbot_ai_system.services.embedding - INFO - Using cached embedding
2026-02-18 17:44:08,883 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:44:08,883 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:44:08,883 INFO sqlalchemy.engine.Engine [cached since 958s ago] (UUID('5f761b31-ff39-4851-b75b-e0b4a5995418'),)
2026-02-18 17:44:08,883 - sqlalchemy.engine.Engine - INFO - [cached since 958s ago] (UUID('5f761b31-ff39-4851-b75b-e0b4a5995418'),)
2026-02-18 17:44:08,883 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:44:08,883 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:44:08,883 INFO sqlalchemy.engine.Engine [cached since 965.7s ago] (UUID('2f4ebab8-be9b-4f88-8c0b-14eb197d2446'),)
2026-02-18 17:44:08,883 - sqlalchemy.engine.Engine - INFO - [cached since 965.7s ago] (UUID('2f4ebab8-be9b-4f88-8c0b-14eb197d2446'),)
2026-02-18 17:44:08,884 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:44:08,884 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:44:08,884 INFO sqlalchemy.engine.Engine [cached since 958s ago] ('[0.21798507869243622,-0.042015597224235535,-3.039393663406372,-0.42362871766090393,1.1096943616867065,-0.4731813967227936,-0.21958738565444946,-0.797 ... (14890 characters truncated) ... 49017334,-0.44625091552734375,0.77972412109375,-0.42225369811058044,-0.8867242932319641,-0.07792944461107254,-0.6085423231124878,-1.0065957307815552]', UUID('5f761b31-ff39-4851-b75b-e0b4a5995418'))
2026-02-18 17:44:08,884 - sqlalchemy.engine.Engine - INFO - [cached since 958s ago] ('[0.21798507869243622,-0.042015597224235535,-3.039393663406372,-0.42362871766090393,1.1096943616867065,-0.4731813967227936,-0.21958738565444946,-0.797 ... (14890 characters truncated) ... 49017334,-0.44625091552734375,0.77972412109375,-0.42225369811058044,-0.8867242932319641,-0.07792944461107254,-0.6085423231124878,-1.0065957307815552]', UUID('5f761b31-ff39-4851-b75b-e0b4a5995418'))
2026-02-18 17:44:08,912 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message 5f761b31-ff39-4851-b75b-e0b4a5995418
2026-02-18 17:44:19,922 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:44:20,007 - chatbot_ai_system.tools.mcp_client - INFO - Using cached result for filesystem:list_directory
2026-02-18 17:44:20,007 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 6: list_directory completed in 0.00s
2026-02-18 17:44:43,254 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:44:44,635 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:44:44,635 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:44:44,636 INFO sqlalchemy.engine.Engine [cached since 1001s ago] (UUID('5a20f4a4-8781-4984-881a-264ace3670a3'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, '{"name": "read_text_file", "parameters": {"head":5}}', 'null', None, '{"model": "llama3.2", "type": "synthesis"}', 4070, 17, 'llama3.2', None, None, None, 26, datetime.datetime(2026, 2, 18, 8, 44, 44, 635937))
2026-02-18 17:44:44,636 - sqlalchemy.engine.Engine - INFO - [cached since 1001s ago] (UUID('5a20f4a4-8781-4984-881a-264ace3670a3'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, '{"name": "read_text_file", "parameters": {"head":5}}', 'null', None, '{"model": "llama3.2", "type": "synthesis"}', 4070, 17, 'llama3.2', None, None, None, 26, datetime.datetime(2026, 2, 18, 8, 44, 44, 635937))
2026-02-18 17:44:44,638 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:44:44,638 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:44:44,638 INFO sqlalchemy.engine.Engine [cached since 1001s ago] (UUID('5a20f4a4-8781-4984-881a-264ace3670a3'),)
2026-02-18 17:44:44,638 - sqlalchemy.engine.Engine - INFO - [cached since 1001s ago] (UUID('5a20f4a4-8781-4984-881a-264ace3670a3'),)
2026-02-18 17:44:44,639 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:44:44,639 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:61099 - "POST /api/chat HTTP/1.1" 200 OK
2026-02-18 17:44:44,667 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:44:44,667 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:44:44,668 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:44:44,668 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:44:44,668 INFO sqlalchemy.engine.Engine [cached since 1002s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:44:44,668 - sqlalchemy.engine.Engine - INFO - [cached since 1002s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:44:44,669 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:44:44,669 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:44:44,670 INFO sqlalchemy.engine.Engine [cached since 1001s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:44:44,670 - sqlalchemy.engine.Engine - INFO - [cached since 1001s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:44:44,670 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:44:44,670 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:44:44,670 INFO sqlalchemy.engine.Engine [cached since 1001s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:44:44,670 - sqlalchemy.engine.Engine - INFO - [cached since 1001s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:44:44,673 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:44:44,673 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:44:44,673 INFO sqlalchemy.engine.Engine [cached since 1001s ago] (UUID('187ef7cb-5caa-4f21-903d-faa0ac7af906'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'Check git status and then list the files in src/.', 'null', None, 'null', None, None, None, None, None, None, 27, datetime.datetime(2026, 2, 18, 8, 44, 44, 673292))
2026-02-18 17:44:44,673 - sqlalchemy.engine.Engine - INFO - [cached since 1001s ago] (UUID('187ef7cb-5caa-4f21-903d-faa0ac7af906'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'Check git status and then list the files in src/.', 'null', None, 'null', None, None, None, None, None, None, 27, datetime.datetime(2026, 2, 18, 8, 44, 44, 673292))
2026-02-18 17:44:44,674 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:44:44,674 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:44:44,674 INFO sqlalchemy.engine.Engine [cached since 1001s ago] (UUID('187ef7cb-5caa-4f21-903d-faa0ac7af906'),)
2026-02-18 17:44:44,674 - sqlalchemy.engine.Engine - INFO - [cached since 1001s ago] (UUID('187ef7cb-5caa-4f21-903d-faa0ac7af906'),)
2026-02-18 17:44:44,675 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:44:44,675 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:44:44,677 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:44:44,677 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:44:44,677 INFO sqlalchemy.engine.Engine SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:44:44,677 - sqlalchemy.engine.Engine - INFO - SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:44:44,677 INFO sqlalchemy.engine.Engine [cached since 1001s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:44:44,677 - sqlalchemy.engine.Engine - INFO - [cached since 1001s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:44:44,678 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:44:44,678 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:44:44,678 INFO sqlalchemy.engine.Engine [cached since 1001s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:44:44,678 - sqlalchemy.engine.Engine - INFO - [cached since 1001s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:44:44,679 - chatbot_ai_system.orchestrator - INFO - Using cached context for conversation 4933dbb2-767b-403b-a072-aab0873d7cd4
2026-02-18 17:44:44,912 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
2026-02-18 17:44:44,915 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:44:44,915 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:44:44,915 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:44:44,915 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:44:44,915 INFO sqlalchemy.engine.Engine [cached since 994.1s ago] (UUID('5a20f4a4-8781-4984-881a-264ace3670a3'),)
2026-02-18 17:44:44,915 - sqlalchemy.engine.Engine - INFO - [cached since 994.1s ago] (UUID('5a20f4a4-8781-4984-881a-264ace3670a3'),)
2026-02-18 17:44:44,917 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:44:44,917 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:44:44,918 INFO sqlalchemy.engine.Engine [cached since 994s ago] ('[0.14969797432422638,-0.1548175811767578,-2.684966564178467,-1.4841452836990356,0.9434845447540283,-0.8504564762115479,-0.33197543025016785,0.5376904 ... (14871 characters truncated) ... 33,-0.19815269112586975,-0.03811223432421684,0.058909300714731216,-0.39536187052726746,-0.8342268466949463,-0.28199541568756104,-0.47170236706733704]', UUID('5a20f4a4-8781-4984-881a-264ace3670a3'))
2026-02-18 17:44:44,918 - sqlalchemy.engine.Engine - INFO - [cached since 994s ago] ('[0.14969797432422638,-0.1548175811767578,-2.684966564178467,-1.4841452836990356,0.9434845447540283,-0.8504564762115479,-0.33197543025016785,0.5376904 ... (14871 characters truncated) ... 33,-0.19815269112586975,-0.03811223432421684,0.058909300714731216,-0.39536187052726746,-0.8342268466949463,-0.28199541568756104,-0.47170236706733704]', UUID('5a20f4a4-8781-4984-881a-264ace3670a3'))
2026-02-18 17:44:44,920 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message 5a20f4a4-8781-4984-881a-264ace3670a3
2026-02-18 17:44:56,521 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:44:56,609 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 7: list_directory completed in 0.00s
2026-02-18 17:44:59,832 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:44:59,833 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: INTENT: GIT
COMPLEXITY: COMPLEX...
2026-02-18 17:44:59,833 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 classifier: intent=GIT, complexity=COMPLEX (raw: 'INTENT: GIT\nCOMPLEXITY: COMPLEX')
2026-02-18 17:44:59,833 - chatbot_ai_system.orchestrator - INFO - Phase 4: intent='GIT', complexity='COMPLEX'
2026-02-18 17:44:59,834 - chatbot_ai_system.orchestrator - INFO - Phase 5: Selected 8 tools: ['git_add', 'git_branch', 'git_checkout', 'git_cherry_pick', 'git_clean', 'git_clear_working_dir', 'git_clone', 'git_commit']
2026-02-18 17:44:59,836 - chatbot_ai_system.orchestrator - INFO - Phase 5.5: Routing to agentic Plan+ReAct engine
2026-02-18 17:45:12,735 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:45:12,814 - chatbot_ai_system.tools.mcp_client - INFO - Using cached result for filesystem:list_directory
2026-02-18 17:45:12,814 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 8: list_directory completed in 0.00s
2026-02-18 17:45:17,013 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:45:17,014 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: 1. Run `git status`
2. List the files in `src/` using `ls src/`...
2026-02-18 17:45:17,014 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 planner: 2 steps  ['Run `git status`', 'List the files in `src/` using `ls src/`']
2026-02-18 17:45:23,294 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:45:37,393 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5: Force-synthesized after 8 rounds, 285.0s
2026-02-18 17:45:37,394 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:45:37,394 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:45:37,394 INFO sqlalchemy.engine.Engine [cached since 1054s ago] (UUID('91e79977-b856-433b-8bc0-cce53a2525b9'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.ASSISTANT: 'assistant'>, 'The current directory contains the following files:\n\n- server_output.log\n- server_output_14b.log\n- server_output_final.log\n- server_output_resta ... (495 characters truncated) ... out additional information about the contents of `orchestrator.py`, it is not possible to provide a more comprehensive list of external dependencies.', 'null', None, '{"model": "llama3.2", "type": "agentic", "plan": ["Run `ls` (on Unix-like systems) or `dir` (on Windows) to list all files in the current directory." ... (293 characters truncated) ... SON file).", "List all external dependencies found in step 4.", "Note: The exact steps may vary based on the actual contents of `orchestrator.py`."]}', 1168, 170, 'llama3.2', None, None, None, 34, datetime.datetime(2026, 2, 18, 8, 45, 37, 394383))
2026-02-18 17:45:37,394 - sqlalchemy.engine.Engine - INFO - [cached since 1054s ago] (UUID('91e79977-b856-433b-8bc0-cce53a2525b9'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.ASSISTANT: 'assistant'>, 'The current directory contains the following files:\n\n- server_output.log\n- server_output_14b.log\n- server_output_final.log\n- server_output_resta ... (495 characters truncated) ... out additional information about the contents of `orchestrator.py`, it is not possible to provide a more comprehensive list of external dependencies.', 'null', None, '{"model": "llama3.2", "type": "agentic", "plan": ["Run `ls` (on Unix-like systems) or `dir` (on Windows) to list all files in the current directory." ... (293 characters truncated) ... SON file).", "List all external dependencies found in step 4.", "Note: The exact steps may vary based on the actual contents of `orchestrator.py`."]}', 1168, 170, 'llama3.2', None, None, None, 34, datetime.datetime(2026, 2, 18, 8, 45, 37, 394383))
2026-02-18 17:45:37,408 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:45:37,408 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:45:37,409 INFO sqlalchemy.engine.Engine [cached since 1054s ago] (UUID('91e79977-b856-433b-8bc0-cce53a2525b9'),)
2026-02-18 17:45:37,409 - sqlalchemy.engine.Engine - INFO - [cached since 1054s ago] (UUID('91e79977-b856-433b-8bc0-cce53a2525b9'),)
2026-02-18 17:45:37,410 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:45:37,410 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:45:37,410 - chatbot_ai_system.orchestrator - ERROR - Failed to embed user message at seq 33: This session is in 'prepared' state; no further SQL can be emitted within this transaction.
INFO:     127.0.0.1:61034 - "POST /api/chat HTTP/1.1" 200 OK
2026-02-18 17:45:37,438 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:45:37,438 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:45:37,438 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:45:37,438 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:45:37,439 INFO sqlalchemy.engine.Engine [cached since 1054s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:45:37,439 - sqlalchemy.engine.Engine - INFO - [cached since 1054s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:45:37,440 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:45:37,440 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:45:37,440 INFO sqlalchemy.engine.Engine [cached since 1054s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:45:37,440 - sqlalchemy.engine.Engine - INFO - [cached since 1054s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:45:37,441 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:45:37,441 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:45:37,441 INFO sqlalchemy.engine.Engine [cached since 1054s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), 50)
2026-02-18 17:45:37,441 - sqlalchemy.engine.Engine - INFO - [cached since 1054s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), 50)
2026-02-18 17:45:37,449 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:45:37,449 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:45:37,450 INFO sqlalchemy.engine.Engine [cached since 1054s ago] (UUID('95857437-9de8-4026-8163-22c38b50a056'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.USER: 'user'>, 'Look for error messages in server.log and summarize what happened.', 'null', None, 'null', None, None, None, None, None, None, 35, datetime.datetime(2026, 2, 18, 8, 45, 37, 449951))
2026-02-18 17:45:37,450 - sqlalchemy.engine.Engine - INFO - [cached since 1054s ago] (UUID('95857437-9de8-4026-8163-22c38b50a056'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.USER: 'user'>, 'Look for error messages in server.log and summarize what happened.', 'null', None, 'null', None, None, None, None, None, None, 35, datetime.datetime(2026, 2, 18, 8, 45, 37, 449951))
2026-02-18 17:45:37,451 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:45:37,451 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:45:37,451 INFO sqlalchemy.engine.Engine [cached since 1054s ago] (UUID('95857437-9de8-4026-8163-22c38b50a056'),)
2026-02-18 17:45:37,451 - sqlalchemy.engine.Engine - INFO - [cached since 1054s ago] (UUID('95857437-9de8-4026-8163-22c38b50a056'),)
2026-02-18 17:45:37,452 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:45:37,452 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:45:37,453 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:45:37,453 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:45:37,453 INFO sqlalchemy.engine.Engine SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:45:37,453 - sqlalchemy.engine.Engine - INFO - SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:45:37,453 INFO sqlalchemy.engine.Engine [cached since 1054s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:45:37,453 - sqlalchemy.engine.Engine - INFO - [cached since 1054s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:45:37,454 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:45:37,454 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:45:37,454 INFO sqlalchemy.engine.Engine [cached since 1054s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:45:37,454 - sqlalchemy.engine.Engine - INFO - [cached since 1054s ago] (UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'),)
2026-02-18 17:45:37,456 - chatbot_ai_system.orchestrator - INFO - Using cached context for conversation 36c8c289-9d0b-4ed2-88d9-e45d46389920
2026-02-18 17:45:38,077 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
2026-02-18 17:45:38,081 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:45:38,081 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:45:38,082 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:45:38,082 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:45:38,082 INFO sqlalchemy.engine.Engine [cached since 1047s ago] (UUID('91e79977-b856-433b-8bc0-cce53a2525b9'),)
2026-02-18 17:45:38,082 - sqlalchemy.engine.Engine - INFO - [cached since 1047s ago] (UUID('91e79977-b856-433b-8bc0-cce53a2525b9'),)
2026-02-18 17:45:38,086 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:45:38,086 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:45:38,086 INFO sqlalchemy.engine.Engine [cached since 1047s ago] ('[-0.26746806502342224,-0.2594718933105469,-2.5866243839263916,-1.4744205474853516,0.18254411220550537,-1.3832898139953613,-0.35255637764930725,0.3141 ... (14925 characters truncated) ... 471473694,0.6806413531303406,0.5030516982078552,0.07266294956207275,-0.7440199255943298,-0.8610929250717163,-0.8132697343826294,-0.43404489755630493]', UUID('91e79977-b856-433b-8bc0-cce53a2525b9'))
2026-02-18 17:45:38,086 - sqlalchemy.engine.Engine - INFO - [cached since 1047s ago] ('[-0.26746806502342224,-0.2594718933105469,-2.5866243839263916,-1.4744205474853516,0.18254411220550537,-1.3832898139953613,-0.35255637764930725,0.3141 ... (14925 characters truncated) ... 471473694,0.6806413531303406,0.5030516982078552,0.07266294956207275,-0.7440199255943298,-0.8610929250717163,-0.8132697343826294,-0.43404489755630493]', UUID('91e79977-b856-433b-8bc0-cce53a2525b9'))
2026-02-18 17:45:38,089 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message 91e79977-b856-433b-8bc0-cce53a2525b9
2026-02-18 17:45:55,495 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:45:55,580 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5: Completed in 1 rounds, 38.6s
2026-02-18 17:45:55,580 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:45:55,580 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:45:55,580 INFO sqlalchemy.engine.Engine [cached since 1072s ago] (UUID('f1b24577-b034-456b-b1c5-53d17eee556d'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, '{"name": "git_status", "parameters": {"path": "/Users/mk/Documents"}}', 'null', None, '{"model": "llama3.2", "type": "agentic", "plan": ["Run `git status`", "List the files in `src/` using `ls src/`"]}', 2963, 20, 'llama3.2', None, None, None, 28, datetime.datetime(2026, 2, 18, 8, 45, 55, 580701))
2026-02-18 17:45:55,580 - sqlalchemy.engine.Engine - INFO - [cached since 1072s ago] (UUID('f1b24577-b034-456b-b1c5-53d17eee556d'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, '{"name": "git_status", "parameters": {"path": "/Users/mk/Documents"}}', 'null', None, '{"model": "llama3.2", "type": "agentic", "plan": ["Run `git status`", "List the files in `src/` using `ls src/`"]}', 2963, 20, 'llama3.2', None, None, None, 28, datetime.datetime(2026, 2, 18, 8, 45, 55, 580701))
2026-02-18 17:45:55,582 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:45:55,582 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:45:55,582 INFO sqlalchemy.engine.Engine [cached since 1072s ago] (UUID('f1b24577-b034-456b-b1c5-53d17eee556d'),)
2026-02-18 17:45:55,582 - sqlalchemy.engine.Engine - INFO - [cached since 1072s ago] (UUID('f1b24577-b034-456b-b1c5-53d17eee556d'),)
2026-02-18 17:45:55,583 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:45:55,583 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:45:55,584 - chatbot_ai_system.orchestrator - ERROR - Failed to embed user message at seq 27: This session is in 'prepared' state; no further SQL can be emitted within this transaction.
INFO:     127.0.0.1:61126 - "POST /api/chat HTTP/1.1" 200 OK
2026-02-18 17:45:55,612 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:45:55,612 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:45:55,612 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:45:55,612 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:45:55,612 INFO sqlalchemy.engine.Engine [cached since 1072s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:45:55,612 - sqlalchemy.engine.Engine - INFO - [cached since 1072s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:45:55,614 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:45:55,614 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:45:55,614 INFO sqlalchemy.engine.Engine [cached since 1072s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:45:55,614 - sqlalchemy.engine.Engine - INFO - [cached since 1072s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:45:55,615 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:45:55,615 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:45:55,615 INFO sqlalchemy.engine.Engine [cached since 1072s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:45:55,615 - sqlalchemy.engine.Engine - INFO - [cached since 1072s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:45:55,617 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:45:55,617 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:45:55,617 INFO sqlalchemy.engine.Engine [cached since 1072s ago] (UUID('028a8c4a-4fce-4b71-88fc-84dfa31ccf6a'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'Read docs/phase_5.0.md and docs/phase_4.1.md and summarize the key differences.', 'null', None, 'null', None, None, None, None, None, None, 29, datetime.datetime(2026, 2, 18, 8, 45, 55, 617771))
2026-02-18 17:45:55,617 - sqlalchemy.engine.Engine - INFO - [cached since 1072s ago] (UUID('028a8c4a-4fce-4b71-88fc-84dfa31ccf6a'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'Read docs/phase_5.0.md and docs/phase_4.1.md and summarize the key differences.', 'null', None, 'null', None, None, None, None, None, None, 29, datetime.datetime(2026, 2, 18, 8, 45, 55, 617771))
2026-02-18 17:45:55,619 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:45:55,619 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:45:55,619 INFO sqlalchemy.engine.Engine [cached since 1072s ago] (UUID('028a8c4a-4fce-4b71-88fc-84dfa31ccf6a'),)
2026-02-18 17:45:55,619 - sqlalchemy.engine.Engine - INFO - [cached since 1072s ago] (UUID('028a8c4a-4fce-4b71-88fc-84dfa31ccf6a'),)
2026-02-18 17:45:55,619 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:45:55,619 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:45:55,621 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:45:55,621 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:45:55,621 INFO sqlalchemy.engine.Engine SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:45:55,621 - sqlalchemy.engine.Engine - INFO - SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:45:55,621 INFO sqlalchemy.engine.Engine [cached since 1072s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:45:55,621 - sqlalchemy.engine.Engine - INFO - [cached since 1072s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:45:55,622 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:45:55,622 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:45:55,622 INFO sqlalchemy.engine.Engine [cached since 1072s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:45:55,622 - sqlalchemy.engine.Engine - INFO - [cached since 1072s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:45:55,624 - chatbot_ai_system.orchestrator - INFO - Using cached context for conversation 4933dbb2-767b-403b-a072-aab0873d7cd4
2026-02-18 17:45:56,092 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
2026-02-18 17:45:56,135 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:45:56,135 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:45:56,136 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:45:56,136 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:45:56,136 INFO sqlalchemy.engine.Engine [cached since 1065s ago] (UUID('f1b24577-b034-456b-b1c5-53d17eee556d'),)
2026-02-18 17:45:56,136 - sqlalchemy.engine.Engine - INFO - [cached since 1065s ago] (UUID('f1b24577-b034-456b-b1c5-53d17eee556d'),)
2026-02-18 17:45:56,149 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:45:56,149 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:45:56,149 INFO sqlalchemy.engine.Engine [cached since 1065s ago] ('[0.02064761333167553,0.48272183537483215,-3.01796555519104,-0.2708042562007904,1.2197552919387817,-0.7024652361869812,-0.3345687985420227,0.563384354 ... (14848 characters truncated) ... 08075,-0.26216423511505127,-0.09776654839515686,0.02566605806350708,-0.9041472673416138,-1.3975425958633423,-0.7047843933105469,-0.28929752111434937]', UUID('f1b24577-b034-456b-b1c5-53d17eee556d'))
2026-02-18 17:45:56,149 - sqlalchemy.engine.Engine - INFO - [cached since 1065s ago] ('[0.02064761333167553,0.48272183537483215,-3.01796555519104,-0.2708042562007904,1.2197552919387817,-0.7024652361869812,-0.3345687985420227,0.563384354 ... (14848 characters truncated) ... 08075,-0.26216423511505127,-0.09776654839515686,0.02566605806350708,-0.9041472673416138,-1.3975425958633423,-0.7047843933105469,-0.28929752111434937]', UUID('f1b24577-b034-456b-b1c5-53d17eee556d'))
2026-02-18 17:45:56,151 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message f1b24577-b034-456b-b1c5-53d17eee556d
2026-02-18 17:45:58,819 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:45:58,820 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: INTENT: FILESYSTEM
COMPLEXITY: COMPLEX...
2026-02-18 17:45:58,820 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 classifier: intent=FILESYSTEM, complexity=COMPLEX (raw: 'INTENT: FILESYSTEM\nCOMPLEXITY: COMPLEX')
2026-02-18 17:45:58,820 - chatbot_ai_system.orchestrator - INFO - Phase 4: intent='FILESYSTEM', complexity='COMPLEX'
2026-02-18 17:45:58,820 - chatbot_ai_system.orchestrator - INFO - Phase 5: Selected 8 tools: ['read_file', 'read_text_file', 'read_media_file', 'read_multiple_files', 'write_file', 'edit_file', 'create_directory', 'list_directory']
2026-02-18 17:45:58,822 - chatbot_ai_system.orchestrator - INFO - Phase 5.5: Routing to agentic Plan+ReAct engine
2026-02-18 17:46:00,090 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:46:00,090 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: INTENT: FILESYSTEM
COMPLEXITY: COMPLEX...
2026-02-18 17:46:00,090 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 classifier: intent=FILESYSTEM, complexity=COMPLEX (raw: 'INTENT: FILESYSTEM\nCOMPLEXITY: COMPLEX')
2026-02-18 17:46:00,090 - chatbot_ai_system.orchestrator - INFO - Phase 4: intent='FILESYSTEM', complexity='COMPLEX'
2026-02-18 17:46:00,091 - chatbot_ai_system.orchestrator - INFO - Phase 5: Selected 8 tools: ['read_file', 'read_text_file', 'read_media_file', 'read_multiple_files', 'write_file', 'edit_file', 'create_directory', 'list_directory']
2026-02-18 17:46:00,092 - chatbot_ai_system.orchestrator - INFO - Phase 5.5: Routing to agentic Plan+ReAct engine
2026-02-18 17:46:13,112 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:46:13,113 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: Here is a step-by-step plan to find error messages in `server.log` and summarize what happened:

1. Create a directory named `error_analysis` if it doesn't exist.
2. Read the contents of `server.log` ...
2026-02-18 17:46:13,113 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 planner: 6 steps  ['Here is a step-by-step plan to find error messages in `server.log` and summarize what happened:', "Create a directory named `error_analysis` if it doesn't exist.", 'Read the contents of `server.log` into a list of lines.', 'Iterate through each line in the list, check if it contains an error message (e.g., "Error:", "Exception:", etc.), and extract the relevant information.', 'Create a new file named `error_summary.txt` and write a summary of the errors found to this file.', 'List all files and directories in the current working directory.']
2026-02-18 17:46:24,953 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:46:24,953 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: 1. Create a new directory 'summary' if it does not exist.
2. List all files in the 'docs' directory to find phase_5.0.md and phase_4.1.md.
3. Read docs/phase_5.0.md and store its content in variable 1...
2026-02-18 17:46:24,953 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 planner: 6 steps  ["Create a new directory 'summary' if it does not exist.", "List all files in the 'docs' directory to find phase_5.0.md and phase_4.1.md.", 'Read docs/phase_5.0.md and store its content in variable 1.', 'Read docs/phase_4.1.md and store its content in variable 2.', 'Split both contents into lines.', 'Compare the line-by-line differences between the two files using a diff tool or algorithm.']
2026-02-18 17:46:42,781 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:46:43,629 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 1: read_text_file completed in 0.70s
2026-02-18 17:46:54,875 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:46:54,966 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 1: create_directory completed in 0.00s
2026-02-18 17:47:04,622 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:47:04,706 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 2: create_directory completed in 0.00s
2026-02-18 17:47:17,119 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:47:17,210 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 2: list_directory completed in 0.00s
2026-02-18 17:47:27,186 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:47:27,915 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 3: read_file completed in 0.64s
2026-02-18 17:47:41,896 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:47:41,980 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 3: read_text_file completed in 0.00s
2026-02-18 17:47:51,702 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:47:51,798 - chatbot_ai_system.tools.mcp_client - INFO - Using cached result for filesystem:read_text_file
2026-02-18 17:47:51,798 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 4: read_text_file completed in 0.01s
2026-02-18 17:48:07,256 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:48:07,351 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 4: read_text_file completed in 0.00s
2026-02-18 17:48:18,540 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:48:18,622 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 5: write_file completed in 0.00s
2026-02-18 17:48:34,016 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:48:34,103 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5: Completed in 5 rounds, 129.1s
2026-02-18 17:48:34,103 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:48:34,103 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:48:34,103 INFO sqlalchemy.engine.Engine [cached since 1231s ago] (UUID('d2508bfe-4103-42b8-8d8e-f6aa1d87bd5c'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, '{"name": "split", "parameters": {"x": null, "n": null}}', 'null', None, '{"model": "llama3.2", "type": "agentic", "plan": ["Create a new directory \'summary\' if it does not exist.", "List all files in the \'docs\' directo ... (150 characters truncated) ... nt in variable 2.", "Split both contents into lines.", "Compare the line-by-line differences between the two files using a diff tool or algorithm."]}', 2503, 20, 'llama3.2', None, None, None, 30, datetime.datetime(2026, 2, 18, 8, 48, 34, 103539))
2026-02-18 17:48:34,103 - sqlalchemy.engine.Engine - INFO - [cached since 1231s ago] (UUID('d2508bfe-4103-42b8-8d8e-f6aa1d87bd5c'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, '{"name": "split", "parameters": {"x": null, "n": null}}', 'null', None, '{"model": "llama3.2", "type": "agentic", "plan": ["Create a new directory \'summary\' if it does not exist.", "List all files in the \'docs\' directo ... (150 characters truncated) ... nt in variable 2.", "Split both contents into lines.", "Compare the line-by-line differences between the two files using a diff tool or algorithm."]}', 2503, 20, 'llama3.2', None, None, None, 30, datetime.datetime(2026, 2, 18, 8, 48, 34, 103539))
2026-02-18 17:48:34,105 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:48:34,105 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:48:34,105 INFO sqlalchemy.engine.Engine [cached since 1231s ago] (UUID('d2508bfe-4103-42b8-8d8e-f6aa1d87bd5c'),)
2026-02-18 17:48:34,105 - sqlalchemy.engine.Engine - INFO - [cached since 1231s ago] (UUID('d2508bfe-4103-42b8-8d8e-f6aa1d87bd5c'),)
2026-02-18 17:48:34,106 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:48:34,106 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:48:34,107 - chatbot_ai_system.orchestrator - ERROR - Failed to embed user message at seq 29: This session is in 'prepared' state; no further SQL can be emitted within this transaction.
INFO:     127.0.0.1:61153 - "POST /api/chat HTTP/1.1" 200 OK
2026-02-18 17:48:34,135 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:48:34,135 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:48:34,135 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:48:34,135 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:48:34,135 INFO sqlalchemy.engine.Engine [cached since 1231s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:48:34,135 - sqlalchemy.engine.Engine - INFO - [cached since 1231s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:48:34,137 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:48:34,137 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:48:34,137 INFO sqlalchemy.engine.Engine [cached since 1231s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:48:34,137 - sqlalchemy.engine.Engine - INFO - [cached since 1231s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:48:34,138 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:48:34,138 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:48:34,138 INFO sqlalchemy.engine.Engine [cached since 1231s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:48:34,138 - sqlalchemy.engine.Engine - INFO - [cached since 1231s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:48:34,139 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:48:34,139 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:48:34,140 INFO sqlalchemy.engine.Engine [cached since 1231s ago] (UUID('2b8dc35d-abde-4bcf-a433-b1df2d6bbd48'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'Find all python files in scripts/ and tell me which one is the largest.', 'null', None, 'null', None, None, None, None, None, None, 31, datetime.datetime(2026, 2, 18, 8, 48, 34, 139945))
2026-02-18 17:48:34,140 - sqlalchemy.engine.Engine - INFO - [cached since 1231s ago] (UUID('2b8dc35d-abde-4bcf-a433-b1df2d6bbd48'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'Find all python files in scripts/ and tell me which one is the largest.', 'null', None, 'null', None, None, None, None, None, None, 31, datetime.datetime(2026, 2, 18, 8, 48, 34, 139945))
2026-02-18 17:48:34,140 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:48:34,140 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:48:34,141 INFO sqlalchemy.engine.Engine [cached since 1231s ago] (UUID('2b8dc35d-abde-4bcf-a433-b1df2d6bbd48'),)
2026-02-18 17:48:34,141 - sqlalchemy.engine.Engine - INFO - [cached since 1231s ago] (UUID('2b8dc35d-abde-4bcf-a433-b1df2d6bbd48'),)
2026-02-18 17:48:34,144 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:48:34,144 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:48:34,145 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:48:34,145 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:48:34,145 INFO sqlalchemy.engine.Engine SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:48:34,145 - sqlalchemy.engine.Engine - INFO - SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:48:34,145 INFO sqlalchemy.engine.Engine [cached since 1231s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:48:34,145 - sqlalchemy.engine.Engine - INFO - [cached since 1231s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:48:34,146 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:48:34,146 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:48:34,146 INFO sqlalchemy.engine.Engine [cached since 1231s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:48:34,146 - sqlalchemy.engine.Engine - INFO - [cached since 1231s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:48:34,147 - chatbot_ai_system.orchestrator - INFO - Using cached context for conversation 4933dbb2-767b-403b-a072-aab0873d7cd4
2026-02-18 17:48:34,499 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
2026-02-18 17:48:34,557 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:48:34,557 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:48:34,557 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:48:34,557 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:48:34,557 INFO sqlalchemy.engine.Engine [cached since 1224s ago] (UUID('d2508bfe-4103-42b8-8d8e-f6aa1d87bd5c'),)
2026-02-18 17:48:34,557 - sqlalchemy.engine.Engine - INFO - [cached since 1224s ago] (UUID('d2508bfe-4103-42b8-8d8e-f6aa1d87bd5c'),)
2026-02-18 17:48:34,572 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:48:34,572 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:48:34,572 INFO sqlalchemy.engine.Engine [cached since 1224s ago] ('[0.6183019280433655,0.6520869135856628,-2.1379330158233643,-1.8221924304962158,0.8483803272247314,-0.9675002098083496,-1.0312702655792236,0.523396432 ... (14884 characters truncated) ... 256385803,0.05643601715564728,0.5673235058784485,0.7732544541358948,0.04603765904903412,-0.5015854239463806,-0.03281418979167938,0.05066388100385666]', UUID('d2508bfe-4103-42b8-8d8e-f6aa1d87bd5c'))
2026-02-18 17:48:34,572 - sqlalchemy.engine.Engine - INFO - [cached since 1224s ago] ('[0.6183019280433655,0.6520869135856628,-2.1379330158233643,-1.8221924304962158,0.8483803272247314,-0.9675002098083496,-1.0312702655792236,0.523396432 ... (14884 characters truncated) ... 256385803,0.05643601715564728,0.5673235058784485,0.7732544541358948,0.04603765904903412,-0.5015854239463806,-0.03281418979167938,0.05066388100385666]', UUID('d2508bfe-4103-42b8-8d8e-f6aa1d87bd5c'))
2026-02-18 17:48:34,575 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message d2508bfe-4103-42b8-8d8e-f6aa1d87bd5c
2026-02-18 17:48:44,408 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:48:44,543 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 6: list_directory completed in 0.00s
2026-02-18 17:48:47,938 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:48:47,938 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: INTENT: FILESYSTEM
COMPLEXITY: SIMPLE...
2026-02-18 17:48:47,939 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 classifier: intent=FILESYSTEM, complexity=SIMPLE (raw: 'INTENT: FILESYSTEM\nCOMPLEXITY: SIMPLE')
2026-02-18 17:48:47,939 - chatbot_ai_system.orchestrator - INFO - Phase 4: intent='FILESYSTEM', complexity='SIMPLE'
2026-02-18 17:48:47,939 - chatbot_ai_system.orchestrator - INFO - Phase 5: Selected 1 tools: ['search_nodes']
2026-02-18 17:48:59,724 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:48:59,802 - chatbot_ai_system.tools.mcp_client - INFO - Using cached result for filesystem:list_directory
2026-02-18 17:48:59,802 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 7: list_directory completed in 0.00s
2026-02-18 17:49:25,372 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:49:25,463 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:49:25,463 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:49:25,463 INFO sqlalchemy.engine.Engine [cached since 1282s ago] (UUID('38549f65-94be-41cb-867a-be9ea3edb8f4'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, '', '[{"id": "call_gvvso16c", "function": {"name": "search_nodes", "arguments": {"query": "(scripts/ | .py)$"}}, "type": "function"}]', None, '{"model": "llama3.2"}', 4088, 22, 'llama3.2', None, None, None, 32, datetime.datetime(2026, 2, 18, 8, 49, 25, 463114))
2026-02-18 17:49:25,463 - sqlalchemy.engine.Engine - INFO - [cached since 1282s ago] (UUID('38549f65-94be-41cb-867a-be9ea3edb8f4'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, '', '[{"id": "call_gvvso16c", "function": {"name": "search_nodes", "arguments": {"query": "(scripts/ | .py)$"}}, "type": "function"}]', None, '{"model": "llama3.2"}', 4088, 22, 'llama3.2', None, None, None, 32, datetime.datetime(2026, 2, 18, 8, 49, 25, 463114))
2026-02-18 17:49:25,466 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:49:25,466 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:49:25,466 INFO sqlalchemy.engine.Engine [cached since 1282s ago] (UUID('38549f65-94be-41cb-867a-be9ea3edb8f4'),)
2026-02-18 17:49:25,466 - sqlalchemy.engine.Engine - INFO - [cached since 1282s ago] (UUID('38549f65-94be-41cb-867a-be9ea3edb8f4'),)
2026-02-18 17:49:25,467 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID AND messages.sequence_number = $2::INTEGER AND messages.role = $3::VARCHAR
2026-02-18 17:49:25,467 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID AND messages.sequence_number = $2::INTEGER AND messages.role = $3::VARCHAR
2026-02-18 17:49:25,467 INFO sqlalchemy.engine.Engine [cached since 1146s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 31, <MessageRole.USER: 'user'>)
2026-02-18 17:49:25,467 - sqlalchemy.engine.Engine - INFO - [cached since 1146s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 31, <MessageRole.USER: 'user'>)
2026-02-18 17:49:25,470 - chatbot_ai_system.services.embedding - INFO - Using cached embedding
2026-02-18 17:49:25,470 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:49:25,470 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:49:25,470 INFO sqlalchemy.engine.Engine [cached since 1275s ago] (UUID('2b8dc35d-abde-4bcf-a433-b1df2d6bbd48'),)
2026-02-18 17:49:25,470 - sqlalchemy.engine.Engine - INFO - [cached since 1275s ago] (UUID('2b8dc35d-abde-4bcf-a433-b1df2d6bbd48'),)
2026-02-18 17:49:25,472 - chatbot_ai_system.orchestrator - ERROR - Failed to generate embedding for message 2b8dc35d-abde-4bcf-a433-b1df2d6bbd48: Session is already flushing
2026-02-18 17:49:25,475 - sqlalchemy.pool.impl.AsyncAdaptedQueuePool - ERROR - The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x11724c7d0>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
sys:1: SAWarning: The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x11724c7d0>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2026-02-18 17:49:25,477 - sqlalchemy.pool.impl.AsyncAdaptedQueuePool - ERROR - The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x1159315e0>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
sys:1: SAWarning: The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x1159315e0>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2026-02-18 17:49:25,480 - sqlalchemy.pool.impl.AsyncAdaptedQueuePool - ERROR - The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x1177cc500>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
sys:1: SAWarning: The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x1177cc500>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2026-02-18 17:49:25,482 - sqlalchemy.pool.impl.AsyncAdaptedQueuePool - ERROR - The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x1177ce8a0>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
sys:1: SAWarning: The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x1177ce8a0>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2026-02-18 17:49:25,487 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:49:25,487 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:49:25,487 INFO sqlalchemy.engine.Engine [cached since 1282s ago] (UUID('0b349c15-c4dc-429e-9fef-d6f6c5e1ba78'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.TOOL: 'tool'>, '{\n  "entities": [],\n  "relations": []\n}', 'null', 'call_gvvso16c', 'null', None, None, None, None, None, None, 33, datetime.datetime(2026, 2, 18, 8, 49, 25, 487316))
2026-02-18 17:49:25,487 - sqlalchemy.engine.Engine - INFO - [cached since 1282s ago] (UUID('0b349c15-c4dc-429e-9fef-d6f6c5e1ba78'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.TOOL: 'tool'>, '{\n  "entities": [],\n  "relations": []\n}', 'null', 'call_gvvso16c', 'null', None, None, None, None, None, None, 33, datetime.datetime(2026, 2, 18, 8, 49, 25, 487316))
2026-02-18 17:49:25,488 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:49:25,488 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:49:25,488 INFO sqlalchemy.engine.Engine [cached since 1282s ago] (UUID('0b349c15-c4dc-429e-9fef-d6f6c5e1ba78'),)
2026-02-18 17:49:25,488 - sqlalchemy.engine.Engine - INFO - [cached since 1282s ago] (UUID('0b349c15-c4dc-429e-9fef-d6f6c5e1ba78'),)
2026-02-18 17:49:38,731 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:49:38,822 - chatbot_ai_system.tools.mcp_client - INFO - Using cached result for filesystem:list_directory
2026-02-18 17:49:38,822 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 round 8: list_directory completed in 0.00s
2026-02-18 17:50:02,605 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:50:09,663 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:50:09,663 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:50:09,663 INFO sqlalchemy.engine.Engine [cached since 1326s ago] (UUID('c81b14f7-f320-404b-8c24-5a0bc07b0b27'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, "It seems that there are no Python files found in the `scripts/` directory. If you'd like, I can help you run a different search query or provide more ... (68 characters truncated) ... , if you're interested in knowing which Python file is the largest in the entire repository, I can try to help with that as well. Please let me know!", 'null', None, '{"model": "llama3.2", "type": "synthesis"}', 4059, 80, 'llama3.2', None, None, None, 34, datetime.datetime(2026, 2, 18, 8, 50, 9, 663403))
2026-02-18 17:50:09,663 - sqlalchemy.engine.Engine - INFO - [cached since 1326s ago] (UUID('c81b14f7-f320-404b-8c24-5a0bc07b0b27'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.ASSISTANT: 'assistant'>, "It seems that there are no Python files found in the `scripts/` directory. If you'd like, I can help you run a different search query or provide more ... (68 characters truncated) ... , if you're interested in knowing which Python file is the largest in the entire repository, I can try to help with that as well. Please let me know!", 'null', None, '{"model": "llama3.2", "type": "synthesis"}', 4059, 80, 'llama3.2', None, None, None, 34, datetime.datetime(2026, 2, 18, 8, 50, 9, 663403))
2026-02-18 17:50:09,665 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:50:09,665 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:50:09,665 INFO sqlalchemy.engine.Engine [cached since 1326s ago] (UUID('c81b14f7-f320-404b-8c24-5a0bc07b0b27'),)
2026-02-18 17:50:09,665 - sqlalchemy.engine.Engine - INFO - [cached since 1326s ago] (UUID('c81b14f7-f320-404b-8c24-5a0bc07b0b27'),)
2026-02-18 17:50:09,667 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:50:09,667 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:61209 - "POST /api/chat HTTP/1.1" 200 OK
2026-02-18 17:50:09,729 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:50:09,729 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:50:09,729 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:50:09,729 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.username, users.created_at, users.last_login_at 
FROM users 
WHERE users.id = $1::UUID
2026-02-18 17:50:09,730 INFO sqlalchemy.engine.Engine [cached since 1327s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:50:09,730 - sqlalchemy.engine.Engine - INFO - [cached since 1327s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:50:09,732 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:50:09,732 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:50:09,732 INFO sqlalchemy.engine.Engine [cached since 1327s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:50:09,732 - sqlalchemy.engine.Engine - INFO - [cached since 1327s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:50:09,734 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:50:09,734 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::UUID ORDER BY messages.sequence_number DESC 
 LIMIT $2::INTEGER
2026-02-18 17:50:09,734 INFO sqlalchemy.engine.Engine [cached since 1327s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:50:09,734 - sqlalchemy.engine.Engine - INFO - [cached since 1327s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), 50)
2026-02-18 17:50:09,751 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:50:09,751 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:50:09,751 INFO sqlalchemy.engine.Engine [cached since 1327s ago] (UUID('364c6152-6b24-474e-ba5f-293636949db3'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'Analyze the imports in src/chatbot_ai_system/orchestrator.py and list the external dependencies.', 'null', None, 'null', None, None, None, None, None, None, 35, datetime.datetime(2026, 2, 18, 8, 50, 9, 751022))
2026-02-18 17:50:09,751 - sqlalchemy.engine.Engine - INFO - [cached since 1327s ago] (UUID('364c6152-6b24-474e-ba5f-293636949db3'), UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'), <MessageRole.USER: 'user'>, 'Analyze the imports in src/chatbot_ai_system/orchestrator.py and list the external dependencies.', 'null', None, 'null', None, None, None, None, None, None, 35, datetime.datetime(2026, 2, 18, 8, 50, 9, 751022))
2026-02-18 17:50:09,752 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:50:09,752 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:50:09,753 INFO sqlalchemy.engine.Engine [cached since 1327s ago] (UUID('364c6152-6b24-474e-ba5f-293636949db3'),)
2026-02-18 17:50:09,753 - sqlalchemy.engine.Engine - INFO - [cached since 1327s ago] (UUID('364c6152-6b24-474e-ba5f-293636949db3'),)
2026-02-18 17:50:09,754 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:50:09,754 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:50:09,791 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:50:09,791 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:50:09,792 INFO sqlalchemy.engine.Engine SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:50:09,792 - sqlalchemy.engine.Engine - INFO - SELECT memories.id, memories.user_id, memories.content, memories.context, memories.last_accessed_at 
FROM memories 
WHERE memories.user_id = $1::UUID
2026-02-18 17:50:09,792 INFO sqlalchemy.engine.Engine [cached since 1327s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:50:09,792 - sqlalchemy.engine.Engine - INFO - [cached since 1327s ago] (UUID('00000000-0000-0000-0000-000000000000'),)
2026-02-18 17:50:09,794 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:50:09,794 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.title, conversations.is_archived, conversations.created_at, conversations.updated_at, conversations.summary, conversations.last_summarized_seq_id 
FROM conversations 
WHERE conversations.id = $1::UUID
2026-02-18 17:50:09,794 INFO sqlalchemy.engine.Engine [cached since 1327s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:50:09,794 - sqlalchemy.engine.Engine - INFO - [cached since 1327s ago] (UUID('4933dbb2-767b-403b-a072-aab0873d7cd4'),)
2026-02-18 17:50:09,796 - chatbot_ai_system.orchestrator - INFO - Using cached context for conversation 4933dbb2-767b-403b-a072-aab0873d7cd4
2026-02-18 17:50:10,124 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
2026-02-18 17:50:10,166 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:50:10,166 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:50:10,166 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:50:10,166 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:50:10,166 INFO sqlalchemy.engine.Engine [cached since 1319s ago] (UUID('c81b14f7-f320-404b-8c24-5a0bc07b0b27'),)
2026-02-18 17:50:10,166 - sqlalchemy.engine.Engine - INFO - [cached since 1319s ago] (UUID('c81b14f7-f320-404b-8c24-5a0bc07b0b27'),)
2026-02-18 17:50:10,180 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:50:10,180 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:50:10,180 INFO sqlalchemy.engine.Engine [cached since 1319s ago] ('[-0.377814382314682,1.065459966659546,-2.555777072906494,-1.3319910764694214,0.41820409893989563,-1.2736387252807617,-0.2562446892261505,0.6393167376 ... (14891 characters truncated) ... 537250519,0.2615632116794586,-0.22410811483860016,0.5233306288719177,0.05444522202014923,-1.6084527969360352,-0.3517354726791382,-1.0261797904968262]', UUID('c81b14f7-f320-404b-8c24-5a0bc07b0b27'))
2026-02-18 17:50:10,180 - sqlalchemy.engine.Engine - INFO - [cached since 1319s ago] ('[-0.377814382314682,1.065459966659546,-2.555777072906494,-1.3319910764694214,0.41820409893989563,-1.2736387252807617,-0.2562446892261505,0.6393167376 ... (14891 characters truncated) ... 537250519,0.2615632116794586,-0.22410811483860016,0.5233306288719177,0.05444522202014923,-1.6084527969360352,-0.3517354726791382,-1.0261797904968262]', UUID('c81b14f7-f320-404b-8c24-5a0bc07b0b27'))
2026-02-18 17:50:10,182 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message c81b14f7-f320-404b-8c24-5a0bc07b0b27
2026-02-18 17:50:18,015 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:50:29,070 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5: Force-synthesized after 8 rounds, 256.0s
2026-02-18 17:50:29,071 INFO sqlalchemy.engine.Engine INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:50:29,071 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (id, conversation_id, role, content, tool_calls, tool_call_id, metadata, token_count_prompt, token_count_completion, model, latency_ms, finish_reason, embedding, sequence_number, created_at) VALUES ($1::UUID, $2::UUID, $3::VARCHAR, $4::VARCHAR, $5::JSONB, $6::VARCHAR, $7::JSONB, $8::INTEGER, $9::INTEGER, $10::VARCHAR, $11::INTEGER, $12::VARCHAR, $13, $14::INTEGER, $15::TIMESTAMP WITHOUT TIME ZONE)
2026-02-18 17:50:29,071 INFO sqlalchemy.engine.Engine [cached since 1346s ago] (UUID('a78669f8-719d-4257-8922-9710cbebfa37'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.ASSISTANT: 'assistant'>, 'The current working directory contains the following files and directories:\n\n*.env\n*.env.example\n*.git\n*.gitignore\n*.pytest_cache\n*.venv\nREAD ... (261 characters truncated) ... that the list of files and directories may not be exhaustive, as it is limited to the information gathered during the execution of the planned steps.', 'null', None, '{"model": "llama3.2", "type": "agentic", "plan": ["Here is a step-by-step plan to find error messages in `server.log` and summarize what happened:",  ... (310 characters truncated) ... amed `error_summary.txt` and write a summary of the errors found to this file.", "List all files and directories in the current working directory."]}', 1447, 130, 'llama3.2', None, None, None, 36, datetime.datetime(2026, 2, 18, 8, 50, 29, 71290))
2026-02-18 17:50:29,071 - sqlalchemy.engine.Engine - INFO - [cached since 1346s ago] (UUID('a78669f8-719d-4257-8922-9710cbebfa37'), UUID('36c8c289-9d0b-4ed2-88d9-e45d46389920'), <MessageRole.ASSISTANT: 'assistant'>, 'The current working directory contains the following files and directories:\n\n*.env\n*.env.example\n*.git\n*.gitignore\n*.pytest_cache\n*.venv\nREAD ... (261 characters truncated) ... that the list of files and directories may not be exhaustive, as it is limited to the information gathered during the execution of the planned steps.', 'null', None, '{"model": "llama3.2", "type": "agentic", "plan": ["Here is a step-by-step plan to find error messages in `server.log` and summarize what happened:",  ... (310 characters truncated) ... amed `error_summary.txt` and write a summary of the errors found to this file.", "List all files and directories in the current working directory."]}', 1447, 130, 'llama3.2', None, None, None, 36, datetime.datetime(2026, 2, 18, 8, 50, 29, 71290))
2026-02-18 17:50:29,073 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:50:29,073 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:50:29,073 INFO sqlalchemy.engine.Engine [cached since 1346s ago] (UUID('a78669f8-719d-4257-8922-9710cbebfa37'),)
2026-02-18 17:50:29,073 - sqlalchemy.engine.Engine - INFO - [cached since 1346s ago] (UUID('a78669f8-719d-4257-8922-9710cbebfa37'),)
2026-02-18 17:50:29,074 INFO sqlalchemy.engine.Engine COMMIT
2026-02-18 17:50:29,074 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-18 17:50:29,075 - chatbot_ai_system.orchestrator - ERROR - Failed to embed user message at seq 35: This session is in 'prepared' state; no further SQL can be emitted within this transaction.
INFO:     127.0.0.1:61146 - "POST /api/chat HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for connections to close. (CTRL+C to force quit)
2026-02-18 17:50:29,592 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/embeddings "HTTP/1.1 200 OK"
2026-02-18 17:50:29,637 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-18 17:50:29,637 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-18 17:50:29,637 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:50:29,637 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.conversation_id, messages.role, messages.content, messages.tool_calls, messages.tool_call_id, messages.metadata, messages.token_count_prompt, messages.token_count_completion, messages.model, messages.latency_ms, messages.finish_reason, messages.embedding, messages.sequence_number, messages.created_at 
FROM messages 
WHERE messages.id = $1::UUID
2026-02-18 17:50:29,637 INFO sqlalchemy.engine.Engine [cached since 1339s ago] (UUID('a78669f8-719d-4257-8922-9710cbebfa37'),)
2026-02-18 17:50:29,637 - sqlalchemy.engine.Engine - INFO - [cached since 1339s ago] (UUID('a78669f8-719d-4257-8922-9710cbebfa37'),)
2026-02-18 17:50:29,650 INFO sqlalchemy.engine.Engine UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:50:29,650 - sqlalchemy.engine.Engine - INFO - UPDATE messages SET embedding=$1 WHERE messages.id = $2::UUID
2026-02-18 17:50:29,650 INFO sqlalchemy.engine.Engine [cached since 1339s ago] ('[-0.2859574854373932,0.7947617769241333,-2.6118195056915283,-0.28230226039886475,0.4278491139411926,-1.0936005115509033,-0.014503576792776585,-0.1543 ... (14985 characters truncated) ... 413322449,0.07931169867515564,0.6433658003807068,-0.21869875490665436,-0.7541134357452393,-0.4996669590473175,-0.665054976940155,-0.8278570175170898]', UUID('a78669f8-719d-4257-8922-9710cbebfa37'))
2026-02-18 17:50:29,650 - sqlalchemy.engine.Engine - INFO - [cached since 1339s ago] ('[-0.2859574854373932,0.7947617769241333,-2.6118195056915283,-0.28230226039886475,0.4278491139411926,-1.0936005115509033,-0.014503576792776585,-0.1543 ... (14985 characters truncated) ... 413322449,0.07931169867515564,0.6433658003807068,-0.21869875490665436,-0.7541134357452393,-0.4996669590473175,-0.665054976940155,-0.8278570175170898]', UUID('a78669f8-719d-4257-8922-9710cbebfa37'))
2026-02-18 17:50:29,652 - chatbot_ai_system.orchestrator - INFO - Generated embedding for message a78669f8-719d-4257-8922-9710cbebfa37
2026-02-18 17:50:32,368 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2026-02-18 17:50:32,368 - chatbot_ai_system.providers.ollama - INFO - Ollama response content: INTENT: FILESYSTEM
COMPLEXITY: COMPLEX...
2026-02-18 17:50:32,368 - chatbot_ai_system.services.agentic_engine - INFO - Phase 5.5 classifier: intent=FILESYSTEM, complexity=COMPLEX (raw: 'INTENT: FILESYSTEM\nCOMPLEXITY: COMPLEX')
2026-02-18 17:50:32,369 - chatbot_ai_system.orchestrator - INFO - Phase 4: intent='FILESYSTEM', complexity='COMPLEX'
2026-02-18 17:50:32,369 - chatbot_ai_system.orchestrator - INFO - Phase 5: Selected 8 tools: ['read_file', 'read_text_file', 'read_media_file', 'read_multiple_files', 'write_file', 'edit_file', 'create_directory', 'list_directory']
2026-02-18 17:50:32,371 - chatbot_ai_system.orchestrator - INFO - Phase 5.5: Routing to agentic Plan+ReAct engine
Puppeteer MCP Server closed
